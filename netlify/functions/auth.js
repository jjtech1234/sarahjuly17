"use strict";var Zp=Object.create;var Hn=Object.defineProperty;var Jp=Object.getOwnPropertyDescriptor;var Xp=Object.getOwnPropertyNames;var Yp=Object.getPrototypeOf,em=Object.prototype.hasOwnProperty;var U=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),tm=(r,e)=>{for(var t in e)Hn(r,t,{get:e[t],enumerable:!0})},Ic=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Xp(e))!em.call(r,s)&&s!==t&&Hn(r,s,{get:()=>e[s],enumerable:!(n=Jp(e,s))||n.enumerable});return r};var Nc=(r,e,t)=>(t=r!=null?Zp(Yp(r)):{},Ic(e||!r||!r.__esModule?Hn(t,"default",{value:r,enumerable:!0}):t,r)),rm=r=>Ic(Hn({},"__esModule",{value:!0}),r);var Vr=U((ka,bf)=>{var js=require("buffer"),Et=js.Buffer;function yf(r,e){for(var t in r)e[t]=r[t]}Et.from&&Et.alloc&&Et.allocUnsafe&&Et.allocUnsafeSlow?bf.exports=js:(yf(js,ka),ka.Buffer=br);function br(r,e,t){return Et(r,e,t)}br.prototype=Object.create(Et.prototype);yf(Et,br);br.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return Et(r,e,t)};br.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=Et(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};br.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Et(r)};br.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return js.SlowBuffer(r)}});var qa=U((Z3,xf)=>{var Ds=Vr().Buffer,Qg=require("stream"),Ug=require("util");function Fs(r){if(this.buffer=null,this.writable=!0,this.readable=!0,!r)return this.buffer=Ds.alloc(0),this;if(typeof r.pipe=="function")return this.buffer=Ds.alloc(0),r.pipe(this),this;if(r.length||typeof r=="object")return this.buffer=r,this.writable=!1,process.nextTick(function(){this.emit("end",r),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof r+")")}Ug.inherits(Fs,Qg);Fs.prototype.write=function(e){this.buffer=Ds.concat([this.buffer,Ds.from(e)]),this.emit("data",e)};Fs.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};xf.exports=Fs});var vf=U((J3,wf)=>{"use strict";function Ma(r){var e=(r/8|0)+(r%8===0?0:1);return e}var Vg={ES256:Ma(256),ES384:Ma(384),ES512:Ma(521)};function zg(r){var e=Vg[r];if(e)return e;throw new Error('Unknown algorithm "'+r+'"')}wf.exports=zg});var If=U((X3,Af)=>{"use strict";var Qs=Vr().Buffer,_f=vf(),Us=128,Ef=0,Kg=32,Gg=16,Wg=2,Tf=Gg|Kg|Ef<<6,Vs=Wg|Ef<<6;function Hg(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Cf(r){if(Qs.isBuffer(r))return r;if(typeof r=="string")return Qs.from(r,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function Zg(r,e){r=Cf(r);var t=_f(e),n=t+1,s=r.length,i=0;if(r[i++]!==Tf)throw new Error('Could not find expected "seq"');var o=r[i++];if(o===(Us|1)&&(o=r[i++]),s-i<o)throw new Error('"seq" specified length of "'+o+'", only "'+(s-i)+'" remaining');if(r[i++]!==Vs)throw new Error('Could not find expected "int" for "r"');var a=r[i++];if(s-i-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(s-i-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var u=i;if(i+=a,r[i++]!==Vs)throw new Error('Could not find expected "int" for "s"');var h=r[i++];if(s-i!==h)throw new Error('"s" specified length of "'+h+'", expected "'+(s-i)+'"');if(n<h)throw new Error('"s" specified length of "'+h+'", max of "'+n+'" is acceptable');var l=i;if(i+=h,i!==s)throw new Error('Expected to consume entire buffer, but "'+(s-i)+'" bytes remain');var p=t-a,y=t-h,x=Qs.allocUnsafe(p+a+y+h);for(i=0;i<p;++i)x[i]=0;r.copy(x,i,u+Math.max(-p,0),u+a),i=t;for(var g=i;i<g+y;++i)x[i]=0;return r.copy(x,i,l+Math.max(-y,0),l+h),x=x.toString("base64"),x=Hg(x),x}function Sf(r,e,t){for(var n=0;e+n<t&&r[e+n]===0;)++n;var s=r[e+n]>=Us;return s&&--n,n}function Jg(r,e){r=Cf(r);var t=_f(e),n=r.length;if(n!==t*2)throw new TypeError('"'+e+'" signatures must be "'+t*2+'" bytes, saw "'+n+'"');var s=Sf(r,0,t),i=Sf(r,t,r.length),o=t-s,a=t-i,u=2+o+1+1+a,h=u<Us,l=Qs.allocUnsafe((h?2:3)+u),p=0;return l[p++]=Tf,h?l[p++]=u:(l[p++]=Us|1,l[p++]=u&255),l[p++]=Vs,l[p++]=o,s<0?(l[p++]=0,p+=r.copy(l,p,0,t)):p+=r.copy(l,p,s,t),l[p++]=Vs,l[p++]=a,i<0?(l[p++]=0,r.copy(l,p,t)):r.copy(l,p,t+i),l}Af.exports={derToJose:Zg,joseToDer:Jg}});var Pf=U((Y3,Nf)=>{"use strict";var kn=require("buffer").Buffer,Ba=require("buffer").SlowBuffer;Nf.exports=zs;function zs(r,e){if(!kn.isBuffer(r)||!kn.isBuffer(e)||r.length!==e.length)return!1;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}zs.install=function(){kn.prototype.equal=Ba.prototype.equal=function(e){return zs(this,e)}};var Xg=kn.prototype.equal,Yg=Ba.prototype.equal;zs.restore=function(){kn.prototype.equal=Xg,Ba.prototype.equal=Yg}});var Qa=U((e5,jf)=>{var Kr=Vr().Buffer,ct=require("crypto"),Of=If(),Rf=require("util"),ey=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,qn="secret must be a string or buffer",zr="key must be a string or a buffer",ty="key must be a string, a buffer or an object",Da=typeof ct.createPublicKey=="function";Da&&(zr+=" or a KeyObject",qn+="or a KeyObject");function Lf(r){if(!Kr.isBuffer(r)&&typeof r!="string"&&(!Da||typeof r!="object"||typeof r.type!="string"||typeof r.asymmetricKeyType!="string"||typeof r.export!="function"))throw bt(zr)}function $f(r){if(!Kr.isBuffer(r)&&typeof r!="string"&&typeof r!="object")throw bt(ty)}function ry(r){if(!Kr.isBuffer(r)){if(typeof r=="string")return r;if(!Da||typeof r!="object"||r.type!=="secret"||typeof r.export!="function")throw bt(qn)}}function Fa(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kf(r){r=r.toString();var e=4-r.length%4;if(e!==4)for(var t=0;t<e;++t)r+="=";return r.replace(/\-/g,"+").replace(/_/g,"/")}function bt(r){var e=[].slice.call(arguments,1),t=Rf.format.bind(Rf,r).apply(null,e);return new TypeError(t)}function ny(r){return Kr.isBuffer(r)||typeof r=="string"}function Mn(r){return ny(r)||(r=JSON.stringify(r)),r}function qf(r){return function(t,n){ry(n),t=Mn(t);var s=ct.createHmac("sha"+r,n),i=(s.update(t),s.digest("base64"));return Fa(i)}}var ja,sy="timingSafeEqual"in ct?function(e,t){return e.byteLength!==t.byteLength?!1:ct.timingSafeEqual(e,t)}:function(e,t){return ja||(ja=Pf()),ja(e,t)};function iy(r){return function(t,n,s){var i=qf(r)(t,s);return sy(Kr.from(n),Kr.from(i))}}function Mf(r){return function(t,n){$f(n),t=Mn(t);var s=ct.createSign("RSA-SHA"+r),i=(s.update(t),s.sign(n,"base64"));return Fa(i)}}function Bf(r){return function(t,n,s){Lf(s),t=Mn(t),n=kf(n);var i=ct.createVerify("RSA-SHA"+r);return i.update(t),i.verify(s,n,"base64")}}function oy(r){return function(t,n){$f(n),t=Mn(t);var s=ct.createSign("RSA-SHA"+r),i=(s.update(t),s.sign({key:n,padding:ct.constants.RSA_PKCS1_PSS_PADDING,saltLength:ct.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Fa(i)}}function ay(r){return function(t,n,s){Lf(s),t=Mn(t),n=kf(n);var i=ct.createVerify("RSA-SHA"+r);return i.update(t),i.verify({key:s,padding:ct.constants.RSA_PKCS1_PSS_PADDING,saltLength:ct.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function cy(r){var e=Mf(r);return function(){var n=e.apply(null,arguments);return n=Of.derToJose(n,"ES"+r),n}}function uy(r){var e=Bf(r);return function(n,s,i){s=Of.joseToDer(s,"ES"+r).toString("base64");var o=e(n,s,i);return o}}function ly(){return function(){return""}}function fy(){return function(e,t){return t===""}}jf.exports=function(e){var t={hs:qf,rs:Mf,ps:oy,es:cy,none:ly},n={hs:iy,rs:Bf,ps:ay,es:uy,none:fy},s=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!s)throw bt(ey,e);var i=(s[1]||s[3]).toLowerCase(),o=s[2];return{sign:t[i](o),verify:n[i](o)}}});var Ua=U((t5,Df)=>{var hy=require("buffer").Buffer;Df.exports=function(e){return typeof e=="string"?e:typeof e=="number"||hy.isBuffer(e)?e.toString():JSON.stringify(e)}});var Kf=U((r5,zf)=>{var dy=Vr().Buffer,Ff=qa(),py=Qa(),my=require("stream"),Qf=Ua(),Va=require("util");function Uf(r,e){return dy.from(r,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gy(r,e,t){t=t||"utf8";var n=Uf(Qf(r),"binary"),s=Uf(Qf(e),t);return Va.format("%s.%s",n,s)}function Vf(r){var e=r.header,t=r.payload,n=r.secret||r.privateKey,s=r.encoding,i=py(e.alg),o=gy(e,t,s),a=i.sign(o,n);return Va.format("%s.%s",o,a)}function Ks(r){var e=r.secret||r.privateKey||r.key,t=new Ff(e);this.readable=!0,this.header=r.header,this.encoding=r.encoding,this.secret=this.privateKey=this.key=t,this.payload=new Ff(r.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Va.inherits(Ks,my);Ks.prototype.sign=function(){try{var e=Vf({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};Ks.sign=Vf;zf.exports=Ks});var rh=U((n5,th)=>{var Wf=Vr().Buffer,Gf=qa(),yy=Qa(),by=require("stream"),Hf=Ua(),xy=require("util"),wy=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function vy(r){return Object.prototype.toString.call(r)==="[object Object]"}function Sy(r){if(vy(r))return r;try{return JSON.parse(r)}catch{return}}function Zf(r){var e=r.split(".",1)[0];return Sy(Wf.from(e,"base64").toString("binary"))}function _y(r){return r.split(".",2).join(".")}function Jf(r){return r.split(".")[2]}function Ey(r,e){e=e||"utf8";var t=r.split(".")[1];return Wf.from(t,"base64").toString(e)}function Xf(r){return wy.test(r)&&!!Zf(r)}function Yf(r,e,t){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}r=Hf(r);var s=Jf(r),i=_y(r),o=yy(e);return o.verify(i,s,t)}function eh(r,e){if(e=e||{},r=Hf(r),!Xf(r))return null;var t=Zf(r);if(!t)return null;var n=Ey(r);return(t.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:t,payload:n,signature:Jf(r)}}function Gr(r){r=r||{};var e=r.secret||r.publicKey||r.key,t=new Gf(e);this.readable=!0,this.algorithm=r.algorithm,this.encoding=r.encoding,this.secret=this.publicKey=this.key=t,this.signature=new Gf(r.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}xy.inherits(Gr,by);Gr.prototype.verify=function(){try{var e=Yf(this.signature.buffer,this.algorithm,this.key.buffer),t=eh(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};Gr.decode=eh;Gr.isValid=Xf;Gr.verify=Yf;th.exports=Gr});var Ws=U(Gt=>{var nh=Kf(),Gs=rh(),Ty=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Gt.ALGORITHMS=Ty;Gt.sign=nh.sign;Gt.verify=Gs.verify;Gt.decode=Gs.decode;Gt.isValid=Gs.isValid;Gt.createSign=function(e){return new nh(e)};Gt.createVerify=function(e){return new Gs(e)}});var za=U((i5,sh)=>{var Cy=Ws();sh.exports=function(r,e){e=e||{};var t=Cy.decode(r,e);if(!t)return null;var n=t.payload;if(typeof n=="string")try{var s=JSON.parse(n);s!==null&&typeof s=="object"&&(n=s)}catch{}return e.complete===!0?{header:t.header,payload:n,signature:t.signature}:n}});var Bn=U((o5,ih)=>{var Hs=function(r,e){Error.call(this,r),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=r,e&&(this.inner=e)};Hs.prototype=Object.create(Error.prototype);Hs.prototype.constructor=Hs;ih.exports=Hs});var Ka=U((a5,ah)=>{var oh=Bn(),Zs=function(r,e){oh.call(this,r),this.name="NotBeforeError",this.date=e};Zs.prototype=Object.create(oh.prototype);Zs.prototype.constructor=Zs;ah.exports=Zs});var Ga=U((c5,uh)=>{var ch=Bn(),Js=function(r,e){ch.call(this,r),this.name="TokenExpiredError",this.expiredAt=e};Js.prototype=Object.create(ch.prototype);Js.prototype.constructor=Js;uh.exports=Js});var fh=U((u5,lh)=>{var Wr=1e3,Hr=Wr*60,Zr=Hr*60,xr=Zr*24,Ay=xr*7,Iy=xr*365.25;lh.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Ny(r);if(t==="number"&&isFinite(r))return e.long?Ry(r):Py(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Ny(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Iy;case"weeks":case"week":case"w":return t*Ay;case"days":case"day":case"d":return t*xr;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Zr;case"minutes":case"minute":case"mins":case"min":case"m":return t*Hr;case"seconds":case"second":case"secs":case"sec":case"s":return t*Wr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Py(r){var e=Math.abs(r);return e>=xr?Math.round(r/xr)+"d":e>=Zr?Math.round(r/Zr)+"h":e>=Hr?Math.round(r/Hr)+"m":e>=Wr?Math.round(r/Wr)+"s":r+"ms"}function Ry(r){var e=Math.abs(r);return e>=xr?Xs(r,e,xr,"day"):e>=Zr?Xs(r,e,Zr,"hour"):e>=Hr?Xs(r,e,Hr,"minute"):e>=Wr?Xs(r,e,Wr,"second"):r+" ms"}function Xs(r,e,t,n){var s=e>=t*1.5;return Math.round(r/t)+" "+n+(s?"s":"")}});var Wa=U((l5,hh)=>{var Oy=fh();hh.exports=function(r,e){var t=e||Math.floor(Date.now()/1e3);if(typeof r=="string"){var n=Oy(r);return typeof n>"u"?void 0:Math.floor(t+n/1e3)}else return typeof r=="number"?t+r:void 0}});var jn=U((f5,dh)=>{"use strict";var Ly="2.0.0",$y=Number.MAX_SAFE_INTEGER||9007199254740991,ky=16,qy=250,My=["major","premajor","minor","preminor","patch","prepatch","prerelease"];dh.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:ky,MAX_SAFE_BUILD_LENGTH:qy,MAX_SAFE_INTEGER:$y,RELEASE_TYPES:My,SEMVER_SPEC_VERSION:Ly,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Dn=U((h5,ph)=>{"use strict";var By=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};ph.exports=By});var Jr=U((Tt,mh)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Ha,MAX_SAFE_BUILD_LENGTH:jy,MAX_LENGTH:Dy}=jn(),Fy=Dn();Tt=mh.exports={};var Qy=Tt.re=[],Uy=Tt.safeRe=[],W=Tt.src=[],Vy=Tt.safeSrc=[],H=Tt.t={},zy=0,Za="[a-zA-Z0-9-]",Ky=[["\\s",1],["\\d",Dy],[Za,jy]],Gy=r=>{for(let[e,t]of Ky)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},ue=(r,e,t)=>{let n=Gy(e),s=zy++;Fy(r,s,e),H[r]=s,W[s]=e,Vy[s]=n,Qy[s]=new RegExp(e,t?"g":void 0),Uy[s]=new RegExp(n,t?"g":void 0)};ue("NUMERICIDENTIFIER","0|[1-9]\\d*");ue("NUMERICIDENTIFIERLOOSE","\\d+");ue("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Za}*`);ue("MAINVERSION",`(${W[H.NUMERICIDENTIFIER]})\\.(${W[H.NUMERICIDENTIFIER]})\\.(${W[H.NUMERICIDENTIFIER]})`);ue("MAINVERSIONLOOSE",`(${W[H.NUMERICIDENTIFIERLOOSE]})\\.(${W[H.NUMERICIDENTIFIERLOOSE]})\\.(${W[H.NUMERICIDENTIFIERLOOSE]})`);ue("PRERELEASEIDENTIFIER",`(?:${W[H.NONNUMERICIDENTIFIER]}|${W[H.NUMERICIDENTIFIER]})`);ue("PRERELEASEIDENTIFIERLOOSE",`(?:${W[H.NONNUMERICIDENTIFIER]}|${W[H.NUMERICIDENTIFIERLOOSE]})`);ue("PRERELEASE",`(?:-(${W[H.PRERELEASEIDENTIFIER]}(?:\\.${W[H.PRERELEASEIDENTIFIER]})*))`);ue("PRERELEASELOOSE",`(?:-?(${W[H.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${W[H.PRERELEASEIDENTIFIERLOOSE]})*))`);ue("BUILDIDENTIFIER",`${Za}+`);ue("BUILD",`(?:\\+(${W[H.BUILDIDENTIFIER]}(?:\\.${W[H.BUILDIDENTIFIER]})*))`);ue("FULLPLAIN",`v?${W[H.MAINVERSION]}${W[H.PRERELEASE]}?${W[H.BUILD]}?`);ue("FULL",`^${W[H.FULLPLAIN]}$`);ue("LOOSEPLAIN",`[v=\\s]*${W[H.MAINVERSIONLOOSE]}${W[H.PRERELEASELOOSE]}?${W[H.BUILD]}?`);ue("LOOSE",`^${W[H.LOOSEPLAIN]}$`);ue("GTLT","((?:<|>)?=?)");ue("XRANGEIDENTIFIERLOOSE",`${W[H.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ue("XRANGEIDENTIFIER",`${W[H.NUMERICIDENTIFIER]}|x|X|\\*`);ue("XRANGEPLAIN",`[v=\\s]*(${W[H.XRANGEIDENTIFIER]})(?:\\.(${W[H.XRANGEIDENTIFIER]})(?:\\.(${W[H.XRANGEIDENTIFIER]})(?:${W[H.PRERELEASE]})?${W[H.BUILD]}?)?)?`);ue("XRANGEPLAINLOOSE",`[v=\\s]*(${W[H.XRANGEIDENTIFIERLOOSE]})(?:\\.(${W[H.XRANGEIDENTIFIERLOOSE]})(?:\\.(${W[H.XRANGEIDENTIFIERLOOSE]})(?:${W[H.PRERELEASELOOSE]})?${W[H.BUILD]}?)?)?`);ue("XRANGE",`^${W[H.GTLT]}\\s*${W[H.XRANGEPLAIN]}$`);ue("XRANGELOOSE",`^${W[H.GTLT]}\\s*${W[H.XRANGEPLAINLOOSE]}$`);ue("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Ha}})(?:\\.(\\d{1,${Ha}}))?(?:\\.(\\d{1,${Ha}}))?`);ue("COERCE",`${W[H.COERCEPLAIN]}(?:$|[^\\d])`);ue("COERCEFULL",W[H.COERCEPLAIN]+`(?:${W[H.PRERELEASE]})?(?:${W[H.BUILD]})?(?:$|[^\\d])`);ue("COERCERTL",W[H.COERCE],!0);ue("COERCERTLFULL",W[H.COERCEFULL],!0);ue("LONETILDE","(?:~>?)");ue("TILDETRIM",`(\\s*)${W[H.LONETILDE]}\\s+`,!0);Tt.tildeTrimReplace="$1~";ue("TILDE",`^${W[H.LONETILDE]}${W[H.XRANGEPLAIN]}$`);ue("TILDELOOSE",`^${W[H.LONETILDE]}${W[H.XRANGEPLAINLOOSE]}$`);ue("LONECARET","(?:\\^)");ue("CARETTRIM",`(\\s*)${W[H.LONECARET]}\\s+`,!0);Tt.caretTrimReplace="$1^";ue("CARET",`^${W[H.LONECARET]}${W[H.XRANGEPLAIN]}$`);ue("CARETLOOSE",`^${W[H.LONECARET]}${W[H.XRANGEPLAINLOOSE]}$`);ue("COMPARATORLOOSE",`^${W[H.GTLT]}\\s*(${W[H.LOOSEPLAIN]})$|^$`);ue("COMPARATOR",`^${W[H.GTLT]}\\s*(${W[H.FULLPLAIN]})$|^$`);ue("COMPARATORTRIM",`(\\s*)${W[H.GTLT]}\\s*(${W[H.LOOSEPLAIN]}|${W[H.XRANGEPLAIN]})`,!0);Tt.comparatorTrimReplace="$1$2$3";ue("HYPHENRANGE",`^\\s*(${W[H.XRANGEPLAIN]})\\s+-\\s+(${W[H.XRANGEPLAIN]})\\s*$`);ue("HYPHENRANGELOOSE",`^\\s*(${W[H.XRANGEPLAINLOOSE]})\\s+-\\s+(${W[H.XRANGEPLAINLOOSE]})\\s*$`);ue("STAR","(<|>)?=?\\s*\\*");ue("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ue("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ys=U((d5,gh)=>{"use strict";var Wy=Object.freeze({loose:!0}),Hy=Object.freeze({}),Zy=r=>r?typeof r!="object"?Wy:r:Hy;gh.exports=Zy});var Ja=U((p5,xh)=>{"use strict";var yh=/^[0-9]+$/,bh=(r,e)=>{let t=yh.test(r),n=yh.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},Jy=(r,e)=>bh(e,r);xh.exports={compareIdentifiers:bh,rcompareIdentifiers:Jy}});var Ue=U((m5,vh)=>{"use strict";var ei=Dn(),{MAX_LENGTH:wh,MAX_SAFE_INTEGER:ti}=jn(),{safeRe:ri,t:ni}=Jr(),Xy=Ys(),{compareIdentifiers:Xr}=Ja(),Xa=class r{constructor(e,t){if(t=Xy(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>wh)throw new TypeError(`version is longer than ${wh} characters`);ei("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?ri[ni.LOOSE]:ri[ni.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ti||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ti||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ti||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<ti)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ei("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),Xr(this.major,e.major)||Xr(this.minor,e.minor)||Xr(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=e.prerelease[t];if(ei("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Xr(n,s)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let n=this.build[t],s=e.build[t];if(ei("build compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Xr(n,s)}while(++t)}inc(e,t,n){if(e.startsWith("pre")){if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let s=`-${t}`.match(this.options.loose?ri[ni.PRERELEASELOOSE]:ri[ni.PRERELEASE]);if(!s||s[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let i=[t,s];n===!1&&(i=[t]),Xr(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};vh.exports=Xa});var wr=U((g5,_h)=>{"use strict";var Sh=Ue(),Yy=(r,e,t=!1)=>{if(r instanceof Sh)return r;try{return new Sh(r,e)}catch(n){if(!t)return null;throw n}};_h.exports=Yy});var Th=U((y5,Eh)=>{"use strict";var eb=wr(),tb=(r,e)=>{let t=eb(r,e);return t?t.version:null};Eh.exports=tb});var Ah=U((b5,Ch)=>{"use strict";var rb=wr(),nb=(r,e)=>{let t=rb(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Ch.exports=nb});var Ph=U((x5,Nh)=>{"use strict";var Ih=Ue(),sb=(r,e,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new Ih(r instanceof Ih?r.version:r,t).inc(e,n,s).version}catch{return null}};Nh.exports=sb});var Lh=U((w5,Oh)=>{"use strict";var Rh=wr(),ib=(r,e)=>{let t=Rh(r,null,!0),n=Rh(e,null,!0),s=t.compare(n);if(s===0)return null;let i=s>0,o=i?t:n,a=i?n:t,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=u?"pre":"";return t.major!==n.major?l+"major":t.minor!==n.minor?l+"minor":t.patch!==n.patch?l+"patch":"prerelease"};Oh.exports=ib});var kh=U((v5,$h)=>{"use strict";var ob=Ue(),ab=(r,e)=>new ob(r,e).major;$h.exports=ab});var Mh=U((S5,qh)=>{"use strict";var cb=Ue(),ub=(r,e)=>new cb(r,e).minor;qh.exports=ub});var jh=U((_5,Bh)=>{"use strict";var lb=Ue(),fb=(r,e)=>new lb(r,e).patch;Bh.exports=fb});var Fh=U((E5,Dh)=>{"use strict";var hb=wr(),db=(r,e)=>{let t=hb(r,e);return t&&t.prerelease.length?t.prerelease:null};Dh.exports=db});var ut=U((T5,Uh)=>{"use strict";var Qh=Ue(),pb=(r,e,t)=>new Qh(r,t).compare(new Qh(e,t));Uh.exports=pb});var zh=U((C5,Vh)=>{"use strict";var mb=ut(),gb=(r,e,t)=>mb(e,r,t);Vh.exports=gb});var Gh=U((A5,Kh)=>{"use strict";var yb=ut(),bb=(r,e)=>yb(r,e,!0);Kh.exports=bb});var si=U((I5,Hh)=>{"use strict";var Wh=Ue(),xb=(r,e,t)=>{let n=new Wh(r,t),s=new Wh(e,t);return n.compare(s)||n.compareBuild(s)};Hh.exports=xb});var Jh=U((N5,Zh)=>{"use strict";var wb=si(),vb=(r,e)=>r.sort((t,n)=>wb(t,n,e));Zh.exports=vb});var Yh=U((P5,Xh)=>{"use strict";var Sb=si(),_b=(r,e)=>r.sort((t,n)=>Sb(n,t,e));Xh.exports=_b});var Fn=U((R5,ed)=>{"use strict";var Eb=ut(),Tb=(r,e,t)=>Eb(r,e,t)>0;ed.exports=Tb});var ii=U((O5,td)=>{"use strict";var Cb=ut(),Ab=(r,e,t)=>Cb(r,e,t)<0;td.exports=Ab});var Ya=U((L5,rd)=>{"use strict";var Ib=ut(),Nb=(r,e,t)=>Ib(r,e,t)===0;rd.exports=Nb});var ec=U(($5,nd)=>{"use strict";var Pb=ut(),Rb=(r,e,t)=>Pb(r,e,t)!==0;nd.exports=Rb});var oi=U((k5,sd)=>{"use strict";var Ob=ut(),Lb=(r,e,t)=>Ob(r,e,t)>=0;sd.exports=Lb});var ai=U((q5,id)=>{"use strict";var $b=ut(),kb=(r,e,t)=>$b(r,e,t)<=0;id.exports=kb});var tc=U((M5,od)=>{"use strict";var qb=Ya(),Mb=ec(),Bb=Fn(),jb=oi(),Db=ii(),Fb=ai(),Qb=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return qb(r,t,n);case"!=":return Mb(r,t,n);case">":return Bb(r,t,n);case">=":return jb(r,t,n);case"<":return Db(r,t,n);case"<=":return Fb(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};od.exports=Qb});var cd=U((B5,ad)=>{"use strict";var Ub=Ue(),Vb=wr(),{safeRe:ci,t:ui}=Jr(),zb=(r,e)=>{if(r instanceof Ub)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?ci[ui.COERCEFULL]:ci[ui.COERCE]);else{let u=e.includePrerelease?ci[ui.COERCERTLFULL]:ci[ui.COERCERTL],h;for(;(h=u.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||h.index+h[0].length!==t.index+t[0].length)&&(t=h),u.lastIndex=h.index+h[1].length+h[2].length;u.lastIndex=-1}if(t===null)return null;let n=t[2],s=t[3]||"0",i=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return Vb(`${n}.${s}.${i}${o}${a}`,e)};ad.exports=zb});var ld=U((j5,ud)=>{"use strict";var rc=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,t)}return this}};ud.exports=rc});var lt=U((D5,pd)=>{"use strict";var Kb=/\s+/g,nc=class r{constructor(e,t){if(t=Wb(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof sc)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(Kb," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!hd(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&tx(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let n=0;n<t.length;n++)n>0&&(this.formatted+=" "),this.formatted+=t[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&Yb)|(this.options.loose&&ex))+":"+e,s=fd.get(n);if(s)return s;let i=this.options.loose,o=i?et[Ge.HYPHENRANGELOOSE]:et[Ge.HYPHENRANGE];e=e.replace(o,fx(this.options.includePrerelease)),Te("hyphen replace",e),e=e.replace(et[Ge.COMPARATORTRIM],Zb),Te("comparator trim",e),e=e.replace(et[Ge.TILDETRIM],Jb),Te("tilde trim",e),e=e.replace(et[Ge.CARETTRIM],Xb),Te("caret trim",e);let a=e.split(" ").map(p=>rx(p,this.options)).join(" ").split(/\s+/).map(p=>lx(p,this.options));i&&(a=a.filter(p=>(Te("loose invalid filter",p,this.options),!!p.match(et[Ge.COMPARATORLOOSE])))),Te("range list",a);let u=new Map,h=a.map(p=>new sc(p,this.options));for(let p of h){if(hd(p))return[p];u.set(p.value,p)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return fd.set(n,l),l}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>dd(n,t)&&e.set.some(s=>dd(s,t)&&n.every(i=>s.every(o=>i.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Hb(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(hx(this.set[t],e,this.options))return!0;return!1}};pd.exports=nc;var Gb=ld(),fd=new Gb,Wb=Ys(),sc=Qn(),Te=Dn(),Hb=Ue(),{safeRe:et,t:Ge,comparatorTrimReplace:Zb,tildeTrimReplace:Jb,caretTrimReplace:Xb}=Jr(),{FLAG_INCLUDE_PRERELEASE:Yb,FLAG_LOOSE:ex}=jn(),hd=r=>r.value==="<0.0.0-0",tx=r=>r.value==="",dd=(r,e)=>{let t=!0,n=r.slice(),s=n.pop();for(;t&&n.length;)t=n.every(i=>s.intersects(i,e)),s=n.pop();return t},rx=(r,e)=>(Te("comp",r,e),r=ix(r,e),Te("caret",r),r=nx(r,e),Te("tildes",r),r=ax(r,e),Te("xrange",r),r=ux(r,e),Te("stars",r),r),We=r=>!r||r.toLowerCase()==="x"||r==="*",nx=(r,e)=>r.trim().split(/\s+/).map(t=>sx(t,e)).join(" "),sx=(r,e)=>{let t=e.loose?et[Ge.TILDELOOSE]:et[Ge.TILDE];return r.replace(t,(n,s,i,o,a)=>{Te("tilde",r,n,s,i,o,a);let u;return We(s)?u="":We(i)?u=`>=${s}.0.0 <${+s+1}.0.0-0`:We(o)?u=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(Te("replaceTilde pr",a),u=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):u=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,Te("tilde return",u),u})},ix=(r,e)=>r.trim().split(/\s+/).map(t=>ox(t,e)).join(" "),ox=(r,e)=>{Te("caret",r,e);let t=e.loose?et[Ge.CARETLOOSE]:et[Ge.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(s,i,o,a,u)=>{Te("caret",r,s,i,o,a,u);let h;return We(i)?h="":We(o)?h=`>=${i}.0.0${n} <${+i+1}.0.0-0`:We(a)?i==="0"?h=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:h=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:u?(Te("replaceCaret pr",u),i==="0"?o==="0"?h=`>=${i}.${o}.${a}-${u} <${i}.${o}.${+a+1}-0`:h=`>=${i}.${o}.${a}-${u} <${i}.${+o+1}.0-0`:h=`>=${i}.${o}.${a}-${u} <${+i+1}.0.0-0`):(Te("no pr"),i==="0"?o==="0"?h=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:h=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:h=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),Te("caret return",h),h})},ax=(r,e)=>(Te("replaceXRanges",r,e),r.split(/\s+/).map(t=>cx(t,e)).join(" ")),cx=(r,e)=>{r=r.trim();let t=e.loose?et[Ge.XRANGELOOSE]:et[Ge.XRANGE];return r.replace(t,(n,s,i,o,a,u)=>{Te("xRange",r,n,s,i,o,a,u);let h=We(i),l=h||We(o),p=l||We(a),y=p;return s==="="&&y&&(s=""),u=e.includePrerelease?"-0":"",h?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&y?(l&&(o=0),a=0,s===">"?(s=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",l?i=+i+1:o=+o+1),s==="<"&&(u="-0"),n=`${s+i}.${o}.${a}${u}`):l?n=`>=${i}.0.0${u} <${+i+1}.0.0-0`:p&&(n=`>=${i}.${o}.0${u} <${i}.${+o+1}.0-0`),Te("xRange return",n),n})},ux=(r,e)=>(Te("replaceStars",r,e),r.trim().replace(et[Ge.STAR],"")),lx=(r,e)=>(Te("replaceGTE0",r,e),r.trim().replace(et[e.includePrerelease?Ge.GTE0PRE:Ge.GTE0],"")),fx=r=>(e,t,n,s,i,o,a,u,h,l,p,y)=>(We(n)?t="":We(s)?t=`>=${n}.0.0${r?"-0":""}`:We(i)?t=`>=${n}.${s}.0${r?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,We(h)?u="":We(l)?u=`<${+h+1}.0.0-0`:We(p)?u=`<${h}.${+l+1}.0-0`:y?u=`<=${h}.${l}.${p}-${y}`:r?u=`<${h}.${l}.${+p+1}-0`:u=`<=${u}`,`${t} ${u}`.trim()),hx=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(Te(r[n].semver),r[n].semver!==sc.ANY&&r[n].semver.prerelease.length>0){let s=r[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var Qn=U((F5,wd)=>{"use strict";var Un=Symbol("SemVer ANY"),ac=class r{static get ANY(){return Un}constructor(e,t){if(t=md(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),oc("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Un?this.value="":this.value=this.operator+this.semver.version,oc("comp",this)}parse(e){let t=this.options.loose?gd[yd.COMPARATORLOOSE]:gd[yd.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new bd(n[2],this.options.loose):this.semver=Un}toString(){return this.value}test(e){if(oc("Comparator.test",e,this.options.loose),this.semver===Un||e===Un)return!0;if(typeof e=="string")try{e=new bd(e,this.options)}catch{return!1}return ic(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new xd(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new xd(this.value,t).test(e.semver):(t=md(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||ic(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||ic(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};wd.exports=ac;var md=Ys(),{safeRe:gd,t:yd}=Jr(),ic=tc(),oc=Dn(),bd=Ue(),xd=lt()});var Vn=U((Q5,vd)=>{"use strict";var dx=lt(),px=(r,e,t)=>{try{e=new dx(e,t)}catch{return!1}return e.test(r)};vd.exports=px});var _d=U((U5,Sd)=>{"use strict";var mx=lt(),gx=(r,e)=>new mx(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));Sd.exports=gx});var Td=U((V5,Ed)=>{"use strict";var yx=Ue(),bx=lt(),xx=(r,e,t)=>{let n=null,s=null,i=null;try{i=new bx(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new yx(n,t))}),n};Ed.exports=xx});var Ad=U((z5,Cd)=>{"use strict";var wx=Ue(),vx=lt(),Sx=(r,e,t)=>{let n=null,s=null,i=null;try{i=new vx(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new wx(n,t))}),n};Cd.exports=Sx});var Pd=U((K5,Nd)=>{"use strict";var cc=Ue(),_x=lt(),Id=Fn(),Ex=(r,e)=>{r=new _x(r,e);let t=new cc("0.0.0");if(r.test(t)||(t=new cc("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let s=r.set[n],i=null;s.forEach(o=>{let a=new cc(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Id(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||Id(t,i))&&(t=i)}return t&&r.test(t)?t:null};Nd.exports=Ex});var Od=U((G5,Rd)=>{"use strict";var Tx=lt(),Cx=(r,e)=>{try{return new Tx(r,e).range||"*"}catch{return null}};Rd.exports=Cx});var li=U((W5,qd)=>{"use strict";var Ax=Ue(),kd=Qn(),{ANY:Ix}=kd,Nx=lt(),Px=Vn(),Ld=Fn(),$d=ii(),Rx=ai(),Ox=oi(),Lx=(r,e,t,n)=>{r=new Ax(r,n),e=new Nx(e,n);let s,i,o,a,u;switch(t){case">":s=Ld,i=Rx,o=$d,a=">",u=">=";break;case"<":s=$d,i=Ox,o=Ld,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Px(r,e,n))return!1;for(let h=0;h<e.set.length;++h){let l=e.set[h],p=null,y=null;if(l.forEach(x=>{x.semver===Ix&&(x=new kd(">=0.0.0")),p=p||x,y=y||x,s(x.semver,p.semver,n)?p=x:o(x.semver,y.semver,n)&&(y=x)}),p.operator===a||p.operator===u||(!y.operator||y.operator===a)&&i(r,y.semver))return!1;if(y.operator===u&&o(r,y.semver))return!1}return!0};qd.exports=Lx});var Bd=U((H5,Md)=>{"use strict";var $x=li(),kx=(r,e,t)=>$x(r,e,">",t);Md.exports=kx});var Dd=U((Z5,jd)=>{"use strict";var qx=li(),Mx=(r,e,t)=>qx(r,e,"<",t);jd.exports=Mx});var Ud=U((J5,Qd)=>{"use strict";var Fd=lt(),Bx=(r,e,t)=>(r=new Fd(r,t),e=new Fd(e,t),r.intersects(e,t));Qd.exports=Bx});var zd=U((X5,Vd)=>{"use strict";var jx=Vn(),Dx=ut();Vd.exports=(r,e,t)=>{let n=[],s=null,i=null,o=r.sort((l,p)=>Dx(l,p,t));for(let l of o)jx(l,e,t)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[l,p]of n)l===p?a.push(l):!p&&l===o[0]?a.push("*"):p?l===o[0]?a.push(`<=${p}`):a.push(`${l} - ${p}`):a.push(`>=${l}`);let u=a.join(" || "),h=typeof e.raw=="string"?e.raw:String(e);return u.length<h.length?u:e}});var Jd=U((Y5,Zd)=>{"use strict";var Kd=lt(),lc=Qn(),{ANY:uc}=lc,zn=Vn(),fc=ut(),Fx=(r,e,t={})=>{if(r===e)return!0;r=new Kd(r,t),e=new Kd(e,t);let n=!1;e:for(let s of r.set){for(let i of e.set){let o=Ux(s,i,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Qx=[new lc(">=0.0.0-0")],Gd=[new lc(">=0.0.0")],Ux=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===uc){if(e.length===1&&e[0].semver===uc)return!0;t.includePrerelease?r=Qx:r=Gd}if(e.length===1&&e[0].semver===uc){if(t.includePrerelease)return!0;e=Gd}let n=new Set,s,i;for(let x of r)x.operator===">"||x.operator===">="?s=Wd(s,x,t):x.operator==="<"||x.operator==="<="?i=Hd(i,x,t):n.add(x.semver);if(n.size>1)return null;let o;if(s&&i){if(o=fc(s.semver,i.semver,t),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let x of n){if(s&&!zn(x,String(s),t)||i&&!zn(x,String(i),t))return null;for(let g of e)if(!zn(x,String(g),t))return!1;return!0}let a,u,h,l,p=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,y=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;p&&p.prerelease.length===1&&i.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let x of e){if(l=l||x.operator===">"||x.operator===">=",h=h||x.operator==="<"||x.operator==="<=",s){if(y&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===y.major&&x.semver.minor===y.minor&&x.semver.patch===y.patch&&(y=!1),x.operator===">"||x.operator===">="){if(a=Wd(s,x,t),a===x&&a!==s)return!1}else if(s.operator===">="&&!zn(s.semver,String(x),t))return!1}if(i){if(p&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===p.major&&x.semver.minor===p.minor&&x.semver.patch===p.patch&&(p=!1),x.operator==="<"||x.operator==="<="){if(u=Hd(i,x,t),u===x&&u!==i)return!1}else if(i.operator==="<="&&!zn(i.semver,String(x),t))return!1}if(!x.operator&&(i||s)&&o!==0)return!1}return!(s&&h&&!i&&o!==0||i&&l&&!s&&o!==0||y||p)},Wd=(r,e,t)=>{if(!r)return e;let n=fc(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},Hd=(r,e,t)=>{if(!r)return e;let n=fc(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};Zd.exports=Fx});var fi=U((e8,ep)=>{"use strict";var hc=Jr(),Xd=jn(),Vx=Ue(),Yd=Ja(),zx=wr(),Kx=Th(),Gx=Ah(),Wx=Ph(),Hx=Lh(),Zx=kh(),Jx=Mh(),Xx=jh(),Yx=Fh(),e1=ut(),t1=zh(),r1=Gh(),n1=si(),s1=Jh(),i1=Yh(),o1=Fn(),a1=ii(),c1=Ya(),u1=ec(),l1=oi(),f1=ai(),h1=tc(),d1=cd(),p1=Qn(),m1=lt(),g1=Vn(),y1=_d(),b1=Td(),x1=Ad(),w1=Pd(),v1=Od(),S1=li(),_1=Bd(),E1=Dd(),T1=Ud(),C1=zd(),A1=Jd();ep.exports={parse:zx,valid:Kx,clean:Gx,inc:Wx,diff:Hx,major:Zx,minor:Jx,patch:Xx,prerelease:Yx,compare:e1,rcompare:t1,compareLoose:r1,compareBuild:n1,sort:s1,rsort:i1,gt:o1,lt:a1,eq:c1,neq:u1,gte:l1,lte:f1,cmp:h1,coerce:d1,Comparator:p1,Range:m1,satisfies:g1,toComparators:y1,maxSatisfying:b1,minSatisfying:x1,minVersion:w1,validRange:v1,outside:S1,gtr:_1,ltr:E1,intersects:T1,simplifyRange:C1,subset:A1,SemVer:Vx,re:hc.re,src:hc.src,tokens:hc.t,SEMVER_SPEC_VERSION:Xd.SEMVER_SPEC_VERSION,RELEASE_TYPES:Xd.RELEASE_TYPES,compareIdentifiers:Yd.compareIdentifiers,rcompareIdentifiers:Yd.rcompareIdentifiers}});var rp=U((t8,tp)=>{var I1=fi();tp.exports=I1.satisfies(process.version,">=15.7.0")});var sp=U((r8,np)=>{var N1=fi();np.exports=N1.satisfies(process.version,">=16.9.0")});var dc=U((n8,ip)=>{var P1=rp(),R1=sp(),O1={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},L1={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};ip.exports=function(r,e){if(!r||!e)return;let t=e.asymmetricKeyType;if(!t)return;let n=O1[t];if(!n)throw new Error(`Unknown key type "${t}".`);if(!n.includes(r))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${n.join(", ")}.`);if(P1)switch(t){case"ec":let s=e.asymmetricKeyDetails.namedCurve,i=L1[r];if(s!==i)throw new Error(`"alg" parameter "${r}" requires curve "${i}".`);break;case"rsa-pss":if(R1){let o=parseInt(r.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:u,saltLength:h}=e.asymmetricKeyDetails;if(a!==`sha${o}`||u!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${r}.`);if(h!==void 0&&h>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${r}.`)}break}}});var pc=U((s8,op)=>{var $1=fi();op.exports=$1.satisfies(process.version,"^6.12.0 || >=8.0.0")});var up=U((i8,cp)=>{var Ee=Bn(),k1=Ka(),ap=Ga(),q1=za(),M1=Wa(),B1=dc(),j1=pc(),D1=Ws(),{KeyObject:F1,createSecretKey:Q1,createPublicKey:U1}=require("crypto"),mc=["RS256","RS384","RS512"],V1=["ES256","ES384","ES512"],gc=["RS256","RS384","RS512"],z1=["HS256","HS384","HS512"];j1&&(mc.splice(mc.length,0,"PS256","PS384","PS512"),gc.splice(gc.length,0,"PS256","PS384","PS512"));cp.exports=function(r,e,t,n){typeof t=="function"&&!n&&(n=t,t={}),t||(t={}),t=Object.assign({},t);let s;if(n?s=n:s=function(l,p){if(l)throw l;return p},t.clockTimestamp&&typeof t.clockTimestamp!="number")return s(new Ee("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return s(new Ee("nonce must be a non-empty string"));if(t.allowInvalidAsymmetricKeyTypes!==void 0&&typeof t.allowInvalidAsymmetricKeyTypes!="boolean")return s(new Ee("allowInvalidAsymmetricKeyTypes must be a boolean"));let i=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!r)return s(new Ee("jwt must be provided"));if(typeof r!="string")return s(new Ee("jwt must be a string"));let o=r.split(".");if(o.length!==3)return s(new Ee("jwt malformed"));let a;try{a=q1(r,{complete:!0})}catch(l){return s(l)}if(!a)return s(new Ee("invalid token"));let u=a.header,h;if(typeof e=="function"){if(!n)return s(new Ee("verify must be called asynchronous if secret or public key is provided as a callback"));h=e}else h=function(l,p){return p(null,e)};return h(u,function(l,p){if(l)return s(new Ee("error in secret or public key callback: "+l.message));let y=o[2].trim()!=="";if(!y&&p)return s(new Ee("jwt signature is required"));if(y&&!p)return s(new Ee("secret or public key must be provided"));if(!y&&!t.algorithms)return s(new Ee('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof F1))try{p=U1(p)}catch{try{p=Q1(typeof p=="string"?Buffer.from(p):p)}catch{return s(new Ee("secretOrPublicKey is not valid key material"))}}if(t.algorithms||(p.type==="secret"?t.algorithms=z1:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?t.algorithms=gc:p.asymmetricKeyType==="ec"?t.algorithms=V1:t.algorithms=mc),t.algorithms.indexOf(a.header.alg)===-1)return s(new Ee("invalid algorithm"));if(u.alg.startsWith("HS")&&p.type!=="secret")return s(new Ee(`secretOrPublicKey must be a symmetric key when using ${u.alg}`));if(/^(?:RS|PS|ES)/.test(u.alg)&&p.type!=="public")return s(new Ee(`secretOrPublicKey must be an asymmetric key when using ${u.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{B1(u.alg,p)}catch(f){return s(f)}let x;try{x=D1.verify(r,a.header.alg,p)}catch(f){return s(f)}if(!x)return s(new Ee("invalid signature"));let g=a.payload;if(typeof g.nbf<"u"&&!t.ignoreNotBefore){if(typeof g.nbf!="number")return s(new Ee("invalid nbf value"));if(g.nbf>i+(t.clockTolerance||0))return s(new k1("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!t.ignoreExpiration){if(typeof g.exp!="number")return s(new Ee("invalid exp value"));if(i>=g.exp+(t.clockTolerance||0))return s(new ap("jwt expired",new Date(g.exp*1e3)))}if(t.audience){let f=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(S){return f.some(function(E){return E instanceof RegExp?E.test(S):E===S})}))return s(new Ee("jwt audience invalid. expected: "+f.join(" or ")))}if(t.issuer&&(typeof t.issuer=="string"&&g.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(g.iss)===-1))return s(new Ee("jwt issuer invalid. expected: "+t.issuer));if(t.subject&&g.sub!==t.subject)return s(new Ee("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&g.jti!==t.jwtid)return s(new Ee("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&g.nonce!==t.nonce)return s(new Ee("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof g.iat!="number")return s(new Ee("iat required when maxAge is specified"));let f=M1(t.maxAge,g.iat);if(typeof f>"u")return s(new Ee('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=f+(t.clockTolerance||0))return s(new ap("maxAge exceeded",new Date(f*1e3)))}if(t.complete===!0){let f=a.signature;return s(null,{header:u,payload:g,signature:f})}return s(null,g)})}});var mp=U((o8,pp)=>{var lp=1/0,hp=9007199254740991,K1=17976931348623157e292,fp=NaN,G1="[object Arguments]",W1="[object Function]",H1="[object GeneratorFunction]",Z1="[object String]",J1="[object Symbol]",X1=/^\s+|\s+$/g,Y1=/^[-+]0x[0-9a-f]+$/i,ew=/^0b[01]+$/i,tw=/^0o[0-7]+$/i,rw=/^(?:0|[1-9]\d*)$/,nw=parseInt;function sw(r,e){for(var t=-1,n=r?r.length:0,s=Array(n);++t<n;)s[t]=e(r[t],t,r);return s}function iw(r,e,t,n){for(var s=r.length,i=t+(n?1:-1);n?i--:++i<s;)if(e(r[i],i,r))return i;return-1}function ow(r,e,t){if(e!==e)return iw(r,aw,t);for(var n=t-1,s=r.length;++n<s;)if(r[n]===e)return n;return-1}function aw(r){return r!==r}function cw(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}function uw(r,e){return sw(e,function(t){return r[t]})}function lw(r,e){return function(t){return r(e(t))}}var hi=Object.prototype,bc=hi.hasOwnProperty,di=hi.toString,fw=hi.propertyIsEnumerable,hw=lw(Object.keys,Object),dw=Math.max;function pw(r,e){var t=dp(r)||xw(r)?cw(r.length,String):[],n=t.length,s=!!n;for(var i in r)(e||bc.call(r,i))&&!(s&&(i=="length"||gw(i,n)))&&t.push(i);return t}function mw(r){if(!yw(r))return hw(r);var e=[];for(var t in Object(r))bc.call(r,t)&&t!="constructor"&&e.push(t);return e}function gw(r,e){return e=e??hp,!!e&&(typeof r=="number"||rw.test(r))&&r>-1&&r%1==0&&r<e}function yw(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||hi;return r===t}function bw(r,e,t,n){r=xc(r)?r:Nw(r),t=t&&!n?Cw(t):0;var s=r.length;return t<0&&(t=dw(s+t,0)),_w(r)?t<=s&&r.indexOf(e,t)>-1:!!s&&ow(r,e,t)>-1}function xw(r){return ww(r)&&bc.call(r,"callee")&&(!fw.call(r,"callee")||di.call(r)==G1)}var dp=Array.isArray;function xc(r){return r!=null&&Sw(r.length)&&!vw(r)}function ww(r){return wc(r)&&xc(r)}function vw(r){var e=yc(r)?di.call(r):"";return e==W1||e==H1}function Sw(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=hp}function yc(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function wc(r){return!!r&&typeof r=="object"}function _w(r){return typeof r=="string"||!dp(r)&&wc(r)&&di.call(r)==Z1}function Ew(r){return typeof r=="symbol"||wc(r)&&di.call(r)==J1}function Tw(r){if(!r)return r===0?r:0;if(r=Aw(r),r===lp||r===-lp){var e=r<0?-1:1;return e*K1}return r===r?r:0}function Cw(r){var e=Tw(r),t=e%1;return e===e?t?e-t:e:0}function Aw(r){if(typeof r=="number")return r;if(Ew(r))return fp;if(yc(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=yc(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(X1,"");var t=ew.test(r);return t||tw.test(r)?nw(r.slice(2),t?2:8):Y1.test(r)?fp:+r}function Iw(r){return xc(r)?pw(r):mw(r)}function Nw(r){return r?uw(r,Iw(r)):[]}pp.exports=bw});var yp=U((a8,gp)=>{var Pw="[object Boolean]",Rw=Object.prototype,Ow=Rw.toString;function Lw(r){return r===!0||r===!1||$w(r)&&Ow.call(r)==Pw}function $w(r){return!!r&&typeof r=="object"}gp.exports=Lw});var Sp=U((c8,vp)=>{var bp=1/0,kw=17976931348623157e292,xp=NaN,qw="[object Symbol]",Mw=/^\s+|\s+$/g,Bw=/^[-+]0x[0-9a-f]+$/i,jw=/^0b[01]+$/i,Dw=/^0o[0-7]+$/i,Fw=parseInt,Qw=Object.prototype,Uw=Qw.toString;function Vw(r){return typeof r=="number"&&r==Ww(r)}function wp(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function zw(r){return!!r&&typeof r=="object"}function Kw(r){return typeof r=="symbol"||zw(r)&&Uw.call(r)==qw}function Gw(r){if(!r)return r===0?r:0;if(r=Hw(r),r===bp||r===-bp){var e=r<0?-1:1;return e*kw}return r===r?r:0}function Ww(r){var e=Gw(r),t=e%1;return e===e?t?e-t:e:0}function Hw(r){if(typeof r=="number")return r;if(Kw(r))return xp;if(wp(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=wp(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(Mw,"");var t=jw.test(r);return t||Dw.test(r)?Fw(r.slice(2),t?2:8):Bw.test(r)?xp:+r}vp.exports=Vw});var Ep=U((u8,_p)=>{var Zw="[object Number]",Jw=Object.prototype,Xw=Jw.toString;function Yw(r){return!!r&&typeof r=="object"}function ev(r){return typeof r=="number"||Yw(r)&&Xw.call(r)==Zw}_p.exports=ev});var Ip=U((l8,Ap)=>{var tv="[object Object]";function rv(r){var e=!1;if(r!=null&&typeof r.toString!="function")try{e=!!(r+"")}catch{}return e}function nv(r,e){return function(t){return r(e(t))}}var sv=Function.prototype,Tp=Object.prototype,Cp=sv.toString,iv=Tp.hasOwnProperty,ov=Cp.call(Object),av=Tp.toString,cv=nv(Object.getPrototypeOf,Object);function uv(r){return!!r&&typeof r=="object"}function lv(r){if(!uv(r)||av.call(r)!=tv||rv(r))return!1;var e=cv(r);if(e===null)return!0;var t=iv.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Cp.call(t)==ov}Ap.exports=lv});var Pp=U((f8,Np)=>{var fv="[object String]",hv=Object.prototype,dv=hv.toString,pv=Array.isArray;function mv(r){return!!r&&typeof r=="object"}function gv(r){return typeof r=="string"||!pv(r)&&mv(r)&&dv.call(r)==fv}Np.exports=gv});var kp=U((h8,$p)=>{var yv="Expected a function",Rp=1/0,bv=17976931348623157e292,Op=NaN,xv="[object Symbol]",wv=/^\s+|\s+$/g,vv=/^[-+]0x[0-9a-f]+$/i,Sv=/^0b[01]+$/i,_v=/^0o[0-7]+$/i,Ev=parseInt,Tv=Object.prototype,Cv=Tv.toString;function Av(r,e){var t;if(typeof e!="function")throw new TypeError(yv);return r=Ov(r),function(){return--r>0&&(t=e.apply(this,arguments)),r<=1&&(e=void 0),t}}function Iv(r){return Av(2,r)}function Lp(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function Nv(r){return!!r&&typeof r=="object"}function Pv(r){return typeof r=="symbol"||Nv(r)&&Cv.call(r)==xv}function Rv(r){if(!r)return r===0?r:0;if(r=Lv(r),r===Rp||r===-Rp){var e=r<0?-1:1;return e*bv}return r===r?r:0}function Ov(r){var e=Rv(r),t=e%1;return e===e?t?e-t:e:0}function Lv(r){if(typeof r=="number")return r;if(Pv(r))return Op;if(Lp(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Lp(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(wv,"");var t=Sv.test(r);return t||_v.test(r)?Ev(r.slice(2),t?2:8):vv.test(r)?Op:+r}$p.exports=Iv});var Vp=U((d8,Up)=>{var qp=Wa(),$v=pc(),kv=dc(),Mp=Ws(),qv=mp(),pi=yp(),Bp=Sp(),vc=Ep(),Dp=Ip(),Wt=Pp(),Mv=kp(),{KeyObject:Bv,createSecretKey:jv,createPrivateKey:Dv}=require("crypto"),Fp=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];$v&&Fp.splice(3,0,"PS256","PS384","PS512");var Fv={expiresIn:{isValid:function(r){return Bp(r)||Wt(r)&&r},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(r){return Bp(r)||Wt(r)&&r},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(r){return Wt(r)||Array.isArray(r)},message:'"audience" must be a string or array'},algorithm:{isValid:qv.bind(null,Fp),message:'"algorithm" must be a valid string enum value'},header:{isValid:Dp,message:'"header" must be an object'},encoding:{isValid:Wt,message:'"encoding" must be a string'},issuer:{isValid:Wt,message:'"issuer" must be a string'},subject:{isValid:Wt,message:'"subject" must be a string'},jwtid:{isValid:Wt,message:'"jwtid" must be a string'},noTimestamp:{isValid:pi,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Wt,message:'"keyid" must be a string'},mutatePayload:{isValid:pi,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:pi,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:pi,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},Qv={iat:{isValid:vc,message:'"iat" should be a number of seconds'},exp:{isValid:vc,message:'"exp" should be a number of seconds'},nbf:{isValid:vc,message:'"nbf" should be a number of seconds'}};function Qp(r,e,t,n){if(!Dp(t))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(t).forEach(function(s){let i=r[s];if(!i){if(!e)throw new Error('"'+s+'" is not allowed in "'+n+'"');return}if(!i.isValid(t[s]))throw new Error(i.message)})}function Uv(r){return Qp(Fv,!1,r,"options")}function Vv(r){return Qp(Qv,!0,r,"payload")}var jp={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},zv=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];Up.exports=function(r,e,t,n){typeof t=="function"?(n=t,t={}):t=t||{};let s=typeof r=="object"&&!Buffer.isBuffer(r),i=Object.assign({alg:t.algorithm||"HS256",typ:s?"JWT":void 0,kid:t.keyid},t.header);function o(h){if(n)return n(h);throw h}if(!e&&t.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof Bv))try{e=Dv(e)}catch{try{e=jv(typeof e=="string"?Buffer.from(e):e)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(i.alg.startsWith("HS")&&e.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${i.alg}`));if(/^(?:RS|PS|ES)/.test(i.alg)){if(e.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${i.alg}`));if(!t.allowInsecureKeySizes&&!i.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`))}if(typeof r>"u")return o(new Error("payload is required"));if(s){try{Vv(r)}catch(h){return o(h)}t.mutatePayload||(r=Object.assign({},r))}else{let h=zv.filter(function(l){return typeof t[l]<"u"});if(h.length>0)return o(new Error("invalid "+h.join(",")+" option for "+typeof r+" payload"))}if(typeof r.exp<"u"&&typeof t.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof r.nbf<"u"&&typeof t.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{Uv(t)}catch(h){return o(h)}if(!t.allowInvalidAsymmetricKeyTypes)try{kv(i.alg,e)}catch(h){return o(h)}let a=r.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete r.iat:s&&(r.iat=a),typeof t.notBefore<"u"){try{r.nbf=qp(t.notBefore,a)}catch(h){return o(h)}if(typeof r.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn<"u"&&typeof r=="object"){try{r.exp=qp(t.expiresIn,a)}catch(h){return o(h)}if(typeof r.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(jp).forEach(function(h){let l=jp[h];if(typeof t[h]<"u"){if(typeof r[l]<"u")return o(new Error('Bad "options.'+h+'" option. The payload already has an "'+l+'" property.'));r[l]=t[h]}});let u=t.encoding||"utf8";if(typeof n=="function")n=n&&Mv(n),Mp.createSign({header:i,privateKey:e,payload:r,encoding:u}).once("error",n).once("done",function(h){if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&h.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`));n(null,h)});else{let h=Mp.sign({header:i,payload:r,secret:e,encoding:u});if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&h.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`);return h}}});var Kp=U((p8,zp)=>{zp.exports={decode:za(),verify:up(),sign:Vp(),JsonWebTokenError:Bn(),NotBeforeError:Ka(),TokenExpiredError:Ga()}});var Wv={};tm(Wv,{handler:()=>Gv});module.exports=rm(Wv);var nm=Object.create,Er=Object.defineProperty,sm=Object.getOwnPropertyDescriptor,im=Object.getOwnPropertyNames,om=Object.getPrototypeOf,am=Object.prototype.hasOwnProperty,cm=(r,e,t)=>e in r?Er(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b=(r,e)=>Er(r,"name",{value:e,configurable:!0}),He=(r,e)=>()=>(r&&(e=r(r=0)),e),de=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ht=(r,e)=>{for(var t in e)Er(r,t,{get:e[t],enumerable:!0})},Lc=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of im(e))!am.call(r,s)&&s!==t&&Er(r,s,{get:()=>e[s],enumerable:!(n=sm(e,s))||n.enumerable});return r},Tr=(r,e,t)=>(t=r!=null?nm(om(r)):{},Lc(e||!r||!r.__esModule?Er(t,"default",{value:r,enumerable:!0}):t,r)),Me=r=>Lc(Er({},"__esModule",{value:!0}),r),ae=(r,e,t)=>cm(r,typeof e!="symbol"?e+"":e,t),um=de(r=>{"use strict";te(),r.byteLength=u,r.toByteArray=l,r.fromByteArray=x;var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,o=s.length;i<o;++i)e[i]=s[i],t[s.charCodeAt(i)]=i;var i,o;t[45]=62,t[95]=63;function a(g){var f=g.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=g.indexOf("=");w===-1&&(w=f);var v=w===f?0:4-w%4;return[w,v]}b(a,"getLens");function u(g){var f=a(g),w=f[0],v=f[1];return(w+v)*3/4-v}b(u,"byteLength");function h(g,f,w){return(f+w)*3/4-w}b(h,"_byteLength");function l(g){var f,w=a(g),v=w[0],S=w[1],E=new n(h(g,v,S)),O=0,L=S>0?v-4:v,_;for(_=0;_<L;_+=4)f=t[g.charCodeAt(_)]<<18|t[g.charCodeAt(_+1)]<<12|t[g.charCodeAt(_+2)]<<6|t[g.charCodeAt(_+3)],E[O++]=f>>16&255,E[O++]=f>>8&255,E[O++]=f&255;return S===2&&(f=t[g.charCodeAt(_)]<<2|t[g.charCodeAt(_+1)]>>4,E[O++]=f&255),S===1&&(f=t[g.charCodeAt(_)]<<10|t[g.charCodeAt(_+1)]<<4|t[g.charCodeAt(_+2)]>>2,E[O++]=f>>8&255,E[O++]=f&255),E}b(l,"toByteArray");function p(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}b(p,"tripletToBase64");function y(g,f,w){for(var v,S=[],E=f;E<w;E+=3)v=(g[E]<<16&16711680)+(g[E+1]<<8&65280)+(g[E+2]&255),S.push(p(v));return S.join("")}b(y,"encodeChunk");function x(g){for(var f,w=g.length,v=w%3,S=[],E=16383,O=0,L=w-v;O<L;O+=E)S.push(y(g,O,O+E>L?L:O+E));return v===1?(f=g[w-1],S.push(e[f>>2]+e[f<<4&63]+"==")):v===2&&(f=(g[w-2]<<8)+g[w-1],S.push(e[f>>10]+e[f>>4&63]+e[f<<2&63]+"=")),S.join("")}b(x,"fromByteArray")}),lm=de(r=>{te(),r.read=function(e,t,n,s,i){var o,a,u=i*8-s-1,h=(1<<u)-1,l=h>>1,p=-7,y=n?i-1:0,x=n?-1:1,g=e[t+y];for(y+=x,o=g&(1<<-p)-1,g>>=-p,p+=u;p>0;o=o*256+e[t+y],y+=x,p-=8);for(a=o&(1<<-p)-1,o>>=-p,p+=s;p>0;a=a*256+e[t+y],y+=x,p-=8);if(o===0)o=1-l;else{if(o===h)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,s),o=o-l}return(g?-1:1)*a*Math.pow(2,o-s)},r.write=function(e,t,n,s,i,o){var a,u,h,l=o*8-i-1,p=(1<<l)-1,y=p>>1,x=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=s?0:o-1,f=s?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=p):(a=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+y>=1?t+=x/h:t+=x*Math.pow(2,1-y),t*h>=2&&(a++,h/=2),a+y>=p?(u=0,a=p):a+y>=1?(u=(t*h-1)*Math.pow(2,i),a=a+y):(u=t*Math.pow(2,y-1)*Math.pow(2,i),a=0));i>=8;e[n+g]=u&255,g+=f,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;e[n+g]=a&255,g+=f,a/=256,l-=8);e[n+g-f]|=w*128}}),fm=de(r=>{"use strict";te();var e=um(),t=lm(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=S,r.INSPECT_MAX_BYTES=50;var s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let c=new Uint8Array(1),d={foo:b(function(){return 42},"foo")};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(c,d),c.foo()===42}catch{return!1}}b(i,"typedArraySupport"),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:b(function(){if(a.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:b(function(){if(a.isBuffer(this))return this.byteOffset},"get")});function o(c){if(c>s)throw new RangeError('The value "'+c+'" is invalid for option "size"');let d=new Uint8Array(c);return Object.setPrototypeOf(d,a.prototype),d}b(o,"createBuffer");function a(c,d,m){if(typeof c=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(c)}return u(c,d,m)}b(a,"Buffer"),a.poolSize=8192;function u(c,d,m){if(typeof c=="string")return y(c,d);if(ArrayBuffer.isView(c))return g(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(ft(c,ArrayBuffer)||c&&ft(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ft(c,SharedArrayBuffer)||c&&ft(c.buffer,SharedArrayBuffer)))return f(c,d,m);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let A=c.valueOf&&c.valueOf();if(A!=null&&A!==c)return a.from(A,d,m);let R=w(c);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return a.from(c[Symbol.toPrimitive]("string"),d,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}b(u,"from"),a.from=function(c,d,m){return u(c,d,m)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}b(h,"assertSize");function l(c,d,m){return h(c),c<=0?o(c):d!==void 0?typeof m=="string"?o(c).fill(d,m):o(c).fill(d):o(c)}b(l,"alloc"),a.alloc=function(c,d,m){return l(c,d,m)};function p(c){return h(c),o(c<0?0:v(c)|0)}b(p,"allocUnsafe"),a.allocUnsafe=function(c){return p(c)},a.allocUnsafeSlow=function(c){return p(c)};function y(c,d){if((typeof d!="string"||d==="")&&(d="utf8"),!a.isEncoding(d))throw new TypeError("Unknown encoding: "+d);let m=E(c,d)|0,A=o(m),R=A.write(c,d);return R!==m&&(A=A.slice(0,R)),A}b(y,"fromString");function x(c){let d=c.length<0?0:v(c.length)|0,m=o(d);for(let A=0;A<d;A+=1)m[A]=c[A]&255;return m}b(x,"fromArrayLike");function g(c){if(ft(c,Uint8Array)){let d=new Uint8Array(c);return f(d.buffer,d.byteOffset,d.byteLength)}return x(c)}b(g,"fromArrayView");function f(c,d,m){if(d<0||c.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<d+(m||0))throw new RangeError('"length" is outside of buffer bounds');let A;return d===void 0&&m===void 0?A=new Uint8Array(c):m===void 0?A=new Uint8Array(c,d):A=new Uint8Array(c,d,m),Object.setPrototypeOf(A,a.prototype),A}b(f,"fromArrayBuffer");function w(c){if(a.isBuffer(c)){let d=v(c.length)|0,m=o(d);return m.length===0||c.copy(m,0,0,d),m}if(c.length!==void 0)return typeof c.length!="number"||Wn(c.length)?o(0):x(c);if(c.type==="Buffer"&&Array.isArray(c.data))return x(c.data)}b(w,"fromObject");function v(c){if(c>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return c|0}b(v,"checked");function S(c){return+c!=c&&(c=0),a.alloc(+c)}b(S,"SlowBuffer"),a.isBuffer=b(function(c){return c!=null&&c._isBuffer===!0&&c!==a.prototype},"isBuffer"),a.compare=b(function(c,d){if(ft(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),ft(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(c)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===d)return 0;let m=c.length,A=d.length;for(let R=0,B=Math.min(m,A);R<B;++R)if(c[R]!==d[R]){m=c[R],A=d[R];break}return m<A?-1:A<m?1:0},"compare"),a.isEncoding=b(function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),a.concat=b(function(c,d){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return a.alloc(0);let m;if(d===void 0)for(d=0,m=0;m<c.length;++m)d+=c[m].length;let A=a.allocUnsafe(d),R=0;for(m=0;m<c.length;++m){let B=c[m];if(ft(B,Uint8Array))R+B.length>A.length?(a.isBuffer(B)||(B=a.from(B)),B.copy(A,R)):Uint8Array.prototype.set.call(A,B,R);else if(a.isBuffer(B))B.copy(A,R);else throw new TypeError('"list" argument must be an Array of Buffers');R+=B.length}return A},"concat");function E(c,d){if(a.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||ft(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);let m=c.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&m===0)return 0;let R=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return Gn(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return wi(c).length;default:if(R)return A?-1:Gn(c).length;d=(""+d).toLowerCase(),R=!0}}b(E,"byteLength"),a.byteLength=E;function O(c,d,m){let A=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,d>>>=0,m<=d))return"";for(c||(c="utf8");;)switch(c){case"hex":return be(this,d,m);case"utf8":case"utf-8":return $(this,d,m);case"ascii":return ce(this,d,m);case"latin1":case"binary":return ge(this,d,m);case"base64":return J(this,d,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,d,m);default:if(A)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),A=!0}}b(O,"slowToString"),a.prototype._isBuffer=!0;function L(c,d,m){let A=c[d];c[d]=c[m],c[m]=A}b(L,"swap"),a.prototype.swap16=b(function(){let c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<c;d+=2)L(this,d,d+1);return this},"swap16"),a.prototype.swap32=b(function(){let c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<c;d+=4)L(this,d,d+3),L(this,d+1,d+2);return this},"swap32"),a.prototype.swap64=b(function(){let c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<c;d+=8)L(this,d,d+7),L(this,d+1,d+6),L(this,d+2,d+5),L(this,d+3,d+4);return this},"swap64"),a.prototype.toString=b(function(){let c=this.length;return c===0?"":arguments.length===0?$(this,0,c):O.apply(this,arguments)},"toString"),a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=b(function(c){if(!a.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:a.compare(this,c)===0},"equals"),a.prototype.inspect=b(function(){let c="",d=r.INSPECT_MAX_BYTES;return c=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(c+=" ... "),"<Buffer "+c+">"},"inspect"),n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=b(function(c,d,m,A,R){if(ft(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),!a.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(d===void 0&&(d=0),m===void 0&&(m=c?c.length:0),A===void 0&&(A=0),R===void 0&&(R=this.length),d<0||m>c.length||A<0||R>this.length)throw new RangeError("out of range index");if(A>=R&&d>=m)return 0;if(A>=R)return-1;if(d>=m)return 1;if(d>>>=0,m>>>=0,A>>>=0,R>>>=0,this===c)return 0;let B=R-A,D=m-d,Se=Math.min(B,D),qe=this.slice(A,R),Ce=c.slice(d,m);for(let _e=0;_e<Se;++_e)if(qe[_e]!==Ce[_e]){B=qe[_e],D=Ce[_e];break}return B<D?-1:D<B?1:0},"compare");function _(c,d,m,A,R){if(c.length===0)return-1;if(typeof m=="string"?(A=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,Wn(m)&&(m=R?0:c.length-1),m<0&&(m=c.length+m),m>=c.length){if(R)return-1;m=c.length-1}else if(m<0)if(R)m=0;else return-1;if(typeof d=="string"&&(d=a.from(d,A)),a.isBuffer(d))return d.length===0?-1:P(c,d,m,A,R);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(c,d,m):Uint8Array.prototype.lastIndexOf.call(c,d,m):P(c,[d],m,A,R);throw new TypeError("val must be string, number or Buffer")}b(_,"bidirectionalIndexOf");function P(c,d,m,A,R){let B=1,D=c.length,Se=d.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(c.length<2||d.length<2)return-1;B=2,D/=2,Se/=2,m/=2}function qe(_e,Re){return B===1?_e[Re]:_e.readUInt16BE(Re*B)}b(qe,"read");let Ce;if(R){let _e=-1;for(Ce=m;Ce<D;Ce++)if(qe(c,Ce)===qe(d,_e===-1?0:Ce-_e)){if(_e===-1&&(_e=Ce),Ce-_e+1===Se)return _e*B}else _e!==-1&&(Ce-=Ce-_e),_e=-1}else for(m+Se>D&&(m=D-Se),Ce=m;Ce>=0;Ce--){let _e=!0;for(let Re=0;Re<Se;Re++)if(qe(c,Ce+Re)!==qe(d,Re)){_e=!1;break}if(_e)return Ce}return-1}b(P,"arrayIndexOf"),a.prototype.includes=b(function(c,d,m){return this.indexOf(c,d,m)!==-1},"includes"),a.prototype.indexOf=b(function(c,d,m){return _(this,c,d,m,!0)},"indexOf"),a.prototype.lastIndexOf=b(function(c,d,m){return _(this,c,d,m,!1)},"lastIndexOf");function N(c,d,m,A){m=Number(m)||0;let R=c.length-m;A?(A=Number(A),A>R&&(A=R)):A=R;let B=d.length;A>B/2&&(A=B/2);let D;for(D=0;D<A;++D){let Se=parseInt(d.substr(D*2,2),16);if(Wn(Se))return D;c[m+D]=Se}return D}b(N,"hexWrite");function C(c,d,m,A){return tn(Gn(d,c.length-m),c,m,A)}b(C,"utf8Write");function M(c,d,m,A){return tn(Tc(d),c,m,A)}b(M,"asciiWrite");function k(c,d,m,A){return tn(wi(d),c,m,A)}b(k,"base64Write");function Z(c,d,m,A){return tn(Cc(d,c.length-m),c,m,A)}b(Z,"ucs2Write"),a.prototype.write=b(function(c,d,m,A){if(d===void 0)A="utf8",m=this.length,d=0;else if(m===void 0&&typeof d=="string")A=d,m=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(m)?(m=m>>>0,A===void 0&&(A="utf8")):(A=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let R=this.length-d;if((m===void 0||m>R)&&(m=R),c.length>0&&(m<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let B=!1;for(;;)switch(A){case"hex":return N(this,c,d,m);case"utf8":case"utf-8":return C(this,c,d,m);case"ascii":case"latin1":case"binary":return M(this,c,d,m);case"base64":return k(this,c,d,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,c,d,m);default:if(B)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),B=!0}},"write"),a.prototype.toJSON=b(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function J(c,d,m){return d===0&&m===c.length?e.fromByteArray(c):e.fromByteArray(c.slice(d,m))}b(J,"base64Slice");function $(c,d,m){m=Math.min(c.length,m);let A=[],R=d;for(;R<m;){let B=c[R],D=null,Se=B>239?4:B>223?3:B>191?2:1;if(R+Se<=m){let qe,Ce,_e,Re;switch(Se){case 1:B<128&&(D=B);break;case 2:qe=c[R+1],(qe&192)===128&&(Re=(B&31)<<6|qe&63,Re>127&&(D=Re));break;case 3:qe=c[R+1],Ce=c[R+2],(qe&192)===128&&(Ce&192)===128&&(Re=(B&15)<<12|(qe&63)<<6|Ce&63,Re>2047&&(Re<55296||Re>57343)&&(D=Re));break;case 4:qe=c[R+1],Ce=c[R+2],_e=c[R+3],(qe&192)===128&&(Ce&192)===128&&(_e&192)===128&&(Re=(B&15)<<18|(qe&63)<<12|(Ce&63)<<6|_e&63,Re>65535&&Re<1114112&&(D=Re))}}D===null?(D=65533,Se=1):D>65535&&(D-=65536,A.push(D>>>10&1023|55296),D=56320|D&1023),A.push(D),R+=Se}return ee(A)}b($,"utf8Slice");var Q=4096;function ee(c){let d=c.length;if(d<=Q)return String.fromCharCode.apply(String,c);let m="",A=0;for(;A<d;)m+=String.fromCharCode.apply(String,c.slice(A,A+=Q));return m}b(ee,"decodeCodePointsArray");function ce(c,d,m){let A="";m=Math.min(c.length,m);for(let R=d;R<m;++R)A+=String.fromCharCode(c[R]&127);return A}b(ce,"asciiSlice");function ge(c,d,m){let A="";m=Math.min(c.length,m);for(let R=d;R<m;++R)A+=String.fromCharCode(c[R]);return A}b(ge,"latin1Slice");function be(c,d,m){let A=c.length;(!d||d<0)&&(d=0),(!m||m<0||m>A)&&(m=A);let R="";for(let B=d;B<m;++B)R+=Hp[c[B]];return R}b(be,"hexSlice");function ke(c,d,m){let A=c.slice(d,m),R="";for(let B=0;B<A.length-1;B+=2)R+=String.fromCharCode(A[B]+A[B+1]*256);return R}b(ke,"utf16leSlice"),a.prototype.slice=b(function(c,d){let m=this.length;c=~~c,d=d===void 0?m:~~d,c<0?(c+=m,c<0&&(c=0)):c>m&&(c=m),d<0?(d+=m,d<0&&(d=0)):d>m&&(d=m),d<c&&(d=c);let A=this.subarray(c,d);return Object.setPrototypeOf(A,a.prototype),A},"slice");function ve(c,d,m){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+d>m)throw new RangeError("Trying to access beyond buffer length")}b(ve,"checkOffset"),a.prototype.readUintLE=a.prototype.readUIntLE=b(function(c,d,m){c=c>>>0,d=d>>>0,m||ve(c,d,this.length);let A=this[c],R=1,B=0;for(;++B<d&&(R*=256);)A+=this[c+B]*R;return A},"readUIntLE"),a.prototype.readUintBE=a.prototype.readUIntBE=b(function(c,d,m){c=c>>>0,d=d>>>0,m||ve(c,d,this.length);let A=this[c+--d],R=1;for(;d>0&&(R*=256);)A+=this[c+--d]*R;return A},"readUIntBE"),a.prototype.readUint8=a.prototype.readUInt8=b(function(c,d){return c=c>>>0,d||ve(c,1,this.length),this[c]},"readUInt8"),a.prototype.readUint16LE=a.prototype.readUInt16LE=b(function(c,d){return c=c>>>0,d||ve(c,2,this.length),this[c]|this[c+1]<<8},"readUInt16LE"),a.prototype.readUint16BE=a.prototype.readUInt16BE=b(function(c,d){return c=c>>>0,d||ve(c,2,this.length),this[c]<<8|this[c+1]},"readUInt16BE"),a.prototype.readUint32LE=a.prototype.readUInt32LE=b(function(c,d){return c=c>>>0,d||ve(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},"readUInt32LE"),a.prototype.readUint32BE=a.prototype.readUInt32BE=b(function(c,d){return c=c>>>0,d||ve(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},"readUInt32BE"),a.prototype.readBigUInt64LE=Ct(b(function(c){c=c>>>0,Zt(c,"offset");let d=this[c],m=this[c+7];(d===void 0||m===void 0)&&Sr(c,this.length-8);let A=d+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,R=this[++c]+this[++c]*2**8+this[++c]*2**16+m*2**24;return BigInt(A)+(BigInt(R)<<BigInt(32))},"readBigUInt64LE")),a.prototype.readBigUInt64BE=Ct(b(function(c){c=c>>>0,Zt(c,"offset");let d=this[c],m=this[c+7];(d===void 0||m===void 0)&&Sr(c,this.length-8);let A=d*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],R=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+m;return(BigInt(A)<<BigInt(32))+BigInt(R)},"readBigUInt64BE")),a.prototype.readIntLE=b(function(c,d,m){c=c>>>0,d=d>>>0,m||ve(c,d,this.length);let A=this[c],R=1,B=0;for(;++B<d&&(R*=256);)A+=this[c+B]*R;return R*=128,A>=R&&(A-=Math.pow(2,8*d)),A},"readIntLE"),a.prototype.readIntBE=b(function(c,d,m){c=c>>>0,d=d>>>0,m||ve(c,d,this.length);let A=d,R=1,B=this[c+--A];for(;A>0&&(R*=256);)B+=this[c+--A]*R;return R*=128,B>=R&&(B-=Math.pow(2,8*d)),B},"readIntBE"),a.prototype.readInt8=b(function(c,d){return c=c>>>0,d||ve(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},"readInt8"),a.prototype.readInt16LE=b(function(c,d){c=c>>>0,d||ve(c,2,this.length);let m=this[c]|this[c+1]<<8;return m&32768?m|4294901760:m},"readInt16LE"),a.prototype.readInt16BE=b(function(c,d){c=c>>>0,d||ve(c,2,this.length);let m=this[c+1]|this[c]<<8;return m&32768?m|4294901760:m},"readInt16BE"),a.prototype.readInt32LE=b(function(c,d){return c=c>>>0,d||ve(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},"readInt32LE"),a.prototype.readInt32BE=b(function(c,d){return c=c>>>0,d||ve(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},"readInt32BE"),a.prototype.readBigInt64LE=Ct(b(function(c){c=c>>>0,Zt(c,"offset");let d=this[c],m=this[c+7];(d===void 0||m===void 0)&&Sr(c,this.length-8);let A=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(m<<24);return(BigInt(A)<<BigInt(32))+BigInt(d+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)},"readBigInt64LE")),a.prototype.readBigInt64BE=Ct(b(function(c){c=c>>>0,Zt(c,"offset");let d=this[c],m=this[c+7];(d===void 0||m===void 0)&&Sr(c,this.length-8);let A=(d<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(A)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+m)},"readBigInt64BE")),a.prototype.readFloatLE=b(function(c,d){return c=c>>>0,d||ve(c,4,this.length),t.read(this,c,!0,23,4)},"readFloatLE"),a.prototype.readFloatBE=b(function(c,d){return c=c>>>0,d||ve(c,4,this.length),t.read(this,c,!1,23,4)},"readFloatBE"),a.prototype.readDoubleLE=b(function(c,d){return c=c>>>0,d||ve(c,8,this.length),t.read(this,c,!0,52,8)},"readDoubleLE"),a.prototype.readDoubleBE=b(function(c,d){return c=c>>>0,d||ve(c,8,this.length),t.read(this,c,!1,52,8)},"readDoubleBE");function Ae(c,d,m,A,R,B){if(!a.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>R||d<B)throw new RangeError('"value" argument is out of bounds');if(m+A>c.length)throw new RangeError("Index out of range")}b(Ae,"checkInt"),a.prototype.writeUintLE=a.prototype.writeUIntLE=b(function(c,d,m,A){if(c=+c,d=d>>>0,m=m>>>0,!A){let D=Math.pow(2,8*m)-1;Ae(this,c,d,m,D,0)}let R=1,B=0;for(this[d]=c&255;++B<m&&(R*=256);)this[d+B]=c/R&255;return d+m},"writeUIntLE"),a.prototype.writeUintBE=a.prototype.writeUIntBE=b(function(c,d,m,A){if(c=+c,d=d>>>0,m=m>>>0,!A){let D=Math.pow(2,8*m)-1;Ae(this,c,d,m,D,0)}let R=m-1,B=1;for(this[d+R]=c&255;--R>=0&&(B*=256);)this[d+R]=c/B&255;return d+m},"writeUIntBE"),a.prototype.writeUint8=a.prototype.writeUInt8=b(function(c,d,m){return c=+c,d=d>>>0,m||Ae(this,c,d,1,255,0),this[d]=c&255,d+1},"writeUInt8"),a.prototype.writeUint16LE=a.prototype.writeUInt16LE=b(function(c,d,m){return c=+c,d=d>>>0,m||Ae(this,c,d,2,65535,0),this[d]=c&255,this[d+1]=c>>>8,d+2},"writeUInt16LE"),a.prototype.writeUint16BE=a.prototype.writeUInt16BE=b(function(c,d,m){return c=+c,d=d>>>0,m||Ae(this,c,d,2,65535,0),this[d]=c>>>8,this[d+1]=c&255,d+2},"writeUInt16BE"),a.prototype.writeUint32LE=a.prototype.writeUInt32LE=b(function(c,d,m){return c=+c,d=d>>>0,m||Ae(this,c,d,4,4294967295,0),this[d+3]=c>>>24,this[d+2]=c>>>16,this[d+1]=c>>>8,this[d]=c&255,d+4},"writeUInt32LE"),a.prototype.writeUint32BE=a.prototype.writeUInt32BE=b(function(c,d,m){return c=+c,d=d>>>0,m||Ae(this,c,d,4,4294967295,0),this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255,d+4},"writeUInt32BE");function Ht(c,d,m,A,R){xi(d,A,R,c,m,7);let B=Number(d&BigInt(4294967295));c[m++]=B,B=B>>8,c[m++]=B,B=B>>8,c[m++]=B,B=B>>8,c[m++]=B;let D=Number(d>>BigInt(32)&BigInt(4294967295));return c[m++]=D,D=D>>8,c[m++]=D,D=D>>8,c[m++]=D,D=D>>8,c[m++]=D,m}b(Ht,"wrtBigUInt64LE");function Yr(c,d,m,A,R){xi(d,A,R,c,m,7);let B=Number(d&BigInt(4294967295));c[m+7]=B,B=B>>8,c[m+6]=B,B=B>>8,c[m+5]=B,B=B>>8,c[m+4]=B;let D=Number(d>>BigInt(32)&BigInt(4294967295));return c[m+3]=D,D=D>>8,c[m+2]=D,D=D>>8,c[m+1]=D,D=D>>8,c[m]=D,m+8}b(Yr,"wrtBigUInt64BE"),a.prototype.writeBigUInt64LE=Ct(b(function(c,d=0){return Ht(this,c,d,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),a.prototype.writeBigUInt64BE=Ct(b(function(c,d=0){return Yr(this,c,d,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),a.prototype.writeIntLE=b(function(c,d,m,A){if(c=+c,d=d>>>0,!A){let Se=Math.pow(2,8*m-1);Ae(this,c,d,m,Se-1,-Se)}let R=0,B=1,D=0;for(this[d]=c&255;++R<m&&(B*=256);)c<0&&D===0&&this[d+R-1]!==0&&(D=1),this[d+R]=(c/B>>0)-D&255;return d+m},"writeIntLE"),a.prototype.writeIntBE=b(function(c,d,m,A){if(c=+c,d=d>>>0,!A){let Se=Math.pow(2,8*m-1);Ae(this,c,d,m,Se-1,-Se)}let R=m-1,B=1,D=0;for(this[d+R]=c&255;--R>=0&&(B*=256);)c<0&&D===0&&this[d+R+1]!==0&&(D=1),this[d+R]=(c/B>>0)-D&255;return d+m},"writeIntBE"),a.prototype.writeInt8=b(function(c,d,m){return c=+c,d=d>>>0,m||Ae(this,c,d,1,127,-128),c<0&&(c=255+c+1),this[d]=c&255,d+1},"writeInt8"),a.prototype.writeInt16LE=b(function(c,d,m){return c=+c,d=d>>>0,m||Ae(this,c,d,2,32767,-32768),this[d]=c&255,this[d+1]=c>>>8,d+2},"writeInt16LE"),a.prototype.writeInt16BE=b(function(c,d,m){return c=+c,d=d>>>0,m||Ae(this,c,d,2,32767,-32768),this[d]=c>>>8,this[d+1]=c&255,d+2},"writeInt16BE"),a.prototype.writeInt32LE=b(function(c,d,m){return c=+c,d=d>>>0,m||Ae(this,c,d,4,2147483647,-2147483648),this[d]=c&255,this[d+1]=c>>>8,this[d+2]=c>>>16,this[d+3]=c>>>24,d+4},"writeInt32LE"),a.prototype.writeInt32BE=b(function(c,d,m){return c=+c,d=d>>>0,m||Ae(this,c,d,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c&255,d+4},"writeInt32BE"),a.prototype.writeBigInt64LE=Ct(b(function(c,d=0){return Ht(this,c,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),a.prototype.writeBigInt64BE=Ct(b(function(c,d=0){return Yr(this,c,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function en(c,d,m,A,R,B){if(m+A>c.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}b(en,"checkIEEE754");function gi(c,d,m,A,R){return d=+d,m=m>>>0,R||en(c,d,m,4,34028234663852886e22,-34028234663852886e22),t.write(c,d,m,A,23,4),m+4}b(gi,"writeFloat"),a.prototype.writeFloatLE=b(function(c,d,m){return gi(this,c,d,!0,m)},"writeFloatLE"),a.prototype.writeFloatBE=b(function(c,d,m){return gi(this,c,d,!1,m)},"writeFloatBE");function yi(c,d,m,A,R){return d=+d,m=m>>>0,R||en(c,d,m,8,17976931348623157e292,-17976931348623157e292),t.write(c,d,m,A,52,8),m+8}b(yi,"writeDouble"),a.prototype.writeDoubleLE=b(function(c,d,m){return yi(this,c,d,!0,m)},"writeDoubleLE"),a.prototype.writeDoubleBE=b(function(c,d,m){return yi(this,c,d,!1,m)},"writeDoubleBE"),a.prototype.copy=b(function(c,d,m,A){if(!a.isBuffer(c))throw new TypeError("argument should be a Buffer");if(m||(m=0),!A&&A!==0&&(A=this.length),d>=c.length&&(d=c.length),d||(d=0),A>0&&A<m&&(A=m),A===m||c.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),c.length-d<A-m&&(A=c.length-d+m);let R=A-m;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,m,A):Uint8Array.prototype.set.call(c,this.subarray(m,A),d),R},"copy"),a.prototype.fill=b(function(c,d,m,A){if(typeof c=="string"){if(typeof d=="string"?(A=d,d=0,m=this.length):typeof m=="string"&&(A=m,m=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(c.length===1){let B=c.charCodeAt(0);(A==="utf8"&&B<128||A==="latin1")&&(c=B)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(d<0||this.length<d||this.length<m)throw new RangeError("Out of range index");if(m<=d)return this;d=d>>>0,m=m===void 0?this.length:m>>>0,c||(c=0);let R;if(typeof c=="number")for(R=d;R<m;++R)this[R]=c;else{let B=a.isBuffer(c)?c:a.from(c,A),D=B.length;if(D===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(R=0;R<m-d;++R)this[R+d]=B[R%D]}return this},"fill");var vr={};function Kn(c,d,m){var A;vr[c]=(A=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(R){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:R,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}},b(A,"NodeError"),A)}b(Kn,"E"),Kn("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Kn("ERR_INVALID_ARG_TYPE",function(c,d){return`The "${c}" argument must be of type number. Received type ${typeof d}`},TypeError),Kn("ERR_OUT_OF_RANGE",function(c,d,m){let A=`The value of "${c}" is out of range.`,R=m;return Number.isInteger(m)&&Math.abs(m)>2**32?R=bi(String(m)):typeof m=="bigint"&&(R=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(R=bi(R)),R+="n"),A+=` It must be ${d}. Received ${R}`,A},RangeError);function bi(c){let d="",m=c.length,A=c[0]==="-"?1:0;for(;m>=A+4;m-=3)d=`_${c.slice(m-3,m)}${d}`;return`${c.slice(0,m)}${d}`}b(bi,"addNumericalSeparator");function _c(c,d,m){Zt(d,"offset"),(c[d]===void 0||c[d+m]===void 0)&&Sr(d,c.length-(m+1))}b(_c,"checkBounds");function xi(c,d,m,A,R,B){if(c>m||c<d){let D=typeof d=="bigint"?"n":"",Se;throw B>3?d===0||d===BigInt(0)?Se=`>= 0${D} and < 2${D} ** ${(B+1)*8}${D}`:Se=`>= -(2${D} ** ${(B+1)*8-1}${D}) and < 2 ** ${(B+1)*8-1}${D}`:Se=`>= ${d}${D} and <= ${m}${D}`,new vr.ERR_OUT_OF_RANGE("value",Se,c)}_c(A,R,B)}b(xi,"checkIntBI");function Zt(c,d){if(typeof c!="number")throw new vr.ERR_INVALID_ARG_TYPE(d,"number",c)}b(Zt,"validateNumber");function Sr(c,d,m){throw Math.floor(c)!==c?(Zt(c,m),new vr.ERR_OUT_OF_RANGE(m||"offset","an integer",c)):d<0?new vr.ERR_BUFFER_OUT_OF_BOUNDS:new vr.ERR_OUT_OF_RANGE(m||"offset",`>= ${m?1:0} and <= ${d}`,c)}b(Sr,"boundsError");var Wp=/[^+/0-9A-Za-z-_]/g;function Ec(c){if(c=c.split("=")[0],c=c.trim().replace(Wp,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}b(Ec,"base64clean");function Gn(c,d){d=d||1/0;let m,A=c.length,R=null,B=[];for(let D=0;D<A;++D){if(m=c.charCodeAt(D),m>55295&&m<57344){if(!R){if(m>56319){(d-=3)>-1&&B.push(239,191,189);continue}else if(D+1===A){(d-=3)>-1&&B.push(239,191,189);continue}R=m;continue}if(m<56320){(d-=3)>-1&&B.push(239,191,189),R=m;continue}m=(R-55296<<10|m-56320)+65536}else R&&(d-=3)>-1&&B.push(239,191,189);if(R=null,m<128){if((d-=1)<0)break;B.push(m)}else if(m<2048){if((d-=2)<0)break;B.push(m>>6|192,m&63|128)}else if(m<65536){if((d-=3)<0)break;B.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((d-=4)<0)break;B.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return B}b(Gn,"utf8ToBytes");function Tc(c){let d=[];for(let m=0;m<c.length;++m)d.push(c.charCodeAt(m)&255);return d}b(Tc,"asciiToBytes");function Cc(c,d){let m,A,R,B=[];for(let D=0;D<c.length&&!((d-=2)<0);++D)m=c.charCodeAt(D),A=m>>8,R=m%256,B.push(R),B.push(A);return B}b(Cc,"utf16leToBytes");function wi(c){return e.toByteArray(Ec(c))}b(wi,"base64ToBytes");function tn(c,d,m,A){let R;for(R=0;R<A&&!(R+m>=d.length||R>=c.length);++R)d[R+m]=c[R];return R}b(tn,"blitBuffer");function ft(c,d){return c instanceof d||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===d.name}b(ft,"isInstance");function Wn(c){return c!==c}b(Wn,"numberIsNaN");var Hp=function(){let c="0123456789abcdef",d=new Array(256);for(let m=0;m<16;++m){let A=m*16;for(let R=0;R<16;++R)d[A+R]=c[m]+c[R]}return d}();function Ct(c){return typeof BigInt>"u"?Ac:c}b(Ct,"defineBigIntMethod");function Ac(){throw new Error("BigInt not supported")}b(Ac,"BufferBigIntNotDefined")}),Zn,Ti,hm,je,oe,he,te=He(()=>{"use strict";Zn=globalThis,Ti=globalThis.setImmediate??(r=>setTimeout(r,0)),hm=globalThis.clearImmediate??(r=>clearTimeout(r)),je=globalThis.crypto??{},je.subtle??(je.subtle={}),oe=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:fm().Buffer,he=globalThis.process??{},he.env??(he.env={});try{he.nextTick(()=>{})}catch{let r=Promise.resolve();he.nextTick=r.then.bind(r)}}),Jt=de((r,e)=>{"use strict";te();var t=typeof Reflect=="object"?Reflect:null,n=t&&typeof t.apply=="function"?t.apply:b(function(_,P,N){return Function.prototype.apply.call(_,P,N)},"ReflectApply"),s;t&&typeof t.ownKeys=="function"?s=t.ownKeys:Object.getOwnPropertySymbols?s=b(function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))},"ReflectOwnKeys"):s=b(function(_){return Object.getOwnPropertyNames(_)},"ReflectOwnKeys");function i(_){console&&console.warn&&console.warn(_)}b(i,"ProcessEmitWarning");var o=Number.isNaN||b(function(_){return _!==_},"NumberIsNaN");function a(){a.init.call(this)}b(a,"EventEmitter"),e.exports=a,e.exports.once=E,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function h(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}b(h,"checkListener"),Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:b(function(){return u},"get"),set:b(function(_){if(typeof _!="number"||_<0||o(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");u=_},"set")}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=b(function(_){if(typeof _!="number"||_<0||o(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this},"setMaxListeners");function l(_){return _._maxListeners===void 0?a.defaultMaxListeners:_._maxListeners}b(l,"_getMaxListeners"),a.prototype.getMaxListeners=b(function(){return l(this)},"getMaxListeners"),a.prototype.emit=b(function(_){for(var P=[],N=1;N<arguments.length;N++)P.push(arguments[N]);var C=_==="error",M=this._events;if(M!==void 0)C=C&&M.error===void 0;else if(!C)return!1;if(C){var k;if(P.length>0&&(k=P[0]),k instanceof Error)throw k;var Z=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw Z.context=k,Z}var J=M[_];if(J===void 0)return!1;if(typeof J=="function")n(J,this,P);else for(var $=J.length,Q=w(J,$),N=0;N<$;++N)n(Q[N],this,P);return!0},"emit");function p(_,P,N,C){var M,k,Z;if(h(N),k=_._events,k===void 0?(k=_._events=Object.create(null),_._eventsCount=0):(k.newListener!==void 0&&(_.emit("newListener",P,N.listener?N.listener:N),k=_._events),Z=k[P]),Z===void 0)Z=k[P]=N,++_._eventsCount;else if(typeof Z=="function"?Z=k[P]=C?[N,Z]:[Z,N]:C?Z.unshift(N):Z.push(N),M=l(_),M>0&&Z.length>M&&!Z.warned){Z.warned=!0;var J=new Error("Possible EventEmitter memory leak detected. "+Z.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");J.name="MaxListenersExceededWarning",J.emitter=_,J.type=P,J.count=Z.length,i(J)}return _}b(p,"_addListener"),a.prototype.addListener=b(function(_,P){return p(this,_,P,!1)},"addListener"),a.prototype.on=a.prototype.addListener,a.prototype.prependListener=b(function(_,P){return p(this,_,P,!0)},"prependListener");function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}b(y,"onceWrapper");function x(_,P,N){var C={fired:!1,wrapFn:void 0,target:_,type:P,listener:N},M=y.bind(C);return M.listener=N,C.wrapFn=M,M}b(x,"_onceWrap"),a.prototype.once=b(function(_,P){return h(P),this.on(_,x(this,_,P)),this},"once"),a.prototype.prependOnceListener=b(function(_,P){return h(P),this.prependListener(_,x(this,_,P)),this},"prependOnceListener"),a.prototype.removeListener=b(function(_,P){var N,C,M,k,Z;if(h(P),C=this._events,C===void 0)return this;if(N=C[_],N===void 0)return this;if(N===P||N.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete C[_],C.removeListener&&this.emit("removeListener",_,N.listener||P));else if(typeof N!="function"){for(M=-1,k=N.length-1;k>=0;k--)if(N[k]===P||N[k].listener===P){Z=N[k].listener,M=k;break}if(M<0)return this;M===0?N.shift():v(N,M),N.length===1&&(C[_]=N[0]),C.removeListener!==void 0&&this.emit("removeListener",_,Z||P)}return this},"removeListener"),a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=b(function(_){var P,N,C;if(N=this._events,N===void 0)return this;if(N.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):N[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete N[_]),this;if(arguments.length===0){var M=Object.keys(N),k;for(C=0;C<M.length;++C)k=M[C],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=N[_],typeof P=="function")this.removeListener(_,P);else if(P!==void 0)for(C=P.length-1;C>=0;C--)this.removeListener(_,P[C]);return this},"removeAllListeners");function g(_,P,N){var C=_._events;if(C===void 0)return[];var M=C[P];return M===void 0?[]:typeof M=="function"?N?[M.listener||M]:[M]:N?S(M):w(M,M.length)}b(g,"_listeners"),a.prototype.listeners=b(function(_){return g(this,_,!0)},"listeners"),a.prototype.rawListeners=b(function(_){return g(this,_,!1)},"rawListeners"),a.listenerCount=function(_,P){return typeof _.listenerCount=="function"?_.listenerCount(P):f.call(_,P)},a.prototype.listenerCount=f;function f(_){var P=this._events;if(P!==void 0){var N=P[_];if(typeof N=="function")return 1;if(N!==void 0)return N.length}return 0}b(f,"listenerCount"),a.prototype.eventNames=b(function(){return this._eventsCount>0?s(this._events):[]},"eventNames");function w(_,P){for(var N=new Array(P),C=0;C<P;++C)N[C]=_[C];return N}b(w,"arrayClone");function v(_,P){for(;P+1<_.length;P++)_[P]=_[P+1];_.pop()}b(v,"spliceOne");function S(_){for(var P=new Array(_.length),N=0;N<P.length;++N)P[N]=_[N].listener||_[N];return P}b(S,"unwrapListeners");function E(_,P){return new Promise(function(N,C){function M(Z){_.removeListener(P,k),C(Z)}b(M,"errorListener");function k(){typeof _.removeListener=="function"&&_.removeListener("error",M),N([].slice.call(arguments))}b(k,"resolver"),L(_,P,k,{once:!0}),P!=="error"&&O(_,M,{once:!0})})}b(E,"once");function O(_,P,N){typeof _.on=="function"&&L(_,"error",P,N)}b(O,"addErrorHandlerIfEventEmitter");function L(_,P,N,C){if(typeof _.on=="function")C.once?_.once(P,N):_.on(P,N);else if(typeof _.addEventListener=="function")_.addEventListener(P,b(function M(k){C.once&&_.removeEventListener(P,M),N(k)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}b(L,"eventTargetAgnosticAddListener")}),sn={};ht(sn,{default:()=>$c});var $c,Jn=He(()=>{"use strict";te(),$c={}});function nn(r){let e=1779033703,t=3144134277,n=1013904242,s=2773480762,i=1359893119,o=2600822924,a=528734635,u=1541459225,h=0,l=0,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],y=b((S,E)=>S>>>E|S<<32-E,"rrot"),x=new Uint32Array(64),g=new Uint8Array(64),f=b(()=>{for(let M=0,k=0;M<16;M++,k+=4)x[M]=g[k]<<24|g[k+1]<<16|g[k+2]<<8|g[k+3];for(let M=16;M<64;M++){let k=y(x[M-15],7)^y(x[M-15],18)^x[M-15]>>>3,Z=y(x[M-2],17)^y(x[M-2],19)^x[M-2]>>>10;x[M]=x[M-16]+k+x[M-7]+Z|0}let S=e,E=t,O=n,L=s,_=i,P=o,N=a,C=u;for(let M=0;M<64;M++){let k=y(_,6)^y(_,11)^y(_,25),Z=_&P^~_&N,J=C+k+Z+p[M]+x[M]|0,$=y(S,2)^y(S,13)^y(S,22),Q=S&E^S&O^E&O,ee=$+Q|0;C=N,N=P,P=_,_=L+J|0,L=O,O=E,E=S,S=J+ee|0}e=e+S|0,t=t+E|0,n=n+O|0,s=s+L|0,i=i+_|0,o=o+P|0,a=a+N|0,u=u+C|0,l=0},"process"),w=b(S=>{typeof S=="string"&&(S=new TextEncoder().encode(S));for(let E=0;E<S.length;E++)g[l++]=S[E],l===64&&f();h+=S.length},"add"),v=b(()=>{if(g[l++]=128,l==64&&f(),l+8>64){for(;l<64;)g[l++]=0;f()}for(;l<58;)g[l++]=0;let S=h*8;g[l++]=S/1099511627776&255,g[l++]=S/4294967296&255,g[l++]=S>>>24,g[l++]=S>>>16&255,g[l++]=S>>>8&255,g[l++]=S&255,f();let E=new Uint8Array(32);return E[0]=e>>>24,E[1]=e>>>16&255,E[2]=e>>>8&255,E[3]=e&255,E[4]=t>>>24,E[5]=t>>>16&255,E[6]=t>>>8&255,E[7]=t&255,E[8]=n>>>24,E[9]=n>>>16&255,E[10]=n>>>8&255,E[11]=n&255,E[12]=s>>>24,E[13]=s>>>16&255,E[14]=s>>>8&255,E[15]=s&255,E[16]=i>>>24,E[17]=i>>>16&255,E[18]=i>>>8&255,E[19]=i&255,E[20]=o>>>24,E[21]=o>>>16&255,E[22]=o>>>8&255,E[23]=o&255,E[24]=a>>>24,E[25]=a>>>16&255,E[26]=a>>>8&255,E[27]=a&255,E[28]=u>>>24,E[29]=u>>>16&255,E[30]=u>>>8&255,E[31]=u&255,E},"digest");return r===void 0?{add:w,digest:v}:(w(r),v())}var dm=He(()=>{"use strict";te(),b(nn,"sha256")}),At,_i,pm=He(()=>{"use strict";te(),At=class nt{constructor(){ae(this,"_dataLength",0),ae(this,"_bufferLength",0),ae(this,"_state",new Int32Array(4)),ae(this,"_buffer",new ArrayBuffer(68)),ae(this,"_buffer8"),ae(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,t=!1){return this.onePassHasher.start().appendByteArray(e).end(t)}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){let t=nt.hexChars,n=nt.hexOut,s,i,o,a;for(a=0;a<4;a+=1)for(i=a*8,s=e[a],o=0;o<8;o+=2)n[i+1+o]=t.charAt(s&15),s>>>=4,n[i+0+o]=t.charAt(s&15),s>>>=4;return n.join("")}static _md5cycle(e,t){let n=e[0],s=e[1],i=e[2],o=e[3];n+=(s&i|~s&o)+t[0]-680876936|0,n=(n<<7|n>>>25)+s|0,o+=(n&s|~n&i)+t[1]-389564586|0,o=(o<<12|o>>>20)+n|0,i+=(o&n|~o&s)+t[2]+606105819|0,i=(i<<17|i>>>15)+o|0,s+=(i&o|~i&n)+t[3]-1044525330|0,s=(s<<22|s>>>10)+i|0,n+=(s&i|~s&o)+t[4]-176418897|0,n=(n<<7|n>>>25)+s|0,o+=(n&s|~n&i)+t[5]+1200080426|0,o=(o<<12|o>>>20)+n|0,i+=(o&n|~o&s)+t[6]-1473231341|0,i=(i<<17|i>>>15)+o|0,s+=(i&o|~i&n)+t[7]-45705983|0,s=(s<<22|s>>>10)+i|0,n+=(s&i|~s&o)+t[8]+1770035416|0,n=(n<<7|n>>>25)+s|0,o+=(n&s|~n&i)+t[9]-1958414417|0,o=(o<<12|o>>>20)+n|0,i+=(o&n|~o&s)+t[10]-42063|0,i=(i<<17|i>>>15)+o|0,s+=(i&o|~i&n)+t[11]-1990404162|0,s=(s<<22|s>>>10)+i|0,n+=(s&i|~s&o)+t[12]+1804603682|0,n=(n<<7|n>>>25)+s|0,o+=(n&s|~n&i)+t[13]-40341101|0,o=(o<<12|o>>>20)+n|0,i+=(o&n|~o&s)+t[14]-1502002290|0,i=(i<<17|i>>>15)+o|0,s+=(i&o|~i&n)+t[15]+1236535329|0,s=(s<<22|s>>>10)+i|0,n+=(s&o|i&~o)+t[1]-165796510|0,n=(n<<5|n>>>27)+s|0,o+=(n&i|s&~i)+t[6]-1069501632|0,o=(o<<9|o>>>23)+n|0,i+=(o&s|n&~s)+t[11]+643717713|0,i=(i<<14|i>>>18)+o|0,s+=(i&n|o&~n)+t[0]-373897302|0,s=(s<<20|s>>>12)+i|0,n+=(s&o|i&~o)+t[5]-701558691|0,n=(n<<5|n>>>27)+s|0,o+=(n&i|s&~i)+t[10]+38016083|0,o=(o<<9|o>>>23)+n|0,i+=(o&s|n&~s)+t[15]-660478335|0,i=(i<<14|i>>>18)+o|0,s+=(i&n|o&~n)+t[4]-405537848|0,s=(s<<20|s>>>12)+i|0,n+=(s&o|i&~o)+t[9]+568446438|0,n=(n<<5|n>>>27)+s|0,o+=(n&i|s&~i)+t[14]-1019803690|0,o=(o<<9|o>>>23)+n|0,i+=(o&s|n&~s)+t[3]-187363961|0,i=(i<<14|i>>>18)+o|0,s+=(i&n|o&~n)+t[8]+1163531501|0,s=(s<<20|s>>>12)+i|0,n+=(s&o|i&~o)+t[13]-1444681467|0,n=(n<<5|n>>>27)+s|0,o+=(n&i|s&~i)+t[2]-51403784|0,o=(o<<9|o>>>23)+n|0,i+=(o&s|n&~s)+t[7]+1735328473|0,i=(i<<14|i>>>18)+o|0,s+=(i&n|o&~n)+t[12]-1926607734|0,s=(s<<20|s>>>12)+i|0,n+=(s^i^o)+t[5]-378558|0,n=(n<<4|n>>>28)+s|0,o+=(n^s^i)+t[8]-2022574463|0,o=(o<<11|o>>>21)+n|0,i+=(o^n^s)+t[11]+1839030562|0,i=(i<<16|i>>>16)+o|0,s+=(i^o^n)+t[14]-35309556|0,s=(s<<23|s>>>9)+i|0,n+=(s^i^o)+t[1]-1530992060|0,n=(n<<4|n>>>28)+s|0,o+=(n^s^i)+t[4]+1272893353|0,o=(o<<11|o>>>21)+n|0,i+=(o^n^s)+t[7]-155497632|0,i=(i<<16|i>>>16)+o|0,s+=(i^o^n)+t[10]-1094730640|0,s=(s<<23|s>>>9)+i|0,n+=(s^i^o)+t[13]+681279174|0,n=(n<<4|n>>>28)+s|0,o+=(n^s^i)+t[0]-358537222|0,o=(o<<11|o>>>21)+n|0,i+=(o^n^s)+t[3]-722521979|0,i=(i<<16|i>>>16)+o|0,s+=(i^o^n)+t[6]+76029189|0,s=(s<<23|s>>>9)+i|0,n+=(s^i^o)+t[9]-640364487|0,n=(n<<4|n>>>28)+s|0,o+=(n^s^i)+t[12]-421815835|0,o=(o<<11|o>>>21)+n|0,i+=(o^n^s)+t[15]+530742520|0,i=(i<<16|i>>>16)+o|0,s+=(i^o^n)+t[2]-995338651|0,s=(s<<23|s>>>9)+i|0,n+=(i^(s|~o))+t[0]-198630844|0,n=(n<<6|n>>>26)+s|0,o+=(s^(n|~i))+t[7]+1126891415|0,o=(o<<10|o>>>22)+n|0,i+=(n^(o|~s))+t[14]-1416354905|0,i=(i<<15|i>>>17)+o|0,s+=(o^(i|~n))+t[5]-57434055|0,s=(s<<21|s>>>11)+i|0,n+=(i^(s|~o))+t[12]+1700485571|0,n=(n<<6|n>>>26)+s|0,o+=(s^(n|~i))+t[3]-1894986606|0,o=(o<<10|o>>>22)+n|0,i+=(n^(o|~s))+t[10]-1051523|0,i=(i<<15|i>>>17)+o|0,s+=(o^(i|~n))+t[1]-2054922799|0,s=(s<<21|s>>>11)+i|0,n+=(i^(s|~o))+t[8]+1873313359|0,n=(n<<6|n>>>26)+s|0,o+=(s^(n|~i))+t[15]-30611744|0,o=(o<<10|o>>>22)+n|0,i+=(n^(o|~s))+t[6]-1560198380|0,i=(i<<15|i>>>17)+o|0,s+=(o^(i|~n))+t[13]+1309151649|0,s=(s<<21|s>>>11)+i|0,n+=(i^(s|~o))+t[4]-145523070|0,n=(n<<6|n>>>26)+s|0,o+=(s^(n|~i))+t[11]-1120210379|0,o=(o<<10|o>>>22)+n|0,i+=(n^(o|~s))+t[2]+718787259|0,i=(i<<15|i>>>17)+o|0,s+=(o^(i|~n))+t[9]-343485551|0,s=(s<<21|s>>>11)+i|0,e[0]=n+e[0]|0,e[1]=s+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(nt.stateIdentity),this}appendStr(e){let t=this._buffer8,n=this._buffer32,s=this._bufferLength,i,o;for(o=0;o<e.length;o+=1){if(i=e.charCodeAt(o),i<128)t[s++]=i;else if(i<2048)t[s++]=(i>>>6)+192,t[s++]=i&63|128;else if(i<55296||i>56319)t[s++]=(i>>>12)+224,t[s++]=i>>>6&63|128,t[s++]=i&63|128;else{if(i=(i-55296)*1024+(e.charCodeAt(++o)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[s++]=(i>>>18)+240,t[s++]=i>>>12&63|128,t[s++]=i>>>6&63|128,t[s++]=i&63|128}s>=64&&(this._dataLength+=64,nt._md5cycle(this._state,n),s-=64,n[0]=n[16])}return this._bufferLength=s,this}appendAsciiStr(e){let t=this._buffer8,n=this._buffer32,s=this._bufferLength,i,o=0;for(;;){for(i=Math.min(e.length-o,64-s);i--;)t[s++]=e.charCodeAt(o++);if(s<64)break;this._dataLength+=64,nt._md5cycle(this._state,n),s=0}return this._bufferLength=s,this}appendByteArray(e){let t=this._buffer8,n=this._buffer32,s=this._bufferLength,i,o=0;for(;;){for(i=Math.min(e.length-o,64-s);i--;)t[s++]=e[o++];if(s<64)break;this._dataLength+=64,nt._md5cycle(this._state,n),s=0}return this._bufferLength=s,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t=e.buffer,n=e.state,s=this._state,i;for(this._dataLength=e.length,this._bufferLength=e.buflen,s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],i=0;i<t.length;i+=1)this._buffer8[i]=t.charCodeAt(i)}end(e=!1){let t=this._bufferLength,n=this._buffer8,s=this._buffer32,i=(t>>2)+1;this._dataLength+=t;let o=this._dataLength*8;if(n[t]=128,n[t+1]=n[t+2]=n[t+3]=0,s.set(nt.buffer32Identity.subarray(i),i),t>55&&(nt._md5cycle(this._state,s),s.set(nt.buffer32Identity)),o<=4294967295)s[14]=o;else{let a=o.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;let u=parseInt(a[2],16),h=parseInt(a[1],16)||0;s[14]=u,s[15]=h}return nt._md5cycle(this._state,s),e?this._state:nt._hex(this._state)}},b(At,"Md5"),ae(At,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),ae(At,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),ae(At,"hexChars","0123456789abcdef"),ae(At,"hexOut",[]),ae(At,"onePassHasher",new At),_i=At}),Ci={};ht(Ci,{createHash:()=>qc,createHmac:()=>Mc,randomBytes:()=>kc});function kc(r){return je.getRandomValues(oe.alloc(r))}function qc(r){if(r==="sha256")return{update:b(function(e){return{digest:b(function(){return oe.from(nn(e))},"digest")}},"update")};if(r==="md5")return{update:b(function(e){return{digest:b(function(){return typeof e=="string"?_i.hashStr(e):_i.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${r}' not supported`)}function Mc(r,e){if(r!=="sha256")throw new Error(`Only sha256 is supported (requested: '${r}')`);return{update:b(function(t){return{digest:b(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof t=="string"&&(t=new TextEncoder().encode(t));let n=e.length;if(n>64)e=nn(e);else if(n<64){let u=new Uint8Array(64);u.set(e),e=u}let s=new Uint8Array(64),i=new Uint8Array(64);for(let u=0;u<64;u++)s[u]=54^e[u],i[u]=92^e[u];let o=new Uint8Array(t.length+64);o.set(s,0),o.set(t,64);let a=new Uint8Array(96);return a.set(i,0),a.set(nn(o),64),oe.from(nn(a))},"digest")}},"update")}}var Bc=He(()=>{"use strict";te(),dm(),pm(),b(kc,"randomBytes"),b(qc,"createHash"),b(Mc,"createHmac")}),jc=de(r=>{"use strict";te(),r.parse=function(s,i){return new t(s,i).parse()};var e=class Dc{constructor(i,o){this.source=i,this.transform=o||n,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var i=this.source[this.position++];return i==="\\"?{value:this.source[this.position++],escaped:!0}:{value:i,escaped:!1}}record(i){this.recorded.push(i)}newEntry(i){var o;(this.recorded.length>0||i)&&(o=this.recorded.join(""),o==="NULL"&&!i&&(o=null),o!==null&&(o=this.transform(o)),this.entries.push(o),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var i=this.nextCharacter();if(i.value==="=")break}}parse(i){var o,a,u;for(this.consumeDimensions();!this.isEof();)if(o=this.nextCharacter(),o.value==="{"&&!u)this.dimension++,this.dimension>1&&(a=new Dc(this.source.substr(this.position-1),this.transform),this.entries.push(a.parse(!0)),this.position+=a.position-2);else if(o.value==="}"&&!u){if(this.dimension--,!this.dimension&&(this.newEntry(),i))return this.entries}else o.value==='"'&&!o.escaped?(u&&this.newEntry(!0),u=!u):o.value===","&&!u?this.newEntry():this.record(o.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};b(e,"ArrayParser");var t=e;function n(s){return s}b(n,"identity")}),Fc=de((r,e)=>{te();var t=jc();e.exports={create:b(function(n,s){return{parse:b(function(){return t.parse(n,s)},"parse")}},"create")}}),mm=de((r,e)=>{"use strict";te();var t=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,n=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,s=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,i=/^-?infinity$/;e.exports=b(function(l){if(i.test(l))return Number(l.replace("i","I"));var p=t.exec(l);if(!p)return o(l)||null;var y=!!p[8],x=parseInt(p[1],10);y&&(x=u(x));var g=parseInt(p[2],10)-1,f=p[3],w=parseInt(p[4],10),v=parseInt(p[5],10),S=parseInt(p[6],10),E=p[7];E=E?1e3*parseFloat(E):0;var O,L=a(l);return L!=null?(O=new Date(Date.UTC(x,g,f,w,v,S,E)),h(x)&&O.setUTCFullYear(x),L!==0&&O.setTime(O.getTime()-L)):(O=new Date(x,g,f,w,v,S,E),h(x)&&O.setFullYear(x)),O},"parseDate");function o(l){var p=n.exec(l);if(p){var y=parseInt(p[1],10),x=!!p[4];x&&(y=u(y));var g=parseInt(p[2],10)-1,f=p[3],w=new Date(y,g,f);return h(y)&&w.setFullYear(y),w}}b(o,"getDate");function a(l){if(l.endsWith("+00"))return 0;var p=s.exec(l.split(" ")[1]);if(p){var y=p[1];if(y==="Z")return 0;var x=y==="-"?-1:1,g=parseInt(p[2],10)*3600+parseInt(p[3]||0,10)*60+parseInt(p[4]||0,10);return g*x*1e3}}b(a,"timeZoneOffset");function u(l){return-(l-1)}b(u,"bcYearToNegativeYear");function h(l){return l>=0&&l<100}b(h,"is0To99")}),gm=de((r,e)=>{te(),e.exports=n;var t=Object.prototype.hasOwnProperty;function n(s){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var a in o)t.call(o,a)&&(s[a]=o[a])}return s}b(n,"extend")}),ym=de((r,e)=>{"use strict";te();var t=gm();e.exports=n;function n(S){if(!(this instanceof n))return new n(S);t(this,v(S))}b(n,"PostgresInterval");var s=["seconds","minutes","hours","days","months","years"];n.prototype.toPostgres=function(){var S=s.filter(this.hasOwnProperty,this);return this.milliseconds&&S.indexOf("seconds")<0&&S.push("seconds"),S.length===0?"0":S.map(function(E){var O=this[E]||0;return E==="seconds"&&this.milliseconds&&(O=(O+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),O+" "+E},this).join(" ")};var i={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},o=["years","months","days"],a=["hours","minutes","seconds"];n.prototype.toISOString=n.prototype.toISO=function(){var S=o.map(O,this).join(""),E=a.map(O,this).join("");return"P"+S+"T"+E;function O(L){var _=this[L]||0;return L==="seconds"&&this.milliseconds&&(_=(_+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),_+i[L]}};var u="([+-]?\\d+)",h=u+"\\s+years?",l=u+"\\s+mons?",p=u+"\\s+days?",y="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",x=new RegExp([h,l,p,y].map(function(S){return"("+S+")?"}).join("\\s*")),g={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},f=["hours","minutes","seconds","milliseconds"];function w(S){var E=S+"000000".slice(S.length);return parseInt(E,10)/1e3}b(w,"parseMilliseconds");function v(S){if(!S)return{};var E=x.exec(S),O=E[8]==="-";return Object.keys(g).reduce(function(L,_){var P=g[_],N=E[P];return!N||(N=_==="milliseconds"?w(N):parseInt(N,10),!N)||(O&&~f.indexOf(_)&&(N*=-1),L[_]=N),L},{})}b(v,"parse")}),bm=de((r,e)=>{"use strict";te(),e.exports=b(function(t){if(/^\\x/.test(t))return new oe(t.substr(2),"hex");for(var n="",s=0;s<t.length;)if(t[s]!=="\\")n+=t[s],++s;else if(/[0-7]{3}/.test(t.substr(s+1,3)))n+=String.fromCharCode(parseInt(t.substr(s+1,3),8)),s+=4;else{for(var i=1;s+i<t.length&&t[s+i]==="\\";)i++;for(var o=0;o<Math.floor(i/2);++o)n+="\\";s+=Math.floor(i/2)*2}return new oe(n,"binary")},"parseBytea")}),xm=de((r,e)=>{te();var t=jc(),n=Fc(),s=mm(),i=ym(),o=bm();function a(C){return b(function(M){return M===null?M:C(M)},"nullAllowed")}b(a,"allowNull");function u(C){return C===null?C:C==="TRUE"||C==="t"||C==="true"||C==="y"||C==="yes"||C==="on"||C==="1"}b(u,"parseBool");function h(C){return C?t.parse(C,u):null}b(h,"parseBoolArray");function l(C){return parseInt(C,10)}b(l,"parseBaseTenInt");function p(C){return C?t.parse(C,a(l)):null}b(p,"parseIntegerArray");function y(C){return C?t.parse(C,a(function(M){return O(M).trim()})):null}b(y,"parseBigIntegerArray");var x=b(function(C){if(!C)return null;var M=n.create(C,function(k){return k!==null&&(k=_(k)),k});return M.parse()},"parsePointArray"),g=b(function(C){if(!C)return null;var M=n.create(C,function(k){return k!==null&&(k=parseFloat(k)),k});return M.parse()},"parseFloatArray"),f=b(function(C){if(!C)return null;var M=n.create(C);return M.parse()},"parseStringArray"),w=b(function(C){if(!C)return null;var M=n.create(C,function(k){return k!==null&&(k=s(k)),k});return M.parse()},"parseDateArray"),v=b(function(C){if(!C)return null;var M=n.create(C,function(k){return k!==null&&(k=i(k)),k});return M.parse()},"parseIntervalArray"),S=b(function(C){return C?t.parse(C,a(o)):null},"parseByteAArray"),E=b(function(C){return parseInt(C,10)},"parseInteger"),O=b(function(C){var M=String(C);return/^\d+$/.test(M)?M:C},"parseBigInteger"),L=b(function(C){return C?t.parse(C,a(JSON.parse)):null},"parseJsonArray"),_=b(function(C){return C[0]!=="("?null:(C=C.substring(1,C.length-1).split(","),{x:parseFloat(C[0]),y:parseFloat(C[1])})},"parsePoint"),P=b(function(C){if(C[0]!=="<"&&C[1]!=="(")return null;for(var M="(",k="",Z=!1,J=2;J<C.length-1;J++){if(Z||(M+=C[J]),C[J]===")"){Z=!0;continue}else if(!Z)continue;C[J]!==","&&(k+=C[J])}var $=_(M);return $.radius=parseFloat(k),$},"parseCircle"),N=b(function(C){C(20,O),C(21,E),C(23,E),C(26,E),C(700,parseFloat),C(701,parseFloat),C(16,u),C(1082,s),C(1114,s),C(1184,s),C(600,_),C(651,f),C(718,P),C(1e3,h),C(1001,S),C(1005,p),C(1007,p),C(1028,p),C(1016,y),C(1017,x),C(1021,g),C(1022,g),C(1231,g),C(1014,f),C(1015,f),C(1008,f),C(1009,f),C(1040,f),C(1041,f),C(1115,w),C(1182,w),C(1185,w),C(1186,i),C(1187,v),C(17,o),C(114,JSON.parse.bind(JSON)),C(3802,JSON.parse.bind(JSON)),C(199,L),C(3807,L),C(3907,f),C(2951,f),C(791,f),C(1183,f),C(1270,f)},"init");e.exports={init:N}}),wm=de((r,e)=>{"use strict";te();var t=1e6;function n(s){var i=s.readInt32BE(0),o=s.readUInt32BE(4),a="";i<0&&(i=~i+(o===0),o=~o+1>>>0,a="-");var u="",h,l,p,y,x,g;{if(h=i%t,i=i/t>>>0,l=4294967296*h+o,o=l/t>>>0,p=""+(l-t*o),o===0&&i===0)return a+p+u;for(y="",x=6-p.length,g=0;g<x;g++)y+="0";u=y+p+u}{if(h=i%t,i=i/t>>>0,l=4294967296*h+o,o=l/t>>>0,p=""+(l-t*o),o===0&&i===0)return a+p+u;for(y="",x=6-p.length,g=0;g<x;g++)y+="0";u=y+p+u}{if(h=i%t,i=i/t>>>0,l=4294967296*h+o,o=l/t>>>0,p=""+(l-t*o),o===0&&i===0)return a+p+u;for(y="",x=6-p.length,g=0;g<x;g++)y+="0";u=y+p+u}return h=i%t,l=4294967296*h+o,p=""+l%t,a+p+u}b(n,"readInt8"),e.exports=n}),vm=de((r,e)=>{te();var t=wm(),n=b(function(f,w,v,S,E){v=v||0,S=S||!1,E=E||function(Z,J,$){return Z*Math.pow(2,$)+J};var O=v>>3,L=b(function(Z){return S?~Z&255:Z},"inv"),_=255,P=8-v%8;w<P&&(_=255<<8-w&255,P=w),v&&(_=_>>v%8);var N=0;v%8+w>=8&&(N=E(0,L(f[O])&_,P));for(var C=w+v>>3,M=O+1;M<C;M++)N=E(N,L(f[M]),8);var k=(w+v)%8;return k>0&&(N=E(N,L(f[C])>>8-k,k)),N},"parseBits"),s=b(function(f,w,v){var S=Math.pow(2,v-1)-1,E=n(f,1),O=n(f,v,1);if(O===0)return 0;var L=1,_=b(function(N,C,M){N===0&&(N=1);for(var k=1;k<=M;k++)L/=2,(C&1<<M-k)>0&&(N+=L);return N},"parsePrecisionBits"),P=n(f,w,v+1,!1,_);return O==Math.pow(2,v+1)-1?P===0?E===0?1/0:-1/0:NaN:(E===0?1:-1)*Math.pow(2,O-S)*P},"parseFloatFromBits"),i=b(function(f){return n(f,1)==1?-1*(n(f,15,1,!0)+1):n(f,15,1)},"parseInt16"),o=b(function(f){return n(f,1)==1?-1*(n(f,31,1,!0)+1):n(f,31,1)},"parseInt32"),a=b(function(f){return s(f,23,8)},"parseFloat32"),u=b(function(f){return s(f,52,11)},"parseFloat64"),h=b(function(f){var w=n(f,16,32);if(w==49152)return NaN;for(var v=Math.pow(1e4,n(f,16,16)),S=0,E=[],O=n(f,16),L=0;L<O;L++)S+=n(f,16,64+16*L)*v,v/=1e4;var _=Math.pow(10,n(f,16,48));return(w===0?1:-1)*Math.round(S*_)/_},"parseNumeric"),l=b(function(f,w){var v=n(w,1),S=n(w,63,1),E=new Date((v===0?1:-1)*S/1e3+9466848e5);return f||E.setTime(E.getTime()+E.getTimezoneOffset()*6e4),E.usec=S%1e3,E.getMicroSeconds=function(){return this.usec},E.setMicroSeconds=function(O){this.usec=O},E.getUTCMicroSeconds=function(){return this.usec},E},"parseDate"),p=b(function(f){for(var w=n(f,32),v=n(f,32,32),S=n(f,32,64),E=96,O=[],L=0;L<w;L++)O[L]=n(f,32,E),E+=32,E+=32;var _=b(function(N){var C=n(f,32,E);if(E+=32,C==4294967295)return null;var M;if(N==23||N==20)return M=n(f,C*8,E),E+=C*8,M;if(N==25)return M=f.toString(this.encoding,E>>3,(E+=C<<3)>>3),M;console.log("ERROR: ElementType not implemented: "+N)},"parseElement"),P=b(function(N,C){var M=[],k;if(N.length>1){var Z=N.shift();for(k=0;k<Z;k++)M[k]=P(N,C);N.unshift(Z)}else for(k=0;k<N[0];k++)M[k]=_(C);return M},"parse");return P(O,S)},"parseArray"),y=b(function(f){return f.toString("utf8")},"parseText"),x=b(function(f){return f===null?null:n(f,8)>0},"parseBool"),g=b(function(f){f(20,t),f(21,i),f(23,o),f(26,o),f(1700,h),f(700,a),f(701,u),f(16,x),f(1114,l.bind(null,!1)),f(1184,l.bind(null,!0)),f(1e3,p),f(1007,p),f(1016,p),f(1008,p),f(1009,p),f(25,y)},"init");e.exports={init:g}}),Sm=de((r,e)=>{te(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),Xn=de(r=>{te();var e=xm(),t=vm(),n=Fc(),s=Sm();r.getTypeParser=a,r.setTypeParser=u,r.arrayParser=n,r.builtins=s;var i={text:{},binary:{}};function o(h){return String(h)}b(o,"noParse");function a(h,l){return l=l||"text",i[l]&&i[l][h]||o}b(a,"getTypeParser");function u(h,l,p){typeof l=="function"&&(p=l,l="text"),i[l][h]=p}b(u,"setTypeParser"),e.init(function(h,l){i.text[h]=l}),t.init(function(h,l){i.binary[h]=l})}),Yn=de((r,e)=>{"use strict";te(),e.exports={host:"localhost",user:he.platform==="win32"?he.env.USERNAME:he.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var t=Xn(),n=t.getTypeParser(20,"text"),s=t.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(i){t.setTypeParser(20,"text",i?t.getTypeParser(23,"text"):n),t.setTypeParser(1016,"text",i?t.getTypeParser(1007,"text"):s)})}),es=de((r,e)=>{"use strict";te();var t=(Bc(),Me(Ci)),n=Yn();function s(g){var f=g.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+f+'"'}b(s,"escapeElement");function i(g){for(var f="{",w=0;w<g.length;w++)w>0&&(f=f+","),g[w]===null||typeof g[w]>"u"?f=f+"NULL":Array.isArray(g[w])?f=f+i(g[w]):g[w]instanceof oe?f+="\\\\x"+g[w].toString("hex"):f+=s(o(g[w]));return f=f+"}",f}b(i,"arrayString");var o=b(function(g,f){if(g==null)return null;if(g instanceof oe)return g;if(ArrayBuffer.isView(g)){var w=oe.from(g.buffer,g.byteOffset,g.byteLength);return w.length===g.byteLength?w:w.slice(g.byteOffset,g.byteOffset+g.byteLength)}return g instanceof Date?n.parseInputDatesAsUTC?l(g):h(g):Array.isArray(g)?i(g):typeof g=="object"?a(g,f):g.toString()},"prepareValue");function a(g,f){if(g&&typeof g.toPostgres=="function"){if(f=f||[],f.indexOf(g)!==-1)throw new Error('circular reference detected while preparing "'+g+'" for query');return f.push(g),o(g.toPostgres(o),f)}return JSON.stringify(g)}b(a,"prepareObject");function u(g,f){for(g=""+g;g.length<f;)g="0"+g;return g}b(u,"pad");function h(g){var f=-g.getTimezoneOffset(),w=g.getFullYear(),v=w<1;v&&(w=Math.abs(w)+1);var S=u(w,4)+"-"+u(g.getMonth()+1,2)+"-"+u(g.getDate(),2)+"T"+u(g.getHours(),2)+":"+u(g.getMinutes(),2)+":"+u(g.getSeconds(),2)+"."+u(g.getMilliseconds(),3);return f<0?(S+="-",f*=-1):S+="+",S+=u(Math.floor(f/60),2)+":"+u(f%60,2),v&&(S+=" BC"),S}b(h,"dateToString");function l(g){var f=g.getUTCFullYear(),w=f<1;w&&(f=Math.abs(f)+1);var v=u(f,4)+"-"+u(g.getUTCMonth()+1,2)+"-"+u(g.getUTCDate(),2)+"T"+u(g.getUTCHours(),2)+":"+u(g.getUTCMinutes(),2)+":"+u(g.getUTCSeconds(),2)+"."+u(g.getUTCMilliseconds(),3);return v+="+00:00",w&&(v+=" BC"),v}b(l,"dateToStringUTC");function p(g,f,w){return g=typeof g=="string"?{text:g}:g,f&&(typeof f=="function"?g.callback=f:g.values=f),w&&(g.callback=w),g}b(p,"normalizeQueryConfig");var y=b(function(g){return t.createHash("md5").update(g,"utf-8").digest("hex")},"md5"),x=b(function(g,f,w){var v=y(f+g),S=y(oe.concat([oe.from(v),w]));return"md5"+S},"postgresMd5PasswordHash");e.exports={prepareValue:b(function(g){return o(g)},"prepareValueWrapper"),normalizeQueryConfig:p,postgresMd5PasswordHash:x,md5:y}}),_m=de((r,e)=>{"use strict";te();var t=(Bc(),Me(Ci));function n(f){if(f.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let w=t.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:w,response:"n,,n=*,r="+w,message:"SASLInitialResponse"}}b(n,"startSession");function s(f,w,v){if(f.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof w!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof v!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let S=h(v);if(S.nonce.startsWith(f.clientNonce)){if(S.nonce.length===f.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var E=oe.from(S.salt,"base64"),O=g(w,E,S.iteration),L=x(O,"Client Key"),_=y(L),P="n=*,r="+f.clientNonce,N="r="+S.nonce+",s="+S.salt+",i="+S.iteration,C="c=biws,r="+S.nonce,M=P+","+N+","+C,k=x(_,M),Z=p(L,k),J=Z.toString("base64"),$=x(O,"Server Key"),Q=x($,M);f.message="SASLResponse",f.serverSignature=Q.toString("base64"),f.response=C+",p="+J}b(s,"continueSession");function i(f,w){if(f.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof w!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:v}=l(w);if(v!==f.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}b(i,"finalizeSession");function o(f){if(typeof f!="string")throw new TypeError("SASL: text must be a string");return f.split("").map((w,v)=>f.charCodeAt(v)).every(w=>w>=33&&w<=43||w>=45&&w<=126)}b(o,"isPrintableChars");function a(f){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(f)}b(a,"isBase64");function u(f){if(typeof f!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(f.split(",").map(w=>{if(!/^.=/.test(w))throw new Error("SASL: Invalid attribute pair entry");let v=w[0],S=w.substring(2);return[v,S]}))}b(u,"parseAttributePairs");function h(f){let w=u(f),v=w.get("r");if(v){if(!o(v))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let S=w.get("s");if(S){if(!a(S))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let E=w.get("i");if(E){if(!/^[1-9][0-9]*$/.test(E))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let O=parseInt(E,10);return{nonce:v,salt:S,iteration:O}}b(h,"parseServerFirstMessage");function l(f){let w=u(f).get("v");if(w){if(!a(w))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:w}}b(l,"parseServerFinalMessage");function p(f,w){if(!oe.isBuffer(f))throw new TypeError("first argument must be a Buffer");if(!oe.isBuffer(w))throw new TypeError("second argument must be a Buffer");if(f.length!==w.length)throw new Error("Buffer lengths must match");if(f.length===0)throw new Error("Buffers cannot be empty");return oe.from(f.map((v,S)=>f[S]^w[S]))}b(p,"xorBuffers");function y(f){return t.createHash("sha256").update(f).digest()}b(y,"sha256");function x(f,w){return t.createHmac("sha256",f).update(w).digest()}b(x,"hmacSha256");function g(f,w,v){for(var S=x(f,oe.concat([w,oe.from([0,0,0,1])])),E=S,O=0;O<v-1;O++)S=x(f,S),E=p(E,S);return E}b(g,"Hi"),e.exports={startSession:n,continueSession:s,finalizeSession:i}}),Ai={};ht(Ai,{join:()=>Qc});function Qc(...r){return r.join("/")}var Uc=He(()=>{"use strict";te(),b(Qc,"join")}),Ii={};ht(Ii,{stat:()=>Vc});function Vc(r,e){e(new Error("No filesystem"))}var zc=He(()=>{"use strict";te(),b(Vc,"stat")}),Ni={};ht(Ni,{default:()=>Kc});var Kc,Gc=He(()=>{"use strict";te(),Kc={}}),Wc={};ht(Wc,{StringDecoder:()=>Hc});var vi,Hc,Em=He(()=>{"use strict";te(),vi=class{constructor(e){ae(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},b(vi,"StringDecoder"),Hc=vi}),Tm=de((r,e)=>{"use strict";te();var{Transform:t}=(Gc(),Me(Ni)),{StringDecoder:n}=(Em(),Me(Wc)),s=Symbol("last"),i=Symbol("decoder");function o(p,y,x){let g;if(this.overflow){if(g=this[i].write(p).split(this.matcher),g.length===1)return x();g.shift(),this.overflow=!1}else this[s]+=this[i].write(p),g=this[s].split(this.matcher);this[s]=g.pop();for(let f=0;f<g.length;f++)try{u(this,this.mapper(g[f]))}catch(w){return x(w)}if(this.overflow=this[s].length>this.maxLength,this.overflow&&!this.skipOverflow){x(new Error("maximum buffer reached"));return}x()}b(o,"transform");function a(p){if(this[s]+=this[i].end(),this[s])try{u(this,this.mapper(this[s]))}catch(y){return p(y)}p()}b(a,"flush");function u(p,y){y!==void 0&&p.push(y)}b(u,"push");function h(p){return p}b(h,"noop");function l(p,y,x){switch(p=p||/\r?\n/,y=y||h,x=x||{},arguments.length){case 1:typeof p=="function"?(y=p,p=/\r?\n/):typeof p=="object"&&!(p instanceof RegExp)&&!p[Symbol.split]&&(x=p,p=/\r?\n/);break;case 2:typeof p=="function"?(x=y,y=p,p=/\r?\n/):typeof y=="object"&&(x=y,y=h)}x=Object.assign({},x),x.autoDestroy=!0,x.transform=o,x.flush=a,x.readableObjectMode=!0;let g=new t(x);return g[s]="",g[i]=new n("utf8"),g.matcher=p,g.mapper=y,g.maxLength=x.maxLength,g.skipOverflow=x.skipOverflow||!1,g.overflow=!1,g._destroy=function(f,w){this._writableState.errorEmitted=!1,w(f)},g}b(l,"split"),e.exports=l}),Cm=de((r,e)=>{"use strict";te();var t=(Uc(),Me(Ai)),n=(Gc(),Me(Ni)).Stream,s=Tm(),i=(Jn(),Me(sn)),o=5432,a=he.platform==="win32",u=he.stderr,h=56,l=7,p=61440,y=32768;function x(L){return(L&p)==y}b(x,"isRegFile");var g=["host","port","database","user","password"],f=g.length,w=g[f-1];function v(){var L=u instanceof n&&u.writable===!0;if(L){var _=Array.prototype.slice.call(arguments).concat(`
`);u.write(i.format.apply(i,_))}}b(v,"warn"),Object.defineProperty(e.exports,"isWin",{get:b(function(){return a},"get"),set:b(function(L){a=L},"set")}),e.exports.warnTo=function(L){var _=u;return u=L,_},e.exports.getFileName=function(L){var _=L||he.env,P=_.PGPASSFILE||(a?t.join(_.APPDATA||"./","postgresql","pgpass.conf"):t.join(_.HOME||"./",".pgpass"));return P},e.exports.usePgPass=function(L,_){return Object.prototype.hasOwnProperty.call(he.env,"PGPASSWORD")?!1:a?!0:(_=_||"<unkn>",x(L.mode)?L.mode&(h|l)?(v('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',_),!1):!0:(v('WARNING: password file "%s" is not a plain file',_),!1))};var S=e.exports.match=function(L,_){return g.slice(0,-1).reduce(function(P,N,C){return C==1&&Number(L[N]||o)===Number(_[N])?P&&!0:P&&(_[N]==="*"||_[N]===L[N])},!0)};e.exports.getPassword=function(L,_,P){var N,C=_.pipe(s());function M(J){var $=E(J);$&&O($)&&S(L,$)&&(N=$[w],C.end())}b(M,"onLine");var k=b(function(){_.destroy(),P(N)},"onEnd"),Z=b(function(J){_.destroy(),v("WARNING: error on reading file: %s",J),P(void 0)},"onErr");_.on("error",Z),C.on("data",M).on("end",k).on("error",Z)};var E=e.exports.parseLine=function(L){if(L.length<11||L.match(/^\s+#/))return null;for(var _="",P="",N=0,C=0,M=0,k={},Z=!1,J=b(function(Q,ee,ce){var ge=L.substring(ee,ce);Object.hasOwnProperty.call(he.env,"PGPASS_NO_DEESCAPE")||(ge=ge.replace(/\\([:\\])/g,"$1")),k[g[Q]]=ge},"addToObj"),$=0;$<L.length-1;$+=1){if(_=L.charAt($+1),P=L.charAt($),Z=N==f-1,Z){J(N,C);break}$>=0&&_==":"&&P!=="\\"&&(J(N,C,$+1),C=$+2,N+=1)}return k=Object.keys(k).length===f?k:null,k},O=e.exports.isValidEntry=function(L){for(var _={0:function(k){return k.length>0},1:function(k){return k==="*"?!0:(k=Number(k),isFinite(k)&&k>0&&k<9007199254740992&&Math.floor(k)===k)},2:function(k){return k.length>0},3:function(k){return k.length>0},4:function(k){return k.length>0}},P=0;P<g.length;P+=1){var N=_[P],C=L[g[P]]||"",M=N(C);if(!M)return!1}return!0}}),Am=de((r,e)=>{"use strict";te();var t=(Uc(),Me(Ai)),n=(zc(),Me(Ii)),s=Cm();e.exports=function(i,o){var a=s.getFileName();n.stat(a,function(u,h){if(u||!s.usePgPass(h,a))return o(void 0);var l=n.createReadStream(a);s.getPassword(i,l,o)})},e.exports.warnTo=s.warnTo}),Pi=de((r,e)=>{"use strict";te();var t=Xn();function n(s){this._types=s||t,this.text={},this.binary={}}b(n,"TypeOverrides"),n.prototype.getOverrides=function(s){switch(s){case"text":return this.text;case"binary":return this.binary;default:return{}}},n.prototype.setTypeParser=function(s,i,o){typeof i=="function"&&(o=i,i="text"),this.getOverrides(i)[s]=o},n.prototype.getTypeParser=function(s,i){return i=i||"text",this.getOverrides(i)[s]||this._types.getTypeParser(s,i)},e.exports=n}),Zc={};ht(Zc,{default:()=>Jc});var Jc,Im=He(()=>{"use strict";te(),Jc={}}),Xc={};ht(Xc,{parse:()=>Ri});function Ri(r,e=!1){let{protocol:t}=new URL(r),n="http:"+r.substring(t.length),{username:s,password:i,host:o,hostname:a,port:u,pathname:h,search:l,searchParams:p,hash:y}=new URL(n);i=decodeURIComponent(i),s=decodeURIComponent(s),h=decodeURIComponent(h);let x=s+":"+i,g=e?Object.fromEntries(p.entries()):l;return{href:r,protocol:t,auth:x,username:s,password:i,host:o,hostname:a,port:u,pathname:h,search:l,query:g,hash:y}}var Yc=He(()=>{"use strict";te(),b(Ri,"parse")}),Nm=de((r,e)=>{"use strict";te();var t=(Yc(),Me(Xc)),n=(zc(),Me(Ii));function s(i){if(i.charAt(0)==="/"){var a=i.split(" ");return{host:a[0],database:a[1]}}var o=t.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(i)?encodeURI(i).replace(/\%25(\d\d)/g,"%$1"):i,!0),a=o.query;for(var u in a)Array.isArray(a[u])&&(a[u]=a[u][a[u].length-1]);var h=(o.auth||":").split(":");if(a.user=h[0],a.password=h.splice(1).join(":"),a.port=o.port,o.protocol=="socket:")return a.host=decodeURI(o.pathname),a.database=o.query.db,a.client_encoding=o.query.encoding,a;a.host||(a.host=o.hostname);var l=o.pathname;if(!a.host&&l&&/^%2f/i.test(l)){var p=l.split("/");a.host=decodeURIComponent(p[0]),l=p.splice(1).join("/")}switch(l&&l.charAt(0)==="/"&&(l=l.slice(1)||null),a.database=l&&decodeURI(l),(a.ssl==="true"||a.ssl==="1")&&(a.ssl=!0),a.ssl==="0"&&(a.ssl=!1),(a.sslcert||a.sslkey||a.sslrootcert||a.sslmode)&&(a.ssl={}),a.sslcert&&(a.ssl.cert=n.readFileSync(a.sslcert).toString()),a.sslkey&&(a.ssl.key=n.readFileSync(a.sslkey).toString()),a.sslrootcert&&(a.ssl.ca=n.readFileSync(a.sslrootcert).toString()),a.sslmode){case"disable":{a.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{a.ssl.rejectUnauthorized=!1;break}}return a}b(s,"parse"),e.exports=s,s.parse=s}),Oi=de((r,e)=>{"use strict";te();var t=(Im(),Me(Zc)),n=Yn(),s=Nm().parse,i=b(function(p,y,x){return x===void 0?x=he.env["PG"+p.toUpperCase()]:x===!1||(x=he.env[x]),y[p]||x||n[p]},"val"),o=b(function(){switch(he.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return n.ssl},"readSSLConfigFromEnvironment"),a=b(function(p){return"'"+(""+p).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),u=b(function(p,y,x){var g=y[x];g!=null&&p.push(x+"="+a(g))},"add"),h=class{constructor(y){y=typeof y=="string"?s(y):y||{},y.connectionString&&(y=Object.assign({},y,s(y.connectionString))),this.user=i("user",y),this.database=i("database",y),this.database===void 0&&(this.database=this.user),this.port=parseInt(i("port",y),10),this.host=i("host",y),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i("password",y)}),this.binary=i("binary",y),this.options=i("options",y),this.ssl=typeof y.ssl>"u"?o():y.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=i("client_encoding",y),this.replication=i("replication",y),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i("application_name",y,"PGAPPNAME"),this.fallback_application_name=i("fallback_application_name",y,!1),this.statement_timeout=i("statement_timeout",y,!1),this.lock_timeout=i("lock_timeout",y,!1),this.idle_in_transaction_session_timeout=i("idle_in_transaction_session_timeout",y,!1),this.query_timeout=i("query_timeout",y,!1),y.connectionTimeoutMillis===void 0?this.connect_timeout=he.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(y.connectionTimeoutMillis/1e3),y.keepAlive===!1?this.keepalives=0:y.keepAlive===!0&&(this.keepalives=1),typeof y.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(y.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(y){var x=[];u(x,this,"user"),u(x,this,"password"),u(x,this,"port"),u(x,this,"application_name"),u(x,this,"fallback_application_name"),u(x,this,"connect_timeout"),u(x,this,"options");var g=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(u(x,g,"sslmode"),u(x,g,"sslca"),u(x,g,"sslkey"),u(x,g,"sslcert"),u(x,g,"sslrootcert"),this.database&&x.push("dbname="+a(this.database)),this.replication&&x.push("replication="+a(this.replication)),this.host&&x.push("host="+a(this.host)),this.isDomainSocket)return y(null,x.join(" "));this.client_encoding&&x.push("client_encoding="+a(this.client_encoding)),t.lookup(this.host,function(f,w){return f?y(f,null):(x.push("hostaddr="+a(w)),y(null,x.join(" ")))})}};b(h,"ConnectionParameters");var l=h;e.exports=l}),Pm=de((r,e)=>{"use strict";te();var t=Xn(),n=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,s=class{constructor(a,u){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=u,this.RowCtor=null,this.rowAsArray=a==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var u;a.text?u=n.exec(a.text):u=n.exec(a.command),u&&(this.command=u[1],u[3]?(this.oid=parseInt(u[2],10),this.rowCount=parseInt(u[3],10)):u[2]&&(this.rowCount=parseInt(u[2],10)))}_parseRowAsArray(a){for(var u=new Array(a.length),h=0,l=a.length;h<l;h++){var p=a[h];p!==null?u[h]=this._parsers[h](p):u[h]=null}return u}parseRow(a){for(var u={},h=0,l=a.length;h<l;h++){var p=a[h],y=this.fields[h].name;p!==null?u[y]=this._parsers[h](p):u[y]=null}return u}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=new Array(a.length));for(var u=0;u<a.length;u++){var h=a[u];this._types?this._parsers[u]=this._types.getTypeParser(h.dataTypeID,h.format||"text"):this._parsers[u]=t.getTypeParser(h.dataTypeID,h.format||"text")}}};b(s,"Result");var i=s;e.exports=i}),Rm=de((r,e)=>{"use strict";te();var{EventEmitter:t}=Jt(),n=Pm(),s=es(),i=class extends t{constructor(u,h,l){super(),u=s.normalizeQueryConfig(u,h,l),this.text=u.text,this.values=u.values,this.rows=u.rows,this.types=u.types,this.name=u.name,this.binary=u.binary,this.portal=u.portal||"",this.callback=u.callback,this._rowMode=u.rowMode,he.domain&&u.callback&&(this.callback=he.domain.bind(u.callback)),this._result=new n(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new n(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(u){this._checkForMultirow(),this._result.addFields(u.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(u){let h;if(!this._canceledDueToError){try{h=this._result.parseRow(u.fields)}catch(l){this._canceledDueToError=l;return}this.emit("row",h,this._result),this._accumulateRows&&this._result.addRow(h)}}handleCommandComplete(u,h){this._checkForMultirow(),this._result.addCommandComplete(u),this.rows&&h.sync()}handleEmptyQuery(u){this.rows&&u.sync()}handleError(u,h){if(this._canceledDueToError&&(u=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(u);this.emit("error",u)}handleReadyForQuery(u){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,u);if(this.callback)try{this.callback(null,this._results)}catch(h){he.nextTick(()=>{throw h})}this.emit("end",this._results)}submit(u){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let h=u.parsedStatements[this.name];return this.text&&h&&this.text!==h?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(u):u.query(this.text),null)}hasBeenParsed(u){return this.name&&u.parsedStatements[this.name]}handlePortalSuspended(u){this._getRows(u,this.rows)}_getRows(u,h){u.execute({portal:this.portal,rows:h}),h?u.flush():u.sync()}prepare(u){this.isPreparedStatement=!0,this.hasBeenParsed(u)||u.parse({text:this.text,name:this.name,types:this.types});try{u.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:s.prepareValue})}catch(h){this.handleError(h,u);return}u.describe({type:"P",name:this.portal||""}),this._getRows(u,this.rows)}handleCopyInResponse(u){u.sendCopyFail("No source stream defined")}handleCopyData(u,h){}};b(i,"Query");var o=i;e.exports=o}),eu={};ht(eu,{Socket:()=>Bt,isIP:()=>tu});function tu(r){return 0}var Pc,Si,rn,Bt,Li=He(()=>{"use strict";te(),Pc=Tr(Jt(),1),b(tu,"isIP"),Si=/^[^.]+\./,rn=class re extends Pc.EventEmitter{constructor(){super(...arguments),ae(this,"opts",{}),ae(this,"connecting",!1),ae(this,"pending",!0),ae(this,"writable",!0),ae(this,"encrypted",!1),ae(this,"authorized",!1),ae(this,"destroyed",!1),ae(this,"ws",null),ae(this,"writeBuffer"),ae(this,"tlsState",0),ae(this,"tlsRead"),ae(this,"tlsWrite")}static get poolQueryViaFetch(){return re.opts.poolQueryViaFetch??re.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){re.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return re.opts.fetchEndpoint??re.defaults.fetchEndpoint}static set fetchEndpoint(e){re.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return re.opts.fetchFunction??re.defaults.fetchFunction}static set fetchFunction(e){re.opts.fetchFunction=e}static get webSocketConstructor(){return re.opts.webSocketConstructor??re.defaults.webSocketConstructor}static set webSocketConstructor(e){re.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??re.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return re.opts.wsProxy??re.defaults.wsProxy}static set wsProxy(e){re.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??re.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return re.opts.coalesceWrites??re.defaults.coalesceWrites}static set coalesceWrites(e){re.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??re.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return re.opts.useSecureWebSocket??re.defaults.useSecureWebSocket}static set useSecureWebSocket(e){re.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??re.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return re.opts.forceDisablePgSSL??re.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){re.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??re.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return re.opts.disableSNI??re.defaults.disableSNI}static set disableSNI(e){re.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??re.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get pipelineConnect(){return re.opts.pipelineConnect??re.defaults.pipelineConnect}static set pipelineConnect(e){re.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??re.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return re.opts.subtls??re.defaults.subtls}static set subtls(e){re.opts.subtls=e}get subtls(){return this.opts.subtls??re.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return re.opts.pipelineTLS??re.defaults.pipelineTLS}static set pipelineTLS(e){re.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??re.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return re.opts.rootCerts??re.defaults.rootCerts}static set rootCerts(e){re.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??re.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,t){let n=this.wsProxy;if(n===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof n=="function"?n(e,t):`${n}?address=${e}:${t}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,t,n){this.connecting=!0,n&&this.once("connect",n);let s=b(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),i=b((a,u=!1)=>{a.binaryType="arraybuffer",a.addEventListener("error",h=>{this.emit("error",h),this.emit("close")}),a.addEventListener("message",h=>{if(this.tlsState===0){let l=oe.from(h.data);this.emit("data",l)}}),a.addEventListener("close",()=>{this.emit("close")}),u?s():a.addEventListener("open",s)},"configureWebSocket"),o;try{o=this.wsProxyAddrForHost(t,typeof e=="string"?parseInt(e,10):e)}catch(a){this.emit("error",a),this.emit("close");return}try{let a=(this.useSecureWebSocket?"wss:":"ws:")+"//"+o;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(a),i(this.ws);else try{this.ws=new WebSocket(a),i(this.ws)}catch{this.ws=new __unstable_WebSocket(a),i(this.ws)}}catch(a){let u=(this.useSecureWebSocket?"https:":"http:")+"//"+o;fetch(u,{headers:{Upgrade:"websocket"}}).then(h=>{if(this.ws=h.webSocket,this.ws==null)throw a;this.ws.accept(),i(this.ws,!0)}).catch(h=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${h.message}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let t=this.subtls.TrustedCert.fromPEM(this.rootCerts),n=new this.subtls.WebSocketReadQueue(this.ws),s=n.read.bind(n),i=this.rawWrite.bind(this),[o,a]=await this.subtls.startTls(e,t,s,i,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=o,this.tlsWrite=a,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let t=oe.from(e);this.emit("data",t)}}}rawWrite(e){if(!this.coalesceWrites){this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let t=new Uint8Array(this.writeBuffer.length+e.length);t.set(this.writeBuffer),t.set(e,this.writeBuffer.length),this.writeBuffer=t}}write(e,t="utf8",n=s=>{}){return e.length===0?(n(),!0):(typeof e=="string"&&(e=oe.from(e,t)),this.tlsState===0?(this.rawWrite(e),n()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,t,n)}):(this.tlsWrite(e),n()),!0)}end(e=oe.alloc(0),t="utf8",n=()=>{}){return this.write(e,t,()=>{this.ws.close(),n()}),this}destroy(){return this.destroyed=!0,this.end()}},b(rn,"Socket"),ae(rn,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:b((r,e,t)=>{let n;return t?.jwtAuth?n=r.replace(Si,"apiauth."):n=r.replace(Si,"api."),"https://"+n+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:b(r=>r+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),ae(rn,"opts",{}),Bt=rn}),ru=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.NoticeMessage=r.DataRowMessage=r.CommandCompleteMessage=r.ReadyForQueryMessage=r.NotificationResponseMessage=r.BackendKeyDataMessage=r.AuthenticationMD5Password=r.ParameterStatusMessage=r.ParameterDescriptionMessage=r.RowDescriptionMessage=r.Field=r.CopyResponse=r.CopyDataMessage=r.DatabaseError=r.copyDone=r.emptyQuery=r.replicationStart=r.portalSuspended=r.noData=r.closeComplete=r.bindComplete=r.parseComplete=void 0,r.parseComplete={name:"parseComplete",length:5},r.bindComplete={name:"bindComplete",length:5},r.closeComplete={name:"closeComplete",length:5},r.noData={name:"noData",length:5},r.portalSuspended={name:"portalSuspended",length:5},r.replicationStart={name:"replicationStart",length:4},r.emptyQuery={name:"emptyQuery",length:4},r.copyDone={name:"copyDone",length:4};var e=class extends Error{constructor($,Q,ee){super($),this.length=Q,this.name=ee}};b(e,"DatabaseError");var t=e;r.DatabaseError=t;var n=class{constructor($,Q){this.length=$,this.chunk=Q,this.name="copyData"}};b(n,"CopyDataMessage");var s=n;r.CopyDataMessage=s;var i=class{constructor($,Q,ee,ce){this.length=$,this.name=Q,this.binary=ee,this.columnTypes=new Array(ce)}};b(i,"CopyResponse");var o=i;r.CopyResponse=o;var a=class{constructor($,Q,ee,ce,ge,be,ke){this.name=$,this.tableID=Q,this.columnID=ee,this.dataTypeID=ce,this.dataTypeSize=ge,this.dataTypeModifier=be,this.format=ke}};b(a,"Field");var u=a;r.Field=u;var h=class{constructor($,Q){this.length=$,this.fieldCount=Q,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};b(h,"RowDescriptionMessage");var l=h;r.RowDescriptionMessage=l;var p=class{constructor($,Q){this.length=$,this.parameterCount=Q,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};b(p,"ParameterDescriptionMessage");var y=p;r.ParameterDescriptionMessage=y;var x=class{constructor($,Q,ee){this.length=$,this.parameterName=Q,this.parameterValue=ee,this.name="parameterStatus"}};b(x,"ParameterStatusMessage");var g=x;r.ParameterStatusMessage=g;var f=class{constructor($,Q){this.length=$,this.salt=Q,this.name="authenticationMD5Password"}};b(f,"AuthenticationMD5Password");var w=f;r.AuthenticationMD5Password=w;var v=class{constructor($,Q,ee){this.length=$,this.processID=Q,this.secretKey=ee,this.name="backendKeyData"}};b(v,"BackendKeyDataMessage");var S=v;r.BackendKeyDataMessage=S;var E=class{constructor($,Q,ee,ce){this.length=$,this.processId=Q,this.channel=ee,this.payload=ce,this.name="notification"}};b(E,"NotificationResponseMessage");var O=E;r.NotificationResponseMessage=O;var L=class{constructor($,Q){this.length=$,this.status=Q,this.name="readyForQuery"}};b(L,"ReadyForQueryMessage");var _=L;r.ReadyForQueryMessage=_;var P=class{constructor($,Q){this.length=$,this.text=Q,this.name="commandComplete"}};b(P,"CommandCompleteMessage");var N=P;r.CommandCompleteMessage=N;var C=class{constructor($,Q){this.length=$,this.fields=Q,this.name="dataRow",this.fieldCount=Q.length}};b(C,"DataRowMessage");var M=C;r.DataRowMessage=M;var k=class{constructor($,Q){this.length=$,this.message=Q,this.name="notice"}};b(k,"NoticeMessage");var Z=k;r.NoticeMessage=Z}),Om=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.Writer=void 0;var e=class{constructor(s=256){this.size=s,this.offset=5,this.headerPosition=0,this.buffer=oe.allocUnsafe(s)}ensure(s){var i=this.buffer.length-this.offset;if(i<s){var o=this.buffer,a=o.length+(o.length>>1)+s;this.buffer=oe.allocUnsafe(a),o.copy(this.buffer)}}addInt32(s){return this.ensure(4),this.buffer[this.offset++]=s>>>24&255,this.buffer[this.offset++]=s>>>16&255,this.buffer[this.offset++]=s>>>8&255,this.buffer[this.offset++]=s>>>0&255,this}addInt16(s){return this.ensure(2),this.buffer[this.offset++]=s>>>8&255,this.buffer[this.offset++]=s>>>0&255,this}addCString(s){if(!s)this.ensure(1);else{var i=oe.byteLength(s);this.ensure(i+1),this.buffer.write(s,this.offset,"utf-8"),this.offset+=i}return this.buffer[this.offset++]=0,this}addString(s=""){var i=oe.byteLength(s);return this.ensure(i),this.buffer.write(s,this.offset),this.offset+=i,this}add(s){return this.ensure(s.length),s.copy(this.buffer,this.offset),this.offset+=s.length,this}join(s){if(s){this.buffer[this.headerPosition]=s;let i=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(i,this.headerPosition+1)}return this.buffer.slice(s?0:5,this.offset)}flush(s){var i=this.join(s);return this.offset=5,this.headerPosition=0,this.buffer=oe.allocUnsafe(this.size),i}};b(e,"Writer");var t=e;r.Writer=t}),Lm=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.serialize=void 0;var e=Om(),t=new e.Writer,n=b($=>{t.addInt16(3).addInt16(0);for(let ce of Object.keys($))t.addCString(ce).addCString($[ce]);t.addCString("client_encoding").addCString("UTF8");var Q=t.addCString("").flush(),ee=Q.length+4;return new e.Writer().addInt32(ee).add(Q).flush()},"startup"),s=b(()=>{let $=oe.allocUnsafe(8);return $.writeInt32BE(8,0),$.writeInt32BE(80877103,4),$},"requestSsl"),i=b($=>t.addCString($).flush(112),"password"),o=b(function($,Q){return t.addCString($).addInt32(oe.byteLength(Q)).addString(Q),t.flush(112)},"sendSASLInitialResponseMessage"),a=b(function($){return t.addString($).flush(112)},"sendSCRAMClientFinalMessage"),u=b($=>t.addCString($).flush(81),"query"),h=[],l=b($=>{let Q=$.name||"";Q.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",Q,Q.length),console.error("This can cause conflicts and silent errors executing queries"));let ee=$.types||h;for(var ce=ee.length,ge=t.addCString(Q).addCString($.text).addInt16(ce),be=0;be<ce;be++)ge.addInt32(ee[be]);return t.flush(80)},"parse"),p=new e.Writer,y=b(function($,Q){for(let ee=0;ee<$.length;ee++){let ce=Q?Q($[ee],ee):$[ee];ce==null?(t.addInt16(0),p.addInt32(-1)):ce instanceof oe?(t.addInt16(1),p.addInt32(ce.length),p.add(ce)):(t.addInt16(0),p.addInt32(oe.byteLength(ce)),p.addString(ce))}},"writeValues"),x=b(($={})=>{let Q=$.portal||"",ee=$.statement||"",ce=$.binary||!1,ge=$.values||h,be=ge.length;return t.addCString(Q).addCString(ee),t.addInt16(be),y(ge,$.valueMapper),t.addInt16(be),t.add(p.flush()),t.addInt16(ce?1:0),t.flush(66)},"bind"),g=oe.from([69,0,0,0,9,0,0,0,0,0]),f=b($=>{if(!$||!$.portal&&!$.rows)return g;let Q=$.portal||"",ee=$.rows||0,ce=oe.byteLength(Q),ge=4+ce+1+4,be=oe.allocUnsafe(1+ge);return be[0]=69,be.writeInt32BE(ge,1),be.write(Q,5,"utf-8"),be[ce+5]=0,be.writeUInt32BE(ee,be.length-4),be},"execute"),w=b(($,Q)=>{let ee=oe.allocUnsafe(16);return ee.writeInt32BE(16,0),ee.writeInt16BE(1234,4),ee.writeInt16BE(5678,6),ee.writeInt32BE($,8),ee.writeInt32BE(Q,12),ee},"cancel"),v=b(($,Q)=>{let ee=4+oe.byteLength(Q)+1,ce=oe.allocUnsafe(1+ee);return ce[0]=$,ce.writeInt32BE(ee,1),ce.write(Q,5,"utf-8"),ce[ee]=0,ce},"cstringMessage"),S=t.addCString("P").flush(68),E=t.addCString("S").flush(68),O=b($=>$.name?v(68,`${$.type}${$.name||""}`):$.type==="P"?S:E,"describe"),L=b($=>{let Q=`${$.type}${$.name||""}`;return v(67,Q)},"close"),_=b($=>t.add($).flush(100),"copyData"),P=b($=>v(102,$),"copyFail"),N=b($=>oe.from([$,0,0,0,4]),"codeOnlyBuffer"),C=N(72),M=N(83),k=N(88),Z=N(99),J={startup:n,password:i,requestSsl:s,sendSASLInitialResponseMessage:o,sendSCRAMClientFinalMessage:a,query:u,parse:l,bind:x,execute:f,describe:O,close:L,flush:b(()=>C,"flush"),sync:b(()=>M,"sync"),end:b(()=>k,"end"),copyData:_,copyDone:b(()=>Z,"copyDone"),copyFail:P,cancel:w};r.serialize=J}),$m=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferReader=void 0;var e=oe.allocUnsafe(0),t=class{constructor(i=0){this.offset=i,this.buffer=e,this.encoding="utf-8"}setBuffer(i,o){this.offset=i,this.buffer=o}int16(){let i=this.buffer.readInt16BE(this.offset);return this.offset+=2,i}byte(){let i=this.buffer[this.offset];return this.offset++,i}int32(){let i=this.buffer.readInt32BE(this.offset);return this.offset+=4,i}string(i){let o=this.buffer.toString(this.encoding,this.offset,this.offset+i);return this.offset+=i,o}cstring(){let i=this.offset,o=i;for(;this.buffer[o++]!==0;);return this.offset=o,this.buffer.toString(this.encoding,i,o-1)}bytes(i){let o=this.buffer.slice(this.offset,this.offset+i);return this.offset+=i,o}};b(t,"BufferReader");var n=t;r.BufferReader=n}),km=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.Parser=void 0;var e=ru(),t=$m(),n=1,s=4,i=n+s,o=oe.allocUnsafe(0),a=class{constructor(l){if(this.buffer=o,this.bufferLength=0,this.bufferOffset=0,this.reader=new t.BufferReader,l?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=l?.mode||"text"}parse(l,p){this.mergeBuffer(l);let y=this.bufferOffset+this.bufferLength,x=this.bufferOffset;for(;x+i<=y;){let g=this.buffer[x],f=this.buffer.readUInt32BE(x+n),w=n+f;if(w+x<=y){let v=this.handlePacket(x+i,g,f,this.buffer);p(v),x+=w}else break}x===y?(this.buffer=o,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=y-x,this.bufferOffset=x)}mergeBuffer(l){if(this.bufferLength>0){let p=this.bufferLength+l.byteLength;if(p+this.bufferOffset>this.buffer.byteLength){let y;if(p<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)y=this.buffer;else{let x=this.buffer.byteLength*2;for(;p>=x;)x*=2;y=oe.allocUnsafe(x)}this.buffer.copy(y,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=y,this.bufferOffset=0}l.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=p}else this.buffer=l,this.bufferOffset=0,this.bufferLength=l.byteLength}handlePacket(l,p,y,x){switch(p){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(l,y,x);case 67:return this.parseCommandCompleteMessage(l,y,x);case 90:return this.parseReadyForQueryMessage(l,y,x);case 65:return this.parseNotificationMessage(l,y,x);case 82:return this.parseAuthenticationResponse(l,y,x);case 83:return this.parseParameterStatusMessage(l,y,x);case 75:return this.parseBackendKeyData(l,y,x);case 69:return this.parseErrorMessage(l,y,x,"error");case 78:return this.parseErrorMessage(l,y,x,"notice");case 84:return this.parseRowDescriptionMessage(l,y,x);case 116:return this.parseParameterDescriptionMessage(l,y,x);case 71:return this.parseCopyInMessage(l,y,x);case 72:return this.parseCopyOutMessage(l,y,x);case 100:return this.parseCopyData(l,y,x);default:return new e.DatabaseError("received invalid response: "+p.toString(16),y,"error")}}parseReadyForQueryMessage(l,p,y){this.reader.setBuffer(l,y);let x=this.reader.string(1);return new e.ReadyForQueryMessage(p,x)}parseCommandCompleteMessage(l,p,y){this.reader.setBuffer(l,y);let x=this.reader.cstring();return new e.CommandCompleteMessage(p,x)}parseCopyData(l,p,y){let x=y.slice(l,l+(p-4));return new e.CopyDataMessage(p,x)}parseCopyInMessage(l,p,y){return this.parseCopyMessage(l,p,y,"copyInResponse")}parseCopyOutMessage(l,p,y){return this.parseCopyMessage(l,p,y,"copyOutResponse")}parseCopyMessage(l,p,y,x){this.reader.setBuffer(l,y);let g=this.reader.byte()!==0,f=this.reader.int16(),w=new e.CopyResponse(p,x,g,f);for(let v=0;v<f;v++)w.columnTypes[v]=this.reader.int16();return w}parseNotificationMessage(l,p,y){this.reader.setBuffer(l,y);let x=this.reader.int32(),g=this.reader.cstring(),f=this.reader.cstring();return new e.NotificationResponseMessage(p,x,g,f)}parseRowDescriptionMessage(l,p,y){this.reader.setBuffer(l,y);let x=this.reader.int16(),g=new e.RowDescriptionMessage(p,x);for(let f=0;f<x;f++)g.fields[f]=this.parseField();return g}parseField(){let l=this.reader.cstring(),p=this.reader.int32(),y=this.reader.int16(),x=this.reader.int32(),g=this.reader.int16(),f=this.reader.int32(),w=this.reader.int16()===0?"text":"binary";return new e.Field(l,p,y,x,g,f,w)}parseParameterDescriptionMessage(l,p,y){this.reader.setBuffer(l,y);let x=this.reader.int16(),g=new e.ParameterDescriptionMessage(p,x);for(let f=0;f<x;f++)g.dataTypeIDs[f]=this.reader.int32();return g}parseDataRowMessage(l,p,y){this.reader.setBuffer(l,y);let x=this.reader.int16(),g=new Array(x);for(let f=0;f<x;f++){let w=this.reader.int32();g[f]=w===-1?null:this.reader.string(w)}return new e.DataRowMessage(p,g)}parseParameterStatusMessage(l,p,y){this.reader.setBuffer(l,y);let x=this.reader.cstring(),g=this.reader.cstring();return new e.ParameterStatusMessage(p,x,g)}parseBackendKeyData(l,p,y){this.reader.setBuffer(l,y);let x=this.reader.int32(),g=this.reader.int32();return new e.BackendKeyDataMessage(p,x,g)}parseAuthenticationResponse(l,p,y){this.reader.setBuffer(l,y);let x=this.reader.int32(),g={name:"authenticationOk",length:p};switch(x){case 0:break;case 3:g.length===8&&(g.name="authenticationCleartextPassword");break;case 5:if(g.length===12){g.name="authenticationMD5Password";let w=this.reader.bytes(4);return new e.AuthenticationMD5Password(p,w)}break;case 10:g.name="authenticationSASL",g.mechanisms=[];let f;do f=this.reader.cstring(),f&&g.mechanisms.push(f);while(f);break;case 11:g.name="authenticationSASLContinue",g.data=this.reader.string(p-8);break;case 12:g.name="authenticationSASLFinal",g.data=this.reader.string(p-8);break;default:throw new Error("Unknown authenticationOk message type "+x)}return g}parseErrorMessage(l,p,y,x){this.reader.setBuffer(l,y);let g={},f=this.reader.string(1);for(;f!=="\0";)g[f]=this.reader.cstring(),f=this.reader.string(1);let w=g.M,v=x==="notice"?new e.NoticeMessage(p,w):new e.DatabaseError(w,p,x);return v.severity=g.S,v.code=g.C,v.detail=g.D,v.hint=g.H,v.position=g.P,v.internalPosition=g.p,v.internalQuery=g.q,v.where=g.W,v.schema=g.s,v.table=g.t,v.column=g.c,v.dataType=g.d,v.constraint=g.n,v.file=g.F,v.line=g.L,v.routine=g.R,v}};b(a,"Parser");var u=a;r.Parser=u}),nu=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.DatabaseError=r.serialize=r.parse=void 0;var e=ru();Object.defineProperty(r,"DatabaseError",{enumerable:!0,get:b(function(){return e.DatabaseError},"get")});var t=Lm();Object.defineProperty(r,"serialize",{enumerable:!0,get:b(function(){return t.serialize},"get")});var n=km();function s(i,o){let a=new n.Parser;return i.on("data",u=>a.parse(u,o)),new Promise(u=>i.on("end",()=>u()))}b(s,"parse"),r.parse=s}),su={};ht(su,{connect:()=>iu});function iu({socket:r,servername:e}){return r.startTls(e),r}var qm=He(()=>{"use strict";te(),b(iu,"connect")}),ou=de((r,e)=>{"use strict";te();var t=(Li(),Me(eu)),n=Jt().EventEmitter,{parse:s,serialize:i}=nu(),o=i.flush(),a=i.sync(),u=i.end(),h=class extends n{constructor(y){super(),y=y||{},this.stream=y.stream||new t.Socket,this._keepAlive=y.keepAlive,this._keepAliveInitialDelayMillis=y.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=y.ssl||!1,this._ending=!1,this._emitMessage=!1;var x=this;this.on("newListener",function(g){g==="message"&&(x._emitMessage=!0)})}connect(y,x){var g=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(y,x),this.stream.once("connect",function(){g._keepAlive&&g.stream.setKeepAlive(!0,g._keepAliveInitialDelayMillis),g.emit("connect")});let f=b(function(w){g._ending&&(w.code==="ECONNRESET"||w.code==="EPIPE")||g.emit("error",w)},"reportStreamError");if(this.stream.on("error",f),this.stream.on("close",function(){g.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(w){var v=w.toString("utf8");switch(v){case"S":break;case"N":return g.stream.end(),g.emit("error",new Error("The server does not support SSL connections"));default:return g.stream.end(),g.emit("error",new Error("There was an error establishing an SSL connection"))}var S=(qm(),Me(su));let E={socket:g.stream};g.ssl!==!0&&(Object.assign(E,g.ssl),"key"in g.ssl&&(E.key=g.ssl.key)),t.isIP(x)===0&&(E.servername=x);try{g.stream=S.connect(E)}catch(O){return g.emit("error",O)}g.attachListeners(g.stream),g.stream.on("error",f),g.emit("sslconnect")})}attachListeners(y){y.on("end",()=>{this.emit("end")}),s(y,x=>{var g=x.name==="error"?"errorMessage":x.name;this._emitMessage&&this.emit("message",x),this.emit(g,x)})}requestSsl(){this.stream.write(i.requestSsl())}startup(y){this.stream.write(i.startup(y))}cancel(y,x){this._send(i.cancel(y,x))}password(y){this._send(i.password(y))}sendSASLInitialResponseMessage(y,x){this._send(i.sendSASLInitialResponseMessage(y,x))}sendSCRAMClientFinalMessage(y){this._send(i.sendSCRAMClientFinalMessage(y))}_send(y){return this.stream.writable?this.stream.write(y):!1}query(y){this._send(i.query(y))}parse(y){this._send(i.parse(y))}bind(y){this._send(i.bind(y))}execute(y){this._send(i.execute(y))}flush(){this.stream.writable&&this.stream.write(o)}sync(){this._ending=!0,this._send(o),this._send(a)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(u,()=>{this.stream.end()})}close(y){this._send(i.close(y))}describe(y){this._send(i.describe(y))}sendCopyFromChunk(y){this._send(i.copyData(y))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(y){this._send(i.copyFail(y))}};b(h,"Connection");var l=h;e.exports=l}),Mm=de((r,e)=>{"use strict";te();var t=Jt().EventEmitter,n=(Jn(),Me(sn)),s=es(),i=_m(),o=Am(),a=Pi(),u=Oi(),h=Rm(),l=Yn(),p=ou(),y=class extends t{constructor(f){super(),this.connectionParameters=new u(f),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var w=f||{};this._Promise=w.Promise||Zn.Promise,this._types=new a(w.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=w.connection||new p({stream:w.stream,ssl:this.connectionParameters.ssl,keepAlive:w.keepAlive||!1,keepAliveInitialDelayMillis:w.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=w.binary||l.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=w.connectionTimeoutMillis||0}_errorAllQueries(f){let w=b(v=>{he.nextTick(()=>{v.handleError(f,this.connection)})},"enqueueError");this.activeQuery&&(w(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(w),this.queryQueue.length=0}_connect(f){var w=this,v=this.connection;if(this._connectionCallback=f,this._connecting||this._connected){let S=new Error("Client has already been connected. You cannot reuse a client.");he.nextTick(()=>{f(S)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{v._ending=!0,v.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?v.connect(this.host+"/.s.PGSQL."+this.port):v.connect(this.port,this.host),v.on("connect",function(){w.ssl?v.requestSsl():v.startup(w.getStartupConf())}),v.on("sslconnect",function(){v.startup(w.getStartupConf())}),this._attachListeners(v),v.once("end",()=>{let S=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(S),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(S):this._handleErrorEvent(S):this._connectionError||this._handleErrorEvent(S)),he.nextTick(()=>{this.emit("end")})})}connect(f){if(f){this._connect(f);return}return new this._Promise((w,v)=>{this._connect(S=>{S?v(S):w()})})}_attachListeners(f){f.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),f.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),f.on("authenticationSASL",this._handleAuthSASL.bind(this)),f.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),f.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),f.on("backendKeyData",this._handleBackendKeyData.bind(this)),f.on("error",this._handleErrorEvent.bind(this)),f.on("errorMessage",this._handleErrorMessage.bind(this)),f.on("readyForQuery",this._handleReadyForQuery.bind(this)),f.on("notice",this._handleNotice.bind(this)),f.on("rowDescription",this._handleRowDescription.bind(this)),f.on("dataRow",this._handleDataRow.bind(this)),f.on("portalSuspended",this._handlePortalSuspended.bind(this)),f.on("emptyQuery",this._handleEmptyQuery.bind(this)),f.on("commandComplete",this._handleCommandComplete.bind(this)),f.on("parseComplete",this._handleParseComplete.bind(this)),f.on("copyInResponse",this._handleCopyInResponse.bind(this)),f.on("copyData",this._handleCopyData.bind(this)),f.on("notification",this._handleNotification.bind(this))}_checkPgPass(f){let w=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(v=>{if(v!==void 0){if(typeof v!="string"){w.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=v}else this.connectionParameters.password=this.password=null;f()}).catch(v=>{w.emit("error",v)}):this.password!==null?f():o(this.connectionParameters,v=>{v!==void 0&&(this.connectionParameters.password=this.password=v),f()})}_handleAuthCleartextPassword(f){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(f){this._checkPgPass(()=>{let w=s.postgresMd5PasswordHash(this.user,this.password,f.salt);this.connection.password(w)})}_handleAuthSASL(f){this._checkPgPass(()=>{this.saslSession=i.startSession(f.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(f){i.continueSession(this.saslSession,this.password,f.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(f){i.finalizeSession(this.saslSession,f.data),this.saslSession=null}_handleBackendKeyData(f){this.processID=f.processID,this.secretKey=f.secretKey}_handleReadyForQuery(f){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:w}=this;this.activeQuery=null,this.readyForQuery=!0,w&&w.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(f){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(f);this.emit("error",f)}}_handleErrorEvent(f){if(this._connecting)return this._handleErrorWhileConnecting(f);this._queryable=!1,this._errorAllQueries(f),this.emit("error",f)}_handleErrorMessage(f){if(this._connecting)return this._handleErrorWhileConnecting(f);let w=this.activeQuery;if(!w){this._handleErrorEvent(f);return}this.activeQuery=null,w.handleError(f,this.connection)}_handleRowDescription(f){this.activeQuery.handleRowDescription(f)}_handleDataRow(f){this.activeQuery.handleDataRow(f)}_handlePortalSuspended(f){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(f){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(f){this.activeQuery.handleCommandComplete(f,this.connection)}_handleParseComplete(f){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(f){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(f){this.activeQuery.handleCopyData(f,this.connection)}_handleNotification(f){this.emit("notification",f)}_handleNotice(f){this.emit("notice",f)}getStartupConf(){var f=this.connectionParameters,w={user:f.user,database:f.database},v=f.application_name||f.fallback_application_name;return v&&(w.application_name=v),f.replication&&(w.replication=""+f.replication),f.statement_timeout&&(w.statement_timeout=String(parseInt(f.statement_timeout,10))),f.lock_timeout&&(w.lock_timeout=String(parseInt(f.lock_timeout,10))),f.idle_in_transaction_session_timeout&&(w.idle_in_transaction_session_timeout=String(parseInt(f.idle_in_transaction_session_timeout,10))),f.options&&(w.options=f.options),w}cancel(f,w){if(f.activeQuery===w){var v=this.connection;this.host&&this.host.indexOf("/")===0?v.connect(this.host+"/.s.PGSQL."+this.port):v.connect(this.port,this.host),v.on("connect",function(){v.cancel(f.processID,f.secretKey)})}else f.queryQueue.indexOf(w)!==-1&&f.queryQueue.splice(f.queryQueue.indexOf(w),1)}setTypeParser(f,w,v){return this._types.setTypeParser(f,w,v)}getTypeParser(f,w){return this._types.getTypeParser(f,w)}escapeIdentifier(f){return'"'+f.replace(/"/g,'""')+'"'}escapeLiteral(f){for(var w=!1,v="'",S=0;S<f.length;S++){var E=f[S];E==="'"?v+=E+E:E==="\\"?(v+=E+E,w=!0):v+=E}return v+="'",w===!0&&(v=" E"+v),v}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let f=this.activeQuery.submit(this.connection);f&&he.nextTick(()=>{this.activeQuery.handleError(f,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(f,w,v){var S,E,O,L,_;if(f==null)throw new TypeError("Client was passed a null or undefined query");return typeof f.submit=="function"?(O=f.query_timeout||this.connectionParameters.query_timeout,E=S=f,typeof w=="function"&&(S.callback=S.callback||w)):(O=this.connectionParameters.query_timeout,S=new h(f,w,v),S.callback||(E=new this._Promise((P,N)=>{S.callback=(C,M)=>C?N(C):P(M)}))),O&&(_=S.callback,L=setTimeout(()=>{var P=new Error("Query read timeout");he.nextTick(()=>{S.handleError(P,this.connection)}),_(P),S.callback=()=>{};var N=this.queryQueue.indexOf(S);N>-1&&this.queryQueue.splice(N,1),this._pulseQueryQueue()},O),S.callback=(P,N)=>{clearTimeout(L),_(P,N)}),this.binary&&!S.binary&&(S.binary=!0),S._result&&!S._result._types&&(S._result._types=this._types),this._queryable?this._ending?(he.nextTick(()=>{S.handleError(new Error("Client was closed and is not queryable"),this.connection)}),E):(this.queryQueue.push(S),this._pulseQueryQueue(),E):(he.nextTick(()=>{S.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),E)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(f){if(this._ending=!0,!this.connection._connecting)if(f)f();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),f)this.connection.once("end",f);else return new this._Promise(w=>{this.connection.once("end",w)})}};b(y,"Client");var x=y;x.Query=h,e.exports=x}),Bm=de((r,e)=>{"use strict";te();var t=Jt().EventEmitter,n=b(function(){},"NOOP"),s=b((g,f)=>{let w=g.findIndex(f);return w===-1?void 0:g.splice(w,1)[0]},"removeWhere"),i=class{constructor(f,w,v){this.client=f,this.idleListener=w,this.timeoutId=v}};b(i,"IdleItem");var o=i,a=class{constructor(f){this.callback=f}};b(a,"PendingItem");var u=a;function h(){throw new Error("Release called on client which has already been released to the pool.")}b(h,"throwOnDoubleRelease");function l(g,f){if(f)return{callback:f,result:void 0};let w,v,S=b(function(O,L){O?w(O):v(L)},"cb"),E=new g(function(O,L){v=O,w=L}).catch(O=>{throw Error.captureStackTrace(O),O});return{callback:S,result:E}}b(l,"promisify");function p(g,f){return b(function w(v){v.client=f,f.removeListener("error",w),f.on("error",()=>{g.log("additional client error after disconnection due to error",v)}),g._remove(f),g.emit("error",v,f)},"idleListener")}b(p,"makeIdleListener");var y=class extends t{constructor(f,w){super(),this.options=Object.assign({},f),f!=null&&"password"in f&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:f.password}),f!=null&&f.ssl&&f.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||w||$i().Client,this.Promise=this.options.Promise||Zn.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(w=>{this._remove(w.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let f=this._pendingQueue.shift();if(this._idle.length){let w=this._idle.pop();clearTimeout(w.timeoutId);let v=w.client;v.ref&&v.ref();let S=w.idleListener;return this._acquireClient(v,f,S,!1)}if(!this._isFull())return this.newClient(f);throw new Error("unexpected condition")}_remove(f){let w=s(this._idle,v=>v.client===f);w!==void 0&&clearTimeout(w.timeoutId),this._clients=this._clients.filter(v=>v!==f),f.end(),this.emit("remove",f)}connect(f){if(this.ending){let S=new Error("Cannot use a pool after calling end on the pool");return f?f(S):this.Promise.reject(S)}let w=l(this.Promise,f),v=w.result;if(this._isFull()||this._idle.length){if(this._idle.length&&he.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new u(w.callback)),v;let S=b((L,_,P)=>{clearTimeout(O),w.callback(L,_,P)},"queueCallback"),E=new u(S),O=setTimeout(()=>{s(this._pendingQueue,L=>L.callback===S),E.timedOut=!0,w.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(E),v}return this.newClient(new u(w.callback)),v}newClient(f){let w=new this.Client(this.options);this._clients.push(w);let v=p(this,w);this.log("checking client timeout");let S,E=!1;this.options.connectionTimeoutMillis&&(S=setTimeout(()=>{this.log("ending client due to timeout"),E=!0,w.connection?w.connection.stream.destroy():w.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),w.connect(O=>{if(S&&clearTimeout(S),w.on("error",v),O)this.log("client failed to connect",O),this._clients=this._clients.filter(L=>L!==w),E&&(O.message="Connection terminated due to connection timeout"),this._pulseQueue(),f.timedOut||f.callback(O,void 0,n);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let L=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(w),this._idle.findIndex(_=>_.client===w)!==-1&&this._acquireClient(w,new u((_,P,N)=>N()),v,!1)},this.options.maxLifetimeSeconds*1e3);L.unref(),w.once("end",()=>clearTimeout(L))}return this._acquireClient(w,f,v,!0)}})}_acquireClient(f,w,v,S){S&&this.emit("connect",f),this.emit("acquire",f),f.release=this._releaseOnce(f,v),f.removeListener("error",v),w.timedOut?S&&this.options.verify?this.options.verify(f,f.release):f.release():S&&this.options.verify?this.options.verify(f,E=>{if(E)return f.release(E),w.callback(E,void 0,n);w.callback(void 0,f,f.release)}):w.callback(void 0,f,f.release)}_releaseOnce(f,w){let v=!1;return S=>{v&&h(),v=!0,this._release(f,w,S)}}_release(f,w,v){if(f.on("error",w),f._poolUseCount=(f._poolUseCount||0)+1,this.emit("release",v,f),v||this.ending||!f._queryable||f._ending||f._poolUseCount>=this.options.maxUses){f._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(f),this._pulseQueue();return}if(this._expired.has(f)){this.log("remove expired client"),this._expired.delete(f),this._remove(f),this._pulseQueue();return}let S;this.options.idleTimeoutMillis&&(S=setTimeout(()=>{this.log("remove idle client"),this._remove(f)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&S.unref()),this.options.allowExitOnIdle&&f.unref(),this._idle.push(new o(f,w,S)),this._pulseQueue()}query(f,w,v){if(typeof f=="function"){let E=l(this.Promise,f);return Ti(function(){return E.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),E.result}typeof w=="function"&&(v=w,w=void 0);let S=l(this.Promise,v);return v=S.callback,this.connect((E,O)=>{if(E)return v(E);let L=!1,_=b(P=>{L||(L=!0,O.release(P),v(P))},"onError");O.once("error",_),this.log("dispatching query");try{O.query(f,w,(P,N)=>{if(this.log("query dispatched"),O.removeListener("error",_),!L)return L=!0,O.release(P),P?v(P):v(void 0,N)})}catch(P){return O.release(P),v(P)}}),S.result}end(f){if(this.log("ending"),this.ending){let v=new Error("Called end on pool more than once");return f?f(v):this.Promise.reject(v)}this.ending=!0;let w=l(this.Promise,f);return this._endCallback=w.callback,this._pulseQueue(),w.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((f,w)=>f+(this._expired.has(w)?1:0),0)}get totalCount(){return this._clients.length}};b(y,"Pool");var x=y;e.exports=x}),au={};ht(au,{default:()=>cu});var cu,jm=He(()=>{"use strict";te(),cu={}}),Dm=de((r,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),Fm=de((r,e)=>{"use strict";te();var t=Jt().EventEmitter,n=(Jn(),Me(sn)),s=es(),i=e.exports=function(a,u,h){t.call(this),a=s.normalizeQueryConfig(a,u,h),this.text=a.text,this.values=a.values,this.name=a.name,this.callback=a.callback,this.state="new",this._arrayMode=a.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(l){l==="row"&&(this._emitRowEvents=!0)}.bind(this))};n.inherits(i,t);var o={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(a){var u=this.native.pq.resultErrorFields();if(u)for(var h in u){var l=o[h]||h;a[l]=u[h]}this.callback?this.callback(a):this.emit("error",a),this.state="error"},i.prototype.then=function(a,u){return this._getPromise().then(a,u)},i.prototype.catch=function(a){return this._getPromise().catch(a)},i.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(a,u){this._once("end",a),this._once("error",u)}.bind(this)),this._promise)},i.prototype.submit=function(a){this.state="running";var u=this;this.native=a.native,a.native.arrayMode=this._arrayMode;var h=b(function(y,x,g){if(a.native.arrayMode=!1,Ti(function(){u.emit("_done")}),y)return u.handleError(y);u._emitRowEvents&&(g.length>1?x.forEach((f,w)=>{f.forEach(v=>{u.emit("row",v,g[w])})}):x.forEach(function(f){u.emit("row",f,g)})),u.state="end",u.emit("end",g),u.callback&&u.callback(null,g)},"after");if(he.domain&&(h=he.domain.bind(h)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var l=(this.values||[]).map(s.prepareValue);if(a.namedQueries[this.name]){if(this.text&&a.namedQueries[this.name]!==this.text){let y=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return h(y)}return a.native.execute(this.name,l,h)}return a.native.prepare(this.name,this.text,l.length,function(y){return y?h(y):(a.namedQueries[u.name]=u.text,u.native.execute(u.name,l,h))})}else if(this.values){if(!Array.isArray(this.values)){let y=new Error("Query values must be an array");return h(y)}var p=this.values.map(s.prepareValue);a.native.query(this.text,p,h)}else a.native.query(this.text,h)}}),Qm=de((r,e)=>{"use strict";te();var t=(jm(),Me(au)),n=Pi(),s=Dm(),i=Jt().EventEmitter,o=(Jn(),Me(sn)),a=Oi(),u=Fm(),h=e.exports=function(l){i.call(this),l=l||{},this._Promise=l.Promise||Zn.Promise,this._types=new n(l.types),this.native=new t({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var p=this.connectionParameters=new a(l);this.user=p.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:p.password}),this.database=p.database,this.host=p.host,this.port=p.port,this.namedQueries={}};h.Query=u,o.inherits(h,i),h.prototype._errorAllQueries=function(l){let p=b(y=>{he.nextTick(()=>{y.native=this.native,y.handleError(l)})},"enqueueError");this._hasActiveQuery()&&(p(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(p),this._queryQueue.length=0},h.prototype._connect=function(l){var p=this;if(this._connecting){he.nextTick(()=>l(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(y,x){if(y)return l(y);p.native.connect(x,function(g){if(g)return p.native.end(),l(g);p._connected=!0,p.native.on("error",function(f){p._queryable=!1,p._errorAllQueries(f),p.emit("error",f)}),p.native.on("notification",function(f){p.emit("notification",{channel:f.relname,payload:f.extra})}),p.emit("connect"),p._pulseQueryQueue(!0),l()})})},h.prototype.connect=function(l){if(l){this._connect(l);return}return new this._Promise((p,y)=>{this._connect(x=>{x?y(x):p()})})},h.prototype.query=function(l,p,y){var x,g,f,w,v;if(l==null)throw new TypeError("Client was passed a null or undefined query");if(typeof l.submit=="function")f=l.query_timeout||this.connectionParameters.query_timeout,g=x=l,typeof p=="function"&&(l.callback=p);else if(f=this.connectionParameters.query_timeout,x=new u(l,p,y),!x.callback){let S,E;g=new this._Promise((O,L)=>{S=O,E=L}),x.callback=(O,L)=>O?E(O):S(L)}return f&&(v=x.callback,w=setTimeout(()=>{var S=new Error("Query read timeout");he.nextTick(()=>{x.handleError(S,this.connection)}),v(S),x.callback=()=>{};var E=this._queryQueue.indexOf(x);E>-1&&this._queryQueue.splice(E,1),this._pulseQueryQueue()},f),x.callback=(S,E)=>{clearTimeout(w),v(S,E)}),this._queryable?this._ending?(x.native=this.native,he.nextTick(()=>{x.handleError(new Error("Client was closed and is not queryable"))}),g):(this._queryQueue.push(x),this._pulseQueryQueue(),g):(x.native=this.native,he.nextTick(()=>{x.handleError(new Error("Client has encountered a connection error and is not queryable"))}),g)},h.prototype.end=function(l){var p=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,l));var y;return l||(y=new this._Promise(function(x,g){l=b(f=>f?g(f):x(),"cb")})),this.native.end(function(){p._errorAllQueries(new Error("Connection terminated")),he.nextTick(()=>{p.emit("end"),l&&l()})}),y},h.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},h.prototype._pulseQueryQueue=function(l){if(this._connected&&!this._hasActiveQuery()){var p=this._queryQueue.shift();if(!p){l||this.emit("drain");return}this._activeQuery=p,p.submit(this);var y=this;p.once("_done",function(){y._pulseQueryQueue()})}},h.prototype.cancel=function(l){this._activeQuery===l?this.native.cancel(function(){}):this._queryQueue.indexOf(l)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(l),1)},h.prototype.ref=function(){},h.prototype.unref=function(){},h.prototype.setTypeParser=function(l,p,y){return this._types.setTypeParser(l,p,y)},h.prototype.getTypeParser=function(l,p){return this._types.getTypeParser(l,p)}}),Rc=de((r,e)=>{"use strict";te(),e.exports=Qm()}),$i=de((r,e)=>{"use strict";te();var t=Mm(),n=Yn(),s=ou(),i=Bm(),{DatabaseError:o}=nu(),a=b(h=>{var l;return l=class extends i{constructor(p){super(p,h)}},b(l,"BoundPool"),l},"poolFactory"),u=b(function(h){this.defaults=n,this.Client=h,this.Query=this.Client.Query,this.Pool=a(this.Client),this._pools=[],this.Connection=s,this.types=Xn(),this.DatabaseError=o},"PG");typeof he.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new u(Rc()):(e.exports=new u(t),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var h=null;try{h=new u(Rc())}catch(l){if(l.code!=="MODULE_NOT_FOUND")throw l}return Object.defineProperty(e.exports,"native",{value:h}),h}}))});te();var uu=Tr($i());Li();te();Li();Yc();var Um=Tr(es()),Vm=Tr(Pi());function lu(r){return r instanceof oe?"\\x"+r.toString("hex"):r}b(lu,"encodeBuffersAsBytea");var fu=class hu extends Error{constructor(e){super(e),ae(this,"name","NeonDbError"),ae(this,"severity"),ae(this,"code"),ae(this,"detail"),ae(this,"hint"),ae(this,"position"),ae(this,"internalPosition"),ae(this,"internalQuery"),ae(this,"where"),ae(this,"schema"),ae(this,"table"),ae(this,"column"),ae(this,"dataType"),ae(this,"constraint"),ae(this,"file"),ae(this,"line"),ae(this,"routine"),ae(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,hu)}};b(fu,"NeonDbError");var _r=fu,Oc="transaction() expects an array of queries, or a function returning an array of queries",zm=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function du(r,{arrayMode:e,fullResults:t,fetchOptions:n,isolationLevel:s,readOnly:i,deferrable:o,queryCallback:a,resultCallback:u,authToken:h}={}){if(!r)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let l;try{l=Ri(r)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(r))}let{protocol:p,username:y,hostname:x,port:g,pathname:f}=l;if(p!=="postgres:"&&p!=="postgresql:"||!y||!x||!f)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function w(S,...E){let O,L;if(typeof S=="string")O=S,L=E[1],E=E[0]??[];else{O="";for(let P=0;P<S.length;P++)O+=S[P],P<E.length&&(O+="$"+(P+1))}E=E.map(P=>lu((0,Um.prepareValue)(P)));let _={query:O,params:E};return a&&a(_),pu(v,_,L)}b(w,"resolve"),w.transaction=async(S,E)=>{if(typeof S=="function"&&(S=S(w)),!Array.isArray(S))throw new Error(Oc);S.forEach(_=>{if(_[Symbol.toStringTag]!=="NeonQueryPromise")throw new Error(Oc)});let O=S.map(_=>_.parameterizedQuery),L=S.map(_=>_.opts??{});return v(O,L,E)};async function v(S,E,O){let{fetchEndpoint:L,fetchFunction:_}=Bt,P=Array.isArray(S)?{queries:S}:S,N=n??{},C=e??!1,M=t??!1,k=s,Z=i,J=o;O!==void 0&&(O.fetchOptions!==void 0&&(N={...N,...O.fetchOptions}),O.arrayMode!==void 0&&(C=O.arrayMode),O.fullResults!==void 0&&(M=O.fullResults),O.isolationLevel!==void 0&&(k=O.isolationLevel),O.readOnly!==void 0&&(Z=O.readOnly),O.deferrable!==void 0&&(J=O.deferrable)),E!==void 0&&!Array.isArray(E)&&E.fetchOptions!==void 0&&(N={...N,...E.fetchOptions});let $=h;!Array.isArray(E)&&E?.authToken!==void 0&&($=E.authToken);let Q=typeof L=="function"?L(x,g,{jwtAuth:$!==void 0}):L,ee={"Neon-Connection-String":r,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},ce=await mu($);ce&&(ee.Authorization=`Bearer ${ce}`),Array.isArray(S)&&(k!==void 0&&(ee["Neon-Batch-Isolation-Level"]=k),Z!==void 0&&(ee["Neon-Batch-Read-Only"]=String(Z)),J!==void 0&&(ee["Neon-Batch-Deferrable"]=String(J)));let ge;try{ge=await(_??fetch)(Q,{method:"POST",body:JSON.stringify(P),headers:ee,...N})}catch(be){let ke=new _r(`Error connecting to database: ${be.message}`);throw ke.sourceError=be,ke}if(ge.ok){let be=await ge.json();if(Array.isArray(S)){let ke=be.results;if(!Array.isArray(ke))throw new _r("Neon internal error: unexpected result format");return ke.map((ve,Ae)=>{let Ht=E[Ae]??{},Yr=Ht.arrayMode??C,en=Ht.fullResults??M;return Ei(ve,{arrayMode:Yr,fullResults:en,parameterizedQuery:S[Ae],resultCallback:u,types:Ht.types})})}else{let ke=E??{},ve=ke.arrayMode??C,Ae=ke.fullResults??M;return Ei(be,{arrayMode:ve,fullResults:Ae,parameterizedQuery:S,resultCallback:u,types:ke.types})}}else{let{status:be}=ge;if(be===400){let ke=await ge.json(),ve=new _r(ke.message);for(let Ae of zm)ve[Ae]=ke[Ae]??void 0;throw ve}else{let ke=await ge.text();throw new _r(`Server error (HTTP status ${be}): ${ke}`)}}}return b(v,"execute"),w}b(du,"neon");function pu(r,e,t){return{[Symbol.toStringTag]:"NeonQueryPromise",parameterizedQuery:e,opts:t,then:b((n,s)=>r(e,t).then(n,s),"then"),catch:b(n=>r(e,t).catch(n),"catch"),finally:b(n=>r(e,t).finally(n),"finally")}}b(pu,"createNeonQueryPromise");function Ei(r,{arrayMode:e,fullResults:t,parameterizedQuery:n,resultCallback:s,types:i}){let o=new Vm.default(i),a=r.fields.map(l=>l.name),u=r.fields.map(l=>o.getTypeParser(l.dataTypeID)),h=e===!0?r.rows.map(l=>l.map((p,y)=>p===null?null:u[y](p))):r.rows.map(l=>Object.fromEntries(l.map((p,y)=>[a[y],p===null?null:u[y](p)])));return s&&s(n,r,h,{arrayMode:e,fullResults:t}),t?(r.viaNeonFetch=!0,r.rowAsArray=e,r.rows=h,r._parsers=u,r._types=o,r):h}b(Ei,"processQueryResult");async function mu(r){if(typeof r=="string")return r;if(typeof r=="function")try{return await Promise.resolve(r())}catch(e){let t=new _r("Error getting auth token.");throw e instanceof Error&&(t=new _r(`Error getting auth token: ${e.message}`)),t}}b(mu,"getAuthToken");var Km=Tr(Oi()),Cr=Tr($i()),gu=class extends uu.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:t}=this;t.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&t.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let n=this.config?.host!==void 0||this.config?.connectionString!==void 0||he.env.PGHOST!==void 0,s=he.env.USER??he.env.USERNAME;if(!n&&this.host==="localhost"&&this.user===s&&this.database===s&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${s}, db: ${s}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let i=super.connect(e),o=t.pipelineTLS&&this.ssl,a=t.pipelineConnect==="password";if(!o&&!t.pipelineConnect)return i;let u=this.connection;if(o&&u.on("connect",()=>u.stream.emit("data","S")),a){u.removeAllListeners("authenticationCleartextPassword"),u.removeAllListeners("readyForQuery"),u.once("readyForQuery",()=>u.on("readyForQuery",this._handleReadyForQuery.bind(this)));let h=this.ssl?"sslconnect":"connect";u.on(h,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return i}async _handleAuthSASLContinue(e){let t=this.saslSession,n=this.password,s=e.data;if(t.message!=="SASLInitialResponse"||typeof n!="string"||typeof s!="string")throw new Error("SASL: protocol error");let i=Object.fromEntries(s.split(",").map(ce=>{if(!/^.=/.test(ce))throw new Error("SASL: Invalid attribute pair entry");let ge=ce[0],be=ce.substring(2);return[ge,be]})),o=i.r,a=i.s,u=i.i;if(!o||!/^[!-+--~]+$/.test(o))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!a||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(a))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!u||!/^[1-9][0-9]*$/.test(u))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!o.startsWith(t.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(o.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let h=parseInt(u,10),l=oe.from(a,"base64"),p=new TextEncoder,y=p.encode(n),x=await je.subtle.importKey("raw",y,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),g=new Uint8Array(await je.subtle.sign("HMAC",x,oe.concat([l,oe.from([0,0,0,1])]))),f=g;for(var w=0;w<h-1;w++)g=new Uint8Array(await je.subtle.sign("HMAC",x,g)),f=oe.from(f.map((ce,ge)=>f[ge]^g[ge]));let v=f,S=await je.subtle.importKey("raw",v,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),E=new Uint8Array(await je.subtle.sign("HMAC",S,p.encode("Client Key"))),O=await je.subtle.digest("SHA-256",E),L="n=*,r="+t.clientNonce,_="r="+o+",s="+a+",i="+h,P="c=biws,r="+o,N=L+","+_+","+P,C=await je.subtle.importKey("raw",O,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var M=new Uint8Array(await je.subtle.sign("HMAC",C,p.encode(N))),k=oe.from(E.map((ce,ge)=>E[ge]^M[ge])),Z=k.toString("base64");let J=await je.subtle.importKey("raw",v,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),$=await je.subtle.sign("HMAC",J,p.encode("Server Key")),Q=await je.subtle.importKey("raw",$,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var ee=oe.from(await je.subtle.sign("HMAC",Q,p.encode(N)));t.message="SASLResponse",t.serverSignature=ee.toString("base64"),t.response=P+",p="+Z,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};b(gu,"NeonClient");var Gm=gu;function yu(r,e){if(e)return{callback:e,result:void 0};let t,n,s=b(function(o,a){o?t(o):n(a)},"cb"),i=new r(function(o,a){n=o,t=a});return{callback:s,result:i}}b(yu,"promisify");var bu=class extends uu.Pool{constructor(){super(...arguments),ae(this,"Client",Gm),ae(this,"hasFetchUnsupportedListeners",!1)}on(e,t){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,t)}query(e,t,n){if(!Bt.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,t,n);typeof t=="function"&&(n=t,t=void 0);let s=yu(this.Promise,n);n=s.callback;try{let i=new Km.default(this.options),o=encodeURIComponent,a=encodeURI,u=`postgresql://${o(i.user)}:${o(i.password)}@${o(i.host)}/${a(i.database)}`,h=typeof e=="string"?e:e.text,l=t??e.values??[];du(u,{fullResults:!0,arrayMode:e.rowMode==="array"})(h,l,{types:e.types??this.options?.types}).then(p=>n(void 0,p)).catch(p=>n(p))}catch(i){n(i)}return s.result}};b(bu,"NeonPool");var It=bu,E2=Cr.ClientBase,T2=Cr.Connection,C2=Cr.DatabaseError,A2=Cr.Query,I2=Cr.defaults,dt=Cr.types;var T=Symbol.for("drizzle:entityKind"),O2=Symbol.for("drizzle:hasOwnEntityKind");function q(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,T))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(T in t&&t[T]===e[T])return!0;t=Object.getPrototypeOf(t)}return!1}var ki=class{static[T]="ConsoleLogWriter";write(e){console.log(e)}},ts=class{static[T]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new ki}logQuery(e,t){let n=t.map(i=>{try{return JSON.stringify(i)}catch{return String(i)}}),s=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${e}${s}`)}},rs=class{static[T]="NoopLogger";logQuery(){}};var De=class{static[T]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}};var ye=class{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static[T]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var ns=class{static[T]="ColumnBuilder";config;constructor(e,t,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var pt=Symbol.for("drizzle:Name");var ss=class{static[T]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:n,columns:s,foreignColumns:i}=e();return{name:n,columns:s,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new qi(e,this)}},qi=class{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[T]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),s=t.map(a=>a.name),i=n.map(a=>a.name),o=[this.table[pt],...s,n[0].table[pt],...i];return e??`${o.join("_")}_fk`}};function is(r,...e){return r(...e)}function ji(r,e){return`${r[pt]}_${e.join("_")}_unique`}var Mi=class{constructor(e,t){this.name=t,this.columns=e}static[T]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new Bi(e,this.columns,this.nullsNotDistinctConfig,this.name)}},xu=class{static[T]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new Mi(e,this.name)}},Bi=class{constructor(e,t,n,s){this.table=e,this.columns=t,this.name=s??ji(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=n}static[T]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function wu(r,e,t){for(let n=e;n<r.length;n++){let s=r[n];if(s==="\\"){n++;continue}if(s==='"')return[r.slice(e,n).replace(/\\/g,""),n+1];if(!t&&(s===","||s==="}"))return[r.slice(e,n).replace(/\\/g,""),n]}return[r.slice(e).replace(/\\/g,""),r.length]}function vu(r,e=0){let t=[],n=e,s=!1;for(;n<r.length;){let i=r[n];if(i===","){(s||n===e)&&t.push(""),s=!0,n++;continue}if(s=!1,i==="\\"){n+=2;continue}if(i==='"'){let[u,h]=wu(r,n+1,!0);t.push(u),n=h;continue}if(i==="}")return[t,n+1];if(i==="{"){let[u,h]=vu(r,n+1);t.push(u),n=h;continue}let[o,a]=wu(r,n,!1);t.push(o),n=a}return[t,n]}function Su(r){let[e]=vu(r,1);return e}function Di(r){return`{${r.map(e=>Array.isArray(e)?Di(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var X=class extends ns{foreignKeyConfigs=[];static[T]="PgColumnBuilder";array(e){return new Qi(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:s})=>is((i,o)=>{let a=new ss(()=>{let u=i();return{columns:[e],foreignColumns:[u]}});return o.onUpdate&&a.onUpdate(o.onUpdate),o.onDelete&&a.onDelete(o.onDelete),a.build(t)},n,s))}buildExtraConfigColumn(e){return new Fi(e,this.config)}},F=class extends ye{constructor(e,t){t.uniqueName||(t.uniqueName=ji(e,[t.name])),super(e,t),this.table=e}static[T]="PgColumn"},Fi=class extends F{static[T]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},Ar=class{static[T]="IndexedColumn";constructor(e,t,n,s){this.name=e,this.keyAsName=t,this.type=n,this.indexConfig=s}name;keyAsName;type;indexConfig},Qi=class extends X{static[T]="PgArrayBuilder";constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new Ui(e,this.config,t)}},Ui=class r extends F{constructor(e,t,n,s){super(e,t),this.baseColumn=n,this.range=s,this.size=t.size}size;static[T]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=Su(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){let n=e.map(s=>s===null?null:q(this.baseColumn,r)?this.baseColumn.mapToDriverValue(s,!0):this.baseColumn.mapToDriverValue(s));return t?n:Di(n)}};var _u=Symbol.for("drizzle:isPgEnum");function Tu(r){return!!r&&typeof r=="function"&&_u in r&&r[_u]===!0}var Eu=class extends X{static[T]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new Vi(e,this.config)}},Vi=class extends F{static[T]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}};var Oe=class{static[T]="Subquery";constructor(e,t,n,s=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:s}}},Ir=class extends Oe{static[T]="WithSubquery"};var Cu="0.39.1";var zi,Ki,Le={startActiveSpan(r,e){return zi?(Ki||(Ki=zi.trace.getTracer("drizzle-orm",Cu)),is((t,n)=>n.startActiveSpan(r,s=>{try{return e(s)}catch(i){throw s.setStatus({code:t.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{s.end()}}),zi,Ki)):e()}};var we=Symbol.for("drizzle:ViewBaseConfig");var os=Symbol.for("drizzle:Schema"),as=Symbol.for("drizzle:Columns"),Au=Symbol.for("drizzle:ExtraConfigColumns"),Gi=Symbol.for("drizzle:OriginalName"),Wi=Symbol.for("drizzle:BaseName"),on=Symbol.for("drizzle:IsAlias"),Iu=Symbol.for("drizzle:ExtraConfigBuilder"),Nu=Symbol.for("drizzle:IsDrizzleTable"),z=class{static[T]="Table";static Symbol={Name:pt,Schema:os,OriginalName:Gi,Columns:as,ExtraConfigColumns:Au,BaseName:Wi,IsAlias:on,ExtraConfigBuilder:Iu};[pt];[Gi];[os];[as];[Au];[Wi];[on]=!1;[Nu]=!0;[Iu]=void 0;constructor(e,t,n){this[pt]=this[Gi]=e,this[os]=t,this[Wi]=n}};function Hi(r){return typeof r=="object"&&r!==null&&Nu in r}function Ze(r){return r[pt]}function Xt(r){return`${r[os]??"public"}.${r[pt]}`}var Pu=class{static[T]="FakePrimitiveParam"};function Zi(r){return r!=null&&typeof r.getSQL=="function"}function Wm(r){let e={sql:"",params:[]};for(let t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}var $e=class{static[T]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new K([this])}},K=class r{constructor(e){this.queryChunks=e}static[T]="SQL";decoder=Ou;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Le.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:s,escapeName:i,escapeParam:o,prepareTyping:a,inlineParams:u,paramStartIndex:h}=n;return Wm(e.map(l=>{if(q(l,$e))return{sql:l.value.join(""),params:[]};if(q(l,an))return{sql:i(l.value),params:[]};if(l===void 0)return{sql:"",params:[]};if(Array.isArray(l)){let p=[new $e("(")];for(let[y,x]of l.entries())p.push(x),y<l.length-1&&p.push(new $e(", "));return p.push(new $e(")")),this.buildQueryFromSourceParams(p,n)}if(q(l,r))return this.buildQueryFromSourceParams(l.queryChunks,{...n,inlineParams:u||l.shouldInlineParams});if(q(l,z)){let p=l[z.Symbol.Schema],y=l[z.Symbol.Name];return{sql:p===void 0||l[on]?i(y):i(p)+"."+i(y),params:[]}}if(q(l,ye)){let p=s.getColumnCasing(l);if(t.invokeSource==="indexes")return{sql:i(p),params:[]};let y=l.table[z.Symbol.Schema];return{sql:l.table[on]||y===void 0?i(l.table[z.Symbol.Name])+"."+i(p):i(y)+"."+i(l.table[z.Symbol.Name])+"."+i(p),params:[]}}if(q(l,Ve)){let p=l[we].schema,y=l[we].name;return{sql:p===void 0||l[we].isAlias?i(y):i(p)+"."+i(y),params:[]}}if(q(l,Je)){if(q(l.value,Nt))return{sql:o(h.value++,l),params:[l],typings:["none"]};let p=l.value===null?null:l.encoder.mapToDriverValue(l.value);if(q(p,r))return this.buildQueryFromSourceParams([p],n);if(u)return{sql:this.mapInlineParam(p,n),params:[]};let y=["none"];return a&&(y=[a(l.encoder)]),{sql:o(h.value++,p),params:[p],typings:y}}return q(l,Nt)?{sql:o(h.value++,l),params:[l],typings:["none"]}:q(l,r.Aliased)&&l.fieldAlias!==void 0?{sql:i(l.fieldAlias),params:[]}:q(l,Oe)?l._.isWith?{sql:i(l._.alias),params:[]}:this.buildQueryFromSourceParams([new $e("("),l._.sql,new $e(") "),new an(l._.alias)],n):Tu(l)?l.schema?{sql:i(l.schema)+"."+i(l.enumName),params:[]}:{sql:i(l.enumName),params:[]}:Zi(l)?l.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([l.getSQL()],n):this.buildQueryFromSourceParams([new $e("("),l.getSQL(),new $e(")")],n):u?{sql:this.mapInlineParam(l,n),params:[]}:{sql:o(h.value++,l),params:[l],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){let n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new r.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},an=class{constructor(e){this.value=e}static[T]="Name";brand;getSQL(){return new K([this])}};function Ru(r){return typeof r=="object"&&r!==null&&"mapToDriverValue"in r&&typeof r.mapToDriverValue=="function"}var Ou={mapFromDriverValue:r=>r},Lu={mapToDriverValue:r=>r},TS={...Ou,...Lu},Je=class{constructor(e,t=Lu){this.value=e,this.encoder=t}static[T]="Param";brand;getSQL(){return new K([this])}};function I(r,...e){let t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new $e(r[0]));for(let[n,s]of e.entries())t.push(s,new $e(r[n+1]));return new K(t)}(r=>{function e(){return new K([])}r.empty=e;function t(u){return new K(u)}r.fromList=t;function n(u){return new K([new $e(u)])}r.raw=n;function s(u,h){let l=[];for(let[p,y]of u.entries())p>0&&h!==void 0&&l.push(h),l.push(y);return new K(l)}r.join=s;function i(u){return new an(u)}r.identifier=i;function o(u){return new Nt(u)}r.placeholder=o;function a(u,h){return new Je(u,h)}r.param=a})(I||(I={}));(r=>{class e{constructor(n,s){this.sql=n,this.fieldAlias=s}static[T]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e})(K||(K={}));var Nt=class{constructor(e){this.name=e}static[T]="Placeholder";getSQL(){return new K([this])}};function cs(r,e){return r.map(t=>{if(q(t,Nt)){if(!(t.name in e))throw new Error(`No value for placeholder "${t.name}" was provided`);return e[t.name]}if(q(t,Je)&&q(t.value,Nt)){if(!(t.value.name in e))throw new Error(`No value for placeholder "${t.value.name}" was provided`);return t.encoder.mapToDriverValue(e[t.value.name])}return t})}var $u=Symbol.for("drizzle:IsDrizzleView"),Ve=class{static[T]="View";[we];[$u]=!0;constructor({name:e,schema:t,selectedFields:n,query:s}){this[we]={name:e,originalName:e,schema:t,selectedFields:n,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new K([this])}};function ku(r){return typeof r=="object"&&r!==null&&$u in r}ye.prototype.getSQL=function(){return new K([this])};z.prototype.getSQL=function(){return new K([this])};Oe.prototype.getSQL=function(){return new K([this])};var Yt=class{constructor(e){this.table=e}static[T]="ColumnAliasProxyHandler";get(e,t){return t==="table"?this.table:e[t]}},Nr=class{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static[T]="TableAliasProxyHandler";get(e,t){if(t===z.Symbol.IsAlias)return!0;if(t===z.Symbol.Name)return this.alias;if(this.replaceOriginalName&&t===z.Symbol.OriginalName)return this.alias;if(t===we)return{...e[we],name:this.alias,isAlias:!0};if(t===z.Symbol.Columns){let s=e[z.Symbol.Columns];if(!s)return s;let i={};return Object.keys(s).map(o=>{i[o]=new Proxy(s[o],new Yt(new Proxy(e,this)))}),i}let n=e[t];return q(n,ye)?new Proxy(n,new Yt(new Proxy(e,this))):n}},qu=class{constructor(e){this.alias=e}static[T]="RelationTableAliasProxyHandler";get(e,t){return t==="sourceTable"?cn(e.sourceTable,this.alias):e[t]}};function cn(r,e){return new Proxy(r,new Nr(e,!1))}function xt(r,e){return new Proxy(r,new Yt(new Proxy(r.table,new Nr(e,!1))))}function Ji(r,e){return new K.Aliased(un(r.sql,e),r.fieldAlias)}function un(r,e){return I.join(r.queryChunks.map(t=>q(t,ye)?xt(t,e):q(t,K)?un(t,e):q(t,K.Aliased)?Ji(t,e):t))}var Ne=class r{static[T]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,t){if(t==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(t===we)return{...e[we],selectedFields:new Proxy(e[we].selectedFields,this)};if(typeof t=="symbol")return e[t];let s=(q(e,Oe)?e._.selectedFields:q(e,Ve)?e[we].selectedFields:e)[t];if(q(s,K.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!s.isSelectionField)return s.sql;let i=s.clone();return i.isSelectionField=!0,i}if(q(s,K)){if(this.config.sqlBehavior==="sql")return s;throw new Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return q(s,ye)?this.config.alias?new Proxy(s,new Yt(new Proxy(s.table,new Nr(this.config.alias,this.config.replaceOriginalName??!1)))):s:typeof s!="object"||s===null?s:new Proxy(s,new r(this.config))}};function Mu(r,e,t){let n={},s=r.reduce((i,{path:o,field:a},u)=>{let h;q(a,ye)?h=a:q(a,K)?h=a.decoder:h=a.sql.decoder;let l=i;for(let[p,y]of o.entries())if(p<o.length-1)y in l||(l[y]={}),l=l[y];else{let x=e[u],g=l[y]=x===null?null:h.mapFromDriverValue(x);if(t&&q(a,ye)&&o.length===2){let f=o[0];f in n?typeof n[f]=="string"&&n[f]!==Ze(a.table)&&(n[f]=!1):n[f]=g===null?Ze(a.table):!1}}return i},{});if(t&&Object.keys(n).length>0)for(let[i,o]of Object.entries(n))typeof o=="string"&&!t[o]&&(s[i]=null);return s}function st(r,e){return Object.entries(r).reduce((t,[n,s])=>{if(typeof n!="string")return t;let i=e?[...e,n]:[n];return q(s,ye)||q(s,K)||q(s,K.Aliased)?t.push({path:i,field:s}):q(s,z)?t.push(...st(s[z.Symbol.Columns],i)):t.push(...st(s,i)),t},[])}function ln(r,e){let t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let[s,i]of t.entries())if(i!==n[s])return!1;return!0}function us(r,e){let t=Object.entries(e).filter(([,n])=>n!==void 0).map(([n,s])=>q(s,K)||q(s,ye)?[n,s]:[n,new Je(s,r[z.Symbol.Columns][n])]);if(t.length===0)throw new Error("No values to set");return Object.fromEntries(t)}function Bu(r,e){for(let t of e)for(let n of Object.getOwnPropertyNames(t.prototype))n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))}function ls(r){return r[z.Symbol.Columns]}function ju(r){return r[we].selectedFields}function Pt(r){return q(r,Oe)?r._.alias:q(r,Ve)?r[we].name:q(r,K)?void 0:r[z.Symbol.IsAlias]?r[z.Symbol.Name]:r[z.Symbol.BaseName]}function pe(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}function Du(r){if(typeof r!="object"||r===null||r.constructor.name!=="Object")return!1;if("logger"in r){let e=typeof r.logger;return!(e!=="boolean"&&(e!=="object"||typeof r.logger.logQuery!="function")&&e!=="undefined")}if("schema"in r){let e=typeof r.logger;return!(e!=="object"&&e!=="undefined")}if("casing"in r){let e=typeof r.logger;return!(e!=="string"&&e!=="undefined")}if("mode"in r)return!(r.mode!=="default"||r.mode!=="planetscale"||r.mode!==void 0);if("connection"in r){let e=typeof r.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in r){let e=typeof r.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(r).length===0}var fn=class extends De{constructor(e,t,n,s){super(),this.session=t,this.dialect=n,this.config={table:e,withList:s}}static[T]="PgDelete";config;where(e){return this.config.where=e,this}returning(e=this.config.table[z.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=st(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return Le.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Le.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ne({alias:Ze(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};function Hm(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(t=>t.toLowerCase()).join("_")}function Zm(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((t,n,s)=>{let i=s===0?n.toLowerCase():`${n[0].toUpperCase()}${n.slice(1)}`;return t+i},"")}function Jm(r){return r}var fs=class{static[T]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?Hm:e==="camelCase"?Zm:Jm}getColumnCasing(e){if(!e.keyAsName)return e.name;let t=e.table[z.Symbol.Schema]??"public",n=e.table[z.Symbol.OriginalName],s=`${t}.${n}.${e.name}`;return this.cache[s]||this.cacheTable(e.table),this.cache[s]}cacheTable(e){let t=e[z.Symbol.Schema]??"public",n=e[z.Symbol.OriginalName],s=`${t}.${n}`;if(!this.cachedTables[s]){for(let i of Object.values(e[z.Symbol.Columns])){let o=`${s}.${i.name}`;this.cache[o]=this.convert(i.name)}this.cachedTables[s]=!0}}clearCache(){this.cache={},this.cachedTables={}}};var hn=class extends Error{static[T]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}},hs=class extends hn{static[T]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};var Rt=class extends X{static[T]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var Xi=class extends Rt{static[T]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new Yi(e,this.config)}},Yi=class extends F{static[T]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},eo=class extends Rt{static[T]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new to(e,this.config)}},to=class extends F{static[T]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function Fu(r,e){let{name:t,config:n}=pe(r,e);return n.mode==="number"?new Xi(t):new eo(t)}var ro=class extends X{static[T]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new no(e,this.config)}},no=class extends F{static[T]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},so=class extends X{static[T]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new io(e,this.config)}},io=class extends F{static[T]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function Qu(r,e){let{name:t,config:n}=pe(r,e);return n.mode==="number"?new ro(t):new so(t)}var oo=class extends X{static[T]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new ao(e,this.config)}},ao=class extends F{static[T]="PgBoolean";getSQLType(){return"boolean"}};function jt(r){return new oo(r??"")}var co=class extends X{static[T]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new uo(e,this.config)}},uo=class extends F{static[T]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function Uu(r,e={}){let{name:t,config:n}=pe(r,e);return new co(t,n)}var lo=class extends X{static[T]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new fo(e,this.config)}},fo=class extends F{static[T]="PgCidr";getSQLType(){return"cidr"}};function Vu(r){return new lo(r??"")}var ho=class extends X{static[T]="PgCustomColumnBuilder";constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new po(e,this.config)}},po=class extends F{static[T]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function zu(r){return(e,t)=>{let{name:n,config:s}=pe(e,t);return new ho(n,s,r)}}var wt=class extends X{static[T]="PgDateColumnBaseBuilder";defaultNow(){return this.default(I`now()`)}};var mo=class extends wt{static[T]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new dn(e,this.config)}},dn=class extends F{static[T]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},go=class extends wt{static[T]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new pn(e,this.config)}},pn=class extends F{static[T]="PgDateString";getSQLType(){return"date"}};function Ku(r,e){let{name:t,config:n}=pe(r,e);return n?.mode==="date"?new mo(t):new go(t)}var yo=class extends X{static[T]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new bo(e,this.config)}},bo=class extends F{static[T]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function Gu(r){return new yo(r??"")}var xo=class extends X{static[T]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new wo(e,this.config)}},wo=class extends F{static[T]="PgInet";getSQLType(){return"inet"}};function Wu(r){return new xo(r??"")}var vo=class extends Rt{static[T]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new So(e,this.config)}},So=class extends F{static[T]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function vt(r){return new vo(r??"")}var _o=class extends X{static[T]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new Eo(e,this.config)}},Eo=class extends F{static[T]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}};function Hu(r,e={}){let{name:t,config:n}=pe(r,e);return new _o(t,n)}var To=class extends X{static[T]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new mn(e,this.config)}},mn=class extends F{static[T]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function Zu(r){return new To(r??"")}var Co=class extends X{static[T]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new gn(e,this.config)}},gn=class extends F{static[T]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function ds(r){return new Co(r??"")}var Ao=class extends X{static[T]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new Io(e,this.config)}},Io=class extends F{static[T]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,s]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(s)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},No=class extends X{static[T]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new Po(e,this.config)}},Po=class extends F{static[T]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,s]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(s)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function Ju(r,e){let{name:t,config:n}=pe(r,e);return!n?.mode||n.mode==="tuple"?new Ao(t):new No(t)}var Ro=class extends X{static[T]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new Oo(e,this.config)}},Oo=class extends F{static[T]="PgMacaddr";getSQLType(){return"macaddr"}};function Xu(r){return new Ro(r??"")}var Lo=class extends X{static[T]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new $o(e,this.config)}},$o=class extends F{static[T]="PgMacaddr8";getSQLType(){return"macaddr8"}};function Yu(r){return new Lo(r??"")}var ko=class extends X{static[T]="PgNumericBuilder";constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new yn(e,this.config)}},yn=class extends F{static[T]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function el(r,e){let{name:t,config:n}=pe(r,e);return new ko(t,n?.precision,n?.scale)}var qo=class extends X{static[T]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new Mo(e,this.config)}},Mo=class extends F{static[T]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},Bo=class extends X{static[T]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new jo(e,this.config)}},jo=class extends F{static[T]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function tl(r,e){let{name:t,config:n}=pe(r,e);return!n?.mode||n.mode==="tuple"?new qo(t):new Bo(t)}function Xm(r){let e=[];for(let t=0;t<r.length;t+=2)e.push(Number.parseInt(r.slice(t,t+2),16));return new Uint8Array(e)}function rl(r,e){let t=new ArrayBuffer(8),n=new DataView(t);for(let s=0;s<8;s++)n.setUint8(s,r[e+s]);return n.getFloat64(0,!0)}function Do(r){let e=Xm(r),t=0,n=e[t];t+=1;let s=new DataView(e.buffer),i=s.getUint32(t,n===1);t+=4;let o;if(i&536870912&&(o=s.getUint32(t,n===1),t+=4),(i&65535)===1){let a=rl(e,t);t+=8;let u=rl(e,t);return t+=8,[a,u]}throw new Error("Unsupported geometry type")}var Fo=class extends X{static[T]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new Qo(e,this.config)}},Qo=class extends F{static[T]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Do(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},Uo=class extends X{static[T]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Vo(e,this.config)}},Vo=class extends F{static[T]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=Do(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function nl(r,e){let{name:t,config:n}=pe(r,e);return!n?.mode||n.mode==="tuple"?new Fo(t):new Uo(t)}var zo=class extends X{static[T]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new Ko(e,this.config)}},Ko=class extends F{static[T]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};function sl(r){return new zo(r??"")}var Go=class extends X{static[T]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Wo(e,this.config)}},Wo=class extends F{static[T]="PgSerial";getSQLType(){return"serial"}};function Ot(r){return new Go(r??"")}var Ho=class extends Rt{static[T]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new Zo(e,this.config)}},Zo=class extends F{static[T]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};function il(r){return new Ho(r??"")}var Jo=class extends X{static[T]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Xo(e,this.config)}},Xo=class extends F{static[T]="PgSmallSerial";getSQLType(){return"smallserial"}};function ol(r){return new Jo(r??"")}var Yo=class extends X{static[T]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new ea(e,this.config)}},ea=class extends F{static[T]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function ne(r,e={}){let{name:t,config:n}=pe(r,e);return new Yo(t,n)}var ta=class extends wt{constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}static[T]="PgTimeBuilder";build(e){return new bn(e,this.config)}},bn=class extends F{static[T]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function al(r,e={}){let{name:t,config:n}=pe(r,e);return new ta(t,n.withTimezone??!1,n.precision)}var ra=class extends wt{static[T]="PgTimestampBuilder";constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new xn(e,this.config)}},xn=class extends F{static[T]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()},na=class extends wt{static[T]="PgTimestampStringBuilder";constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new wn(e,this.config)}},wn=class extends F{static[T]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function mt(r,e={}){let{name:t,config:n}=pe(r,e);return n?.mode==="string"?new na(t,n.withTimezone??!1,n.precision):new ra(t,n?.withTimezone??!1,n?.precision)}var sa=class extends X{static[T]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(I`gen_random_uuid()`)}build(e){return new vn(e,this.config)}},vn=class extends F{static[T]="PgUUID";getSQLType(){return"uuid"}};function cl(r){return new sa(r??"")}var ia=class extends X{static[T]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new oa(e,this.config)}},oa=class extends F{static[T]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function ps(r,e={}){let{name:t,config:n}=pe(r,e);return new ia(t,n)}var aa=class extends X{static[T]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new ca(e,this.config)}},ca=class extends F{static[T]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function ul(r,e){let{name:t,config:n}=pe(r,e);return new aa(t,n)}var ua=class extends X{static[T]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new la(e,this.config)}},la=class extends F{static[T]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}};function ll(r,e){let{name:t,config:n}=pe(r,e);return new ua(t,n)}var fa=class extends X{static[T]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new ha(e,this.config)}},ha=class extends F{static[T]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function fl(r,e){let{name:t,config:n}=pe(r,e);return new fa(t,n)}var da=class extends X{static[T]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new pa(e,this.config)}},pa=class extends F{static[T]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}};function hl(r,e){let{name:t,config:n}=pe(r,e);return new da(t,n)}function dl(){return{bigint:Fu,bigserial:Qu,boolean:jt,char:Uu,cidr:Vu,customType:zu,date:Ku,doublePrecision:Gu,inet:Wu,integer:vt,interval:Hu,json:Zu,jsonb:ds,line:Ju,macaddr:Xu,macaddr8:Yu,numeric:el,point:tl,geometry:nl,real:sl,serial:Ot,smallint:il,smallserial:ol,text:ne,time:al,timestamp:mt,uuid:cl,varchar:ps,bit:ul,halfvec:ll,sparsevec:fl,vector:hl}}var ma=Symbol.for("drizzle:PgInlineForeignKeys"),pl=Symbol.for("drizzle:EnableRLS"),Be=class extends z{static[T]="PgTable";static Symbol=Object.assign({},z.Symbol,{InlineForeignKeys:ma,EnableRLS:pl});[ma]=[];[pl]=!1;[z.Symbol.ExtraConfigBuilder]=void 0};function Ym(r,e,t,n,s=r){let i=new Be(r,n,s),o=typeof e=="function"?e(dl()):e,a=Object.fromEntries(Object.entries(o).map(([l,p])=>{let y=p;y.setName(l);let x=y.build(i);return i[ma].push(...y.buildForeignKeys(x,i)),[l,x]})),u=Object.fromEntries(Object.entries(o).map(([l,p])=>{let y=p;y.setName(l);let x=y.buildExtraConfigColumn(i);return[l,x]})),h=Object.assign(i,a);return h[z.Symbol.Columns]=a,h[z.Symbol.ExtraConfigColumns]=u,t&&(h[Be.Symbol.ExtraConfigBuilder]=t),Object.assign(h,{enableRLS:()=>(h[Be.Symbol.EnableRLS]=!0,h)})}var Dt=(r,e,t)=>Ym(r,e,t,void 0);var ms=class{static[T]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new ga(e,this.columns,this.name)}},ga=class{constructor(e,t,n){this.table=e,this.columns=t,this.name=n}static[T]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[Be.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};function Xe(r,e){return Ru(e)&&!Zi(r)&&!q(r,Je)&&!q(r,Nt)&&!q(r,ye)&&!q(r,z)&&!q(r,Ve)?new Je(r,e):r}var it=(r,e)=>I`${r} = ${Xe(e,r)}`,ml=(r,e)=>I`${r} <> ${Xe(e,r)}`;function Sn(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new K(e):new K([new $e("("),I.join(e,new $e(" and ")),new $e(")")])}function gl(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new K(e):new K([new $e("("),I.join(e,new $e(" or ")),new $e(")")])}function yl(r){return I`not ${r}`}var bl=(r,e)=>I`${r} > ${Xe(e,r)}`,xl=(r,e)=>I`${r} >= ${Xe(e,r)}`,wl=(r,e)=>I`${r} < ${Xe(e,r)}`,vl=(r,e)=>I`${r} <= ${Xe(e,r)}`;function Sl(r,e){return Array.isArray(e)?e.length===0?I`false`:I`${r} in ${e.map(t=>Xe(t,r))}`:I`${r} in ${Xe(e,r)}`}function _l(r,e){return Array.isArray(e)?e.length===0?I`true`:I`${r} not in ${e.map(t=>Xe(t,r))}`:I`${r} not in ${Xe(e,r)}`}function El(r){return I`${r} is null`}function Tl(r){return I`${r} is not null`}function Cl(r){return I`exists ${r}`}function Al(r){return I`not exists ${r}`}function Il(r,e,t){return I`${r} between ${Xe(e,r)} and ${Xe(t,r)}`}function Nl(r,e,t){return I`${r} not between ${Xe(e,r)} and ${Xe(t,r)}`}function Pl(r,e){return I`${r} like ${e}`}function Rl(r,e){return I`${r} not like ${e}`}function Ol(r,e){return I`${r} ilike ${e}`}function Ll(r,e){return I`${r} not ilike ${e}`}function $l(r){return I`${r} asc`}function kl(r){return I`${r} desc`}var gs=class{constructor(e,t,n){this.sourceTable=e,this.referencedTable=t,this.relationName=n,this.referencedTableName=t[z.Symbol.Name]}static[T]="Relation";referencedTableName;fieldName},ya=class{constructor(e,t){this.table=e,this.config=t}static[T]="Relations"},Ft=class r extends gs{constructor(e,t,n,s){super(e,t,n?.relationName),this.config=n,this.isNullable=s}static[T]="One";withFieldName(e){let t=new r(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}},_n=class r extends gs{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}static[T]="Many";withFieldName(e){let t=new r(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}};function ql(){return{and:Sn,between:Il,eq:it,exists:Cl,gt:bl,gte:xl,ilike:Ol,inArray:Sl,isNull:El,isNotNull:Tl,like:Pl,lt:wl,lte:vl,ne:ml,not:yl,notBetween:Nl,notExists:Al,notLike:Rl,notIlike:Ll,notInArray:_l,or:gl,sql:I}}function Ml(){return{sql:I,asc:$l,desc:kl}}function Bl(r,e){Object.keys(r).length===1&&"default"in r&&!q(r.default,z)&&(r=r.default);let t={},n={},s={};for(let[i,o]of Object.entries(r))if(q(o,z)){let a=Xt(o),u=n[a];t[a]=i,s[i]={tsName:i,dbName:o[z.Symbol.Name],schema:o[z.Symbol.Schema],columns:o[z.Symbol.Columns],relations:u?.relations??{},primaryKey:u?.primaryKey??[]};for(let l of Object.values(o[z.Symbol.Columns]))l.primary&&s[i].primaryKey.push(l);let h=o[z.Symbol.ExtraConfigBuilder]?.(o[z.Symbol.ExtraConfigColumns]);if(h)for(let l of Object.values(h))q(l,ms)&&s[i].primaryKey.push(...l.columns)}else if(q(o,ya)){let a=Xt(o.table),u=t[a],h=o.config(e(o.table)),l;for(let[p,y]of Object.entries(h))if(u){let x=s[u];x.relations[p]=y,l&&x.primaryKey.push(...l)}else a in n||(n[a]={relations:{},primaryKey:l}),n[a].relations[p]=y}return{tables:s,tableNamesMap:t}}function e0(r){return function(t,n){return new Ft(r,t,n,n?.fields.reduce((s,i)=>s&&i.notNull,!0)??!1)}}function t0(r){return function(t,n){return new _n(r,t,n)}}function jl(r,e,t){if(q(t,Ft)&&t.config)return{fields:t.config.fields,references:t.config.references};let n=e[Xt(t.referencedTable)];if(!n)throw new Error(`Table "${t.referencedTable[z.Symbol.Name]}" not found in schema`);let s=r[n];if(!s)throw new Error(`Table "${n}" not found in schema`);let i=t.sourceTable,o=e[Xt(i)];if(!o)throw new Error(`Table "${i[z.Symbol.Name]}" not found in schema`);let a=[];for(let u of Object.values(s.relations))(t.relationName&&t!==u&&u.relationName===t.relationName||!t.relationName&&u.referencedTable===t.sourceTable)&&a.push(u);if(a.length>1)throw t.relationName?new Error(`There are multiple relations with name "${t.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${t.sourceTable[z.Symbol.Name]}". Please specify relation name`);if(a[0]&&q(a[0],Ft)&&a[0].config)return{fields:a[0].config.references,references:a[0].config.fields};throw new Error(`There is not enough information to infer relation "${o}.${t.fieldName}"`)}function Dl(r){return{one:e0(r),many:t0(r)}}function ys(r,e,t,n,s=i=>i){let i={};for(let[o,a]of n.entries())if(a.isJson){let u=e.relations[a.tsKey],h=t[o],l=typeof h=="string"?JSON.parse(h):h;i[a.tsKey]=q(u,Ft)?l&&ys(r,r[a.relationTableTsKey],l,a.selection,s):l.map(p=>ys(r,r[a.relationTableTsKey],p,a.selection,s))}else{let u=s(t[o]),h=a.field,l;q(h,ye)?l=h:q(h,K)?l=h.decoder:l=h.sql.decoder,i[a.tsKey]=u===null?null:l.mapFromDriverValue(u)}return i}var Pr=class extends Ve{static[T]="PgViewBase"};var Qt=class{static[T]="PgDialect";casing;constructor(e){this.casing=new fs(e?.casing)}async migrate(e,t,n){let s=typeof n=="string"?"__drizzle_migrations":n.migrationsTable??"__drizzle_migrations",i=typeof n=="string"?"drizzle":n.migrationsSchema??"drizzle",o=I`
			CREATE TABLE IF NOT EXISTS ${I.identifier(i)}.${I.identifier(s)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(I`CREATE SCHEMA IF NOT EXISTS ${I.identifier(i)}`),await t.execute(o);let u=(await t.all(I`select id, hash, created_at from ${I.identifier(i)}.${I.identifier(s)} order by created_at desc limit 1`))[0];await t.transaction(async h=>{for await(let l of e)if(!u||Number(u.created_at)<l.folderMillis){for(let p of l.sql)await h.execute(I.raw(p));await h.execute(I`insert into ${I.identifier(i)}.${I.identifier(s)} ("hash", "created_at") values(${l.hash}, ${l.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[I`with `];for(let[n,s]of e.entries())t.push(I`${I.identifier(s._.alias)} as (${s._.sql})`),n<e.length-1&&t.push(I`, `);return t.push(I` `),I.join(t)}buildDeleteQuery({table:e,where:t,returning:n,withList:s}){let i=this.buildWithCTE(s),o=n?I` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,a=t?I` where ${t}`:void 0;return I`${i}delete from ${e}${a}${o}`}buildUpdateSet(e,t){let n=e[z.Symbol.Columns],s=Object.keys(n).filter(o=>t[o]!==void 0||n[o]?.onUpdateFn!==void 0),i=s.length;return I.join(s.flatMap((o,a)=>{let u=n[o],h=t[o]??I.param(u.onUpdateFn(),u),l=I`${I.identifier(this.casing.getColumnCasing(u))} = ${h}`;return a<i-1?[l,I.raw(", ")]:[l]}))}buildUpdateQuery({table:e,set:t,where:n,returning:s,withList:i,from:o,joins:a}){let u=this.buildWithCTE(i),h=e[Be.Symbol.Name],l=e[Be.Symbol.Schema],p=e[Be.Symbol.OriginalName],y=h===p?void 0:h,x=I`${l?I`${I.identifier(l)}.`:void 0}${I.identifier(p)}${y&&I` ${I.identifier(y)}`}`,g=this.buildUpdateSet(e,t),f=o&&I.join([I.raw(" from "),this.buildFromTable(o)]),w=this.buildJoins(a),v=s?I` returning ${this.buildSelection(s,{isSingleTable:!o})}`:void 0,S=n?I` where ${n}`:void 0;return I`${u}update ${x} set ${g}${f}${w}${S}${v}`}buildSelection(e,{isSingleTable:t=!1}={}){let n=e.length,s=e.flatMap(({field:i},o)=>{let a=[];if(q(i,K.Aliased)&&i.isSelectionField)a.push(I.identifier(i.fieldAlias));else if(q(i,K.Aliased)||q(i,K)){let u=q(i,K.Aliased)?i.sql:i;t?a.push(new K(u.queryChunks.map(h=>q(h,F)?I.identifier(this.casing.getColumnCasing(h)):h))):a.push(u),q(i,K.Aliased)&&a.push(I` as ${I.identifier(i.fieldAlias)}`)}else q(i,ye)&&(t?a.push(I.identifier(this.casing.getColumnCasing(i))):a.push(i));return o<n-1&&a.push(I`, `),a});return I.join(s)}buildJoins(e){if(!e||e.length===0)return;let t=[];for(let[n,s]of e.entries()){n===0&&t.push(I` `);let i=s.table,o=s.lateral?I` lateral`:void 0;if(q(i,Be)){let a=i[Be.Symbol.Name],u=i[Be.Symbol.Schema],h=i[Be.Symbol.OriginalName],l=a===h?void 0:s.alias;t.push(I`${I.raw(s.joinType)} join${o} ${u?I`${I.identifier(u)}.`:void 0}${I.identifier(h)}${l&&I` ${I.identifier(l)}`} on ${s.on}`)}else if(q(i,Ve)){let a=i[we].name,u=i[we].schema,h=i[we].originalName,l=a===h?void 0:s.alias;t.push(I`${I.raw(s.joinType)} join${o} ${u?I`${I.identifier(u)}.`:void 0}${I.identifier(h)}${l&&I` ${I.identifier(l)}`} on ${s.on}`)}else t.push(I`${I.raw(s.joinType)} join${o} ${i} on ${s.on}`);n<e.length-1&&t.push(I` `)}return I.join(t)}buildFromTable(e){if(q(e,z)&&e[z.Symbol.OriginalName]!==e[z.Symbol.Name]){let t=I`${I.identifier(e[z.Symbol.OriginalName])}`;return e[z.Symbol.Schema]&&(t=I`${I.identifier(e[z.Symbol.Schema])}.${t}`),I`${t} ${I.identifier(e[z.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:n,where:s,having:i,table:o,joins:a,orderBy:u,groupBy:h,limit:l,offset:p,lockingClause:y,distinct:x,setOperators:g}){let f=n??st(t);for(let $ of f)if(q($.field,ye)&&Ze($.field.table)!==(q(o,Oe)?o._.alias:q(o,Pr)?o[we].name:q(o,K)?void 0:Ze(o))&&!(Q=>a?.some(({alias:ee})=>ee===(Q[z.Symbol.IsAlias]?Ze(Q):Q[z.Symbol.BaseName])))($.field.table)){let Q=Ze($.field.table);throw new Error(`Your "${$.path.join("->")}" field references a column "${Q}"."${$.field.name}", but the table "${Q}" is not part of the query! Did you forget to join it?`)}let w=!a||a.length===0,v=this.buildWithCTE(e),S;x&&(S=x===!0?I` distinct`:I` distinct on (${I.join(x.on,I`, `)})`);let E=this.buildSelection(f,{isSingleTable:w}),O=this.buildFromTable(o),L=this.buildJoins(a),_=s?I` where ${s}`:void 0,P=i?I` having ${i}`:void 0,N;u&&u.length>0&&(N=I` order by ${I.join(u,I`, `)}`);let C;h&&h.length>0&&(C=I` group by ${I.join(h,I`, `)}`);let M=typeof l=="object"||typeof l=="number"&&l>=0?I` limit ${l}`:void 0,k=p?I` offset ${p}`:void 0,Z=I.empty();if(y){let $=I` for ${I.raw(y.strength)}`;y.config.of&&$.append(I` of ${I.join(Array.isArray(y.config.of)?y.config.of:[y.config.of],I`, `)}`),y.config.noWait?$.append(I` no wait`):y.config.skipLocked&&$.append(I` skip locked`),Z.append($)}let J=I`${v}select${S} ${E} from ${O}${L}${_}${C}${P}${N}${M}${k}${Z}`;return g.length>0?this.buildSetOperations(J,g):J}buildSetOperations(e,t){let[n,...s]=t;if(!n)throw new Error("Cannot pass undefined values to any set operator");return s.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),s)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:n,rightSelect:s,limit:i,orderBy:o,offset:a}}){let u=I`(${e.getSQL()}) `,h=I`(${s.getSQL()})`,l;if(o&&o.length>0){let g=[];for(let f of o)if(q(f,F))g.push(I.identifier(f.name));else if(q(f,K)){for(let w=0;w<f.queryChunks.length;w++){let v=f.queryChunks[w];q(v,F)&&(f.queryChunks[w]=I.identifier(v.name))}g.push(I`${f}`)}else g.push(I`${f}`);l=I` order by ${I.join(g,I`, `)} `}let p=typeof i=="object"||typeof i=="number"&&i>=0?I` limit ${i}`:void 0,y=I.raw(`${t} ${n?"all ":""}`),x=a?I` offset ${a}`:void 0;return I`${u}${y}${h}${l}${p}${x}`}buildInsertQuery({table:e,values:t,onConflict:n,returning:s,withList:i,select:o,overridingSystemValue_:a}){let u=[],h=e[z.Symbol.Columns],l=Object.entries(h).filter(([v,S])=>!S.shouldDisableInsert()),p=l.map(([,v])=>I.identifier(this.casing.getColumnCasing(v)));if(o){let v=t;q(v,K)?u.push(v):u.push(v.getSQL())}else{let v=t;u.push(I.raw("values "));for(let[S,E]of v.entries()){let O=[];for(let[L,_]of l){let P=E[L];if(P===void 0||q(P,Je)&&P.value===void 0)if(_.defaultFn!==void 0){let N=_.defaultFn(),C=q(N,K)?N:I.param(N,_);O.push(C)}else if(!_.default&&_.onUpdateFn!==void 0){let N=_.onUpdateFn(),C=q(N,K)?N:I.param(N,_);O.push(C)}else O.push(I`default`);else O.push(P)}u.push(O),S<v.length-1&&u.push(I`, `)}}let y=this.buildWithCTE(i),x=I.join(u),g=s?I` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,f=n?I` on conflict ${n}`:void 0,w=a===!0?I`overriding system value `:void 0;return I`${y}insert into ${e} ${p} ${w}${x}${f}${g}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:n}){let s=t?I` concurrently`:void 0,i=n?I` with no data`:void 0;return I`refresh materialized view${s} ${e}${i}`}prepareTyping(e){return q(e,gn)||q(e,mn)?"json":q(e,yn)?"decimal":q(e,bn)?"time":q(e,xn)||q(e,wn)?"timestamp":q(e,dn)||q(e,pn)?"date":q(e,vn)?"uuid":"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:s,tableConfig:i,queryConfig:o,tableAlias:a,nestedQueryRelation:u,joinOn:h}){let l=[],p,y,x=[],g,f=[];if(o===!0)l=Object.entries(i.columns).map(([S,E])=>({dbKey:E.name,tsKey:S,field:xt(E,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let v=Object.fromEntries(Object.entries(i.columns).map(([P,N])=>[P,xt(N,a)]));if(o.where){let P=typeof o.where=="function"?o.where(v,ql()):o.where;g=P&&un(P,a)}let S=[],E=[];if(o.columns){let P=!1;for(let[N,C]of Object.entries(o.columns))C!==void 0&&N in i.columns&&(!P&&C===!0&&(P=!0),E.push(N));E.length>0&&(E=P?E.filter(N=>o.columns?.[N]===!0):Object.keys(i.columns).filter(N=>!E.includes(N)))}else E=Object.keys(i.columns);for(let P of E){let N=i.columns[P];S.push({tsKey:P,value:N})}let O=[];o.with&&(O=Object.entries(o.with).filter(P=>!!P[1]).map(([P,N])=>({tsKey:P,queryConfig:N,relation:i.relations[P]})));let L;if(o.extras){L=typeof o.extras=="function"?o.extras(v,{sql:I}):o.extras;for(let[P,N]of Object.entries(L))S.push({tsKey:P,value:Ji(N,a)})}for(let{tsKey:P,value:N}of S)l.push({dbKey:q(N,K.Aliased)?N.fieldAlias:i.columns[P].name,tsKey:P,field:q(N,ye)?xt(N,a):N,relationTableTsKey:void 0,isJson:!1,selection:[]});let _=typeof o.orderBy=="function"?o.orderBy(v,Ml()):o.orderBy??[];Array.isArray(_)||(_=[_]),x=_.map(P=>q(P,ye)?xt(P,a):un(P,a)),p=o.limit,y=o.offset;for(let{tsKey:P,queryConfig:N,relation:C}of O){let M=jl(t,n,C),k=Xt(C.referencedTable),Z=n[k],J=`${a}_${P}`,$=Sn(...M.fields.map((ce,ge)=>it(xt(M.references[ge],J),xt(ce,a)))),Q=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:e[Z],tableConfig:t[Z],queryConfig:q(C,Ft)?N===!0?{limit:1}:{...N,limit:1}:N,tableAlias:J,joinOn:$,nestedQueryRelation:C}),ee=I`${I.identifier(J)}.${I.identifier("data")}`.as(P);f.push({on:I`true`,table:new Oe(Q.sql,{},J),alias:J,joinType:"left",lateral:!0}),l.push({dbKey:P,tsKey:P,field:ee,relationTableTsKey:Z,isJson:!0,selection:Q.selection})}}if(l.length===0)throw new hn({message:`No fields selected for table "${i.tsName}" ("${a}")`});let w;if(g=Sn(h,g),u){let v=I`json_build_array(${I.join(l.map(({field:O,tsKey:L,isJson:_})=>_?I`${I.identifier(`${a}_${L}`)}.${I.identifier("data")}`:q(O,K.Aliased)?O.sql:O),I`, `)})`;q(u,_n)&&(v=I`coalesce(json_agg(${v}${x.length>0?I` order by ${I.join(x,I`, `)}`:void 0}), '[]'::json)`);let S=[{dbKey:"data",tsKey:"data",field:v.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:l}];p!==void 0||y!==void 0||x.length>0?(w=this.buildSelectQuery({table:cn(s,a),fields:{},fieldsFlat:[{path:[],field:I.raw("*")}],where:g,limit:p,offset:y,orderBy:x,setOperators:[]}),g=void 0,p=void 0,y=void 0,x=[]):w=cn(s,a),w=this.buildSelectQuery({table:q(w,Be)?w:new Oe(w,{},a),fields:{},fieldsFlat:S.map(({field:O})=>({path:[],field:q(O,ye)?xt(O,a):O})),joins:f,where:g,limit:p,offset:y,orderBy:x,setOperators:[]})}else w=this.buildSelectQuery({table:cn(s,a),fields:{},fieldsFlat:l.map(({field:v})=>({path:[],field:q(v,ye)?xt(v,a):v})),joins:f,where:g,limit:p,offset:y,orderBy:x,setOperators:[]});return{tableTsKey:i.tsName,sql:w,selection:l}}};var bs=class{static[T]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var Fe=class{static[T]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let t=!!this.fields,n=e,s;return this.fields?s=this.fields:q(n,Oe)?s=Object.fromEntries(Object.keys(n._.selectedFields).map(i=>[i,n[i]])):q(n,Pr)?s=n[we].selectedFields:q(n,K)?s={}:s=ls(n),new xs({table:n,fields:s,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},ba=class extends bs{static[T]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:e,fields:t,isPartialSelect:n,session:s,dialect:i,withList:o,distinct:a}){super(),this.config={withList:o,table:e,fields:{...t},distinct:a,setOperators:[]},this.isPartialSelect=n,this.session=s,this.dialect=i,this._={selectedFields:t},this.tableName=Pt(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(e){return(t,n)=>{let s=this.tableName,i=Pt(t);if(typeof i=="string"&&this.config.joins?.some(o=>o.alias===i))throw new Error(`Alias "${i}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof s=="string"&&(this.config.fields={[s]:this.config.fields}),typeof i=="string"&&!q(t,K))){let o=q(t,Oe)?t._.selectedFields:q(t,Ve)?t[we].selectedFields:t[z.Symbol.Columns];this.config.fields[i]=o}if(typeof n=="function"&&(n=n(new Proxy(this.config.fields,new Ne({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:n,table:t,joinType:e,alias:i}),typeof i=="string")switch(e){case"left":{this.joinsNotNullableMap[i]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[i]=!0;break}case"inner":{this.joinsNotNullableMap[i]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[i]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(e,t){return n=>{let s=typeof n=="function"?n(r0()):n;if(!ln(this.getSelectedFields(),s.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:s}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Ne({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Ne({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new Ne({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new Ne({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),n=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{let t=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=t:this.config.orderBy=t}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){return new Proxy(new Oe(this.getSQL(),this.config.fields,e),new Ne({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Ne({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}},xs=class extends ba{static[T]="PgSelect";_prepare(e){let{session:t,config:n,dialect:s,joinsNotNullableMap:i,authToken:o}=this;if(!t)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");return Le.startActiveSpan("drizzle.prepareQuery",()=>{let a=st(n.fields),u=t.prepareQuery(s.sqlToQuery(this.getSQL()),a,e,!0);return u.joinsNotNullableMap=i,u.setToken(o)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Le.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};Bu(xs,[De]);function Rr(r,e){return(t,n,...s)=>{let i=[n,...s].map(o=>({type:r,isAll:e,rightSelect:o}));for(let o of i)if(!ln(t.getSelectedFields(),o.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return t.addSetOperators(i)}}var r0=()=>({union:n0,unionAll:s0,intersect:i0,intersectAll:o0,except:a0,exceptAll:c0}),n0=Rr("union",!1),s0=Rr("union",!0),i0=Rr("intersect",!1),o0=Rr("intersect",!0),a0=Rr("except",!1),c0=Rr("except",!0);var Or=class{static[T]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=q(e,Qt)?e:void 0,this.dialectConfig=q(e,Qt)?void 0:e}$with=(e,t)=>{let n=this;return{as:i=>(typeof i=="function"&&(i=i(n)),new Proxy(new Ir(i.getSQL(),t??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Ne({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;function n(o){return new Fe({fields:o??void 0,session:void 0,dialect:t.getDialect(),withList:e})}function s(o){return new Fe({fields:o??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})}function i(o,a){return new Fe({fields:a??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:o}})}return{select:n,selectDistinct:s,selectDistinctOn:i}}select(e){return new Fe({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Fe({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new Fe({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new Qt(this.dialectConfig)),this.dialect}};var En=class{constructor(e,t,n,s,i){this.table=e,this.session=t,this.dialect=n,this.withList=s,this.overridingSystemValue_=i}static[T]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let t=e.map(n=>{let s={},i=this.table[z.Symbol.Columns];for(let o of Object.keys(n)){let a=n[o];s[o]=q(a,K)?a:new Je(a,i[o])}return s});return new ws(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let t=typeof e=="function"?e(new Or):e;if(!q(t,K)&&!ln(this.table[as],t._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new ws(this.table,t,this.session,this.dialect,this.withList,!0)}},ws=class extends De{constructor(e,t,n,s,i,o,a){super(),this.session=n,this.dialect=s,this.config={table:e,values:t,withList:i,select:o,overridingSystemValue_:a}}static[T]="PgInsert";config;returning(e=this.config.table[z.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=st(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=I`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(s=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(s))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let n=e.where?I` where ${e.where}`:void 0;this.config.onConflict=I`(${I.raw(t)})${n} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let t=e.where?I` where ${e.where}`:void 0,n=e.targetWhere?I` where ${e.targetWhere}`:void 0,s=e.setWhere?I` where ${e.setWhere}`:void 0,i=this.dialect.buildUpdateSet(this.config.table,us(this.config.table,e.set)),o="";return o=Array.isArray(e.target)?e.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=I`(${I.raw(o)})${n} do update set ${i}${t}${s}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return Le.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Le.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ne({alias:Ze(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var vs=class extends De{constructor(e,t,n){super(),this.session=t,this.dialect=n,this.config={view:e}}static[T]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return Le.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Le.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};var Tn=class{constructor(e,t,n,s){this.table=e,this.session=t,this.dialect=n,this.withList=s}static[T]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new xa(this.table,us(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},xa=class extends De{constructor(e,t,n,s,i){super(),this.session=n,this.dialect=s,this.config={set:t,table:e,withList:i,joins:[]},this.tableName=Pt(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[T]="PgUpdate";config;tableName;joinsNotNullableMap;from(e){let t=e,n=Pt(t);return typeof n=="string"&&(this.joinsNotNullableMap[n]=!0),this.config.from=t,this}getTableLikeFields(e){return q(e,Be)?e[z.Symbol.Columns]:q(e,Oe)?e._.selectedFields:e[we].selectedFields}createJoin(e){return(t,n)=>{let s=Pt(t);if(typeof s=="string"&&this.config.joins.some(i=>i.alias===s))throw new Error(`Alias "${s}" is already used in this query`);if(typeof n=="function"){let i=this.config.from&&!q(this.config.from,K)?this.getTableLikeFields(this.config.from):void 0;n=n(new Proxy(this.config.table[z.Symbol.Columns],new Ne({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),i&&new Proxy(i,new Ne({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:n,table:t,joinType:e,alias:s}),typeof s=="string")switch(e){case"left":{this.joinsNotNullableMap[s]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[s]=!0;break}case"inner":{this.joinsNotNullableMap[s]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[s]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[z.Symbol.Columns]),this.config.from)){let t=Pt(this.config.from);if(typeof t=="string"&&this.config.from&&!q(this.config.from,K)){let n=this.getTableLikeFields(this.config.from);e[t]=n}for(let n of this.config.joins){let s=Pt(n.table);if(typeof s=="string"&&!q(n.table,K)){let i=this.getTableLikeFields(n.table);e[s]=i}}}return this.config.returningFields=e,this.config.returning=st(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){let t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ne({alias:Ze(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Ss=class r extends K{constructor(e){super(r.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=r.buildCount(e.source,e.filters)}sql;token;static[T]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,t){return I`(select count(*) from ${e}${I.raw(" where ").if(t)}${t})`}static buildCount(e,t){return I`select count(*) as count from ${e}${I.raw(" where ").if(t)}${t};`}setToken(e){return this.token=e,this}then(e,t){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}};var _s=class{constructor(e,t,n,s,i,o,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=s,this.tableConfig=i,this.dialect=o,this.session=a}static[T]="PgRelationalQueryBuilder";findMany(e){return new Es(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new Es(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},Es=class extends De{constructor(e,t,n,s,i,o,a,u,h){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=s,this.tableConfig=i,this.dialect=o,this.session=a,this.config=u,this.mode=h}static[T]="PgRelationalQuery";_prepare(e){return Le.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:n}=this._toSQL();return this.session.prepareQuery(n,void 0,e,!0,(s,i)=>{let o=s.map(a=>ys(this.schema,this.tableConfig,a,t.selection,i));return this.mode==="first"?o[0]:o})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return Le.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var Ts=class extends De{constructor(e,t,n,s){super(),this.execute=e,this.sql=t,this.query=n,this.mapBatchResult=s}static[T]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var Lr=class{constructor(e,t,n){if(this.dialect=e,this.session=t,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(let[s,i]of Object.entries(this._.schema))this.query[s]=new _s(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[s],i,e,t)}static[T]="PgDatabase";query;$with=(e,t)=>{let n=this;return{as:i=>(typeof i=="function"&&(i=i(new Or(n.dialect))),new Proxy(new Ir(i.getSQL(),t??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Ne({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new Ss({source:e,filters:t,session:this.session})}with(...e){let t=this;function n(h){return new Fe({fields:h??void 0,session:t.session,dialect:t.dialect,withList:e})}function s(h){return new Fe({fields:h??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})}function i(h,l){return new Fe({fields:l??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:h}})}function o(h){return new Tn(h,t.session,t.dialect,e)}function a(h){return new En(h,t.session,t.dialect,e)}function u(h){return new fn(h,t.session,t.dialect,e)}return{select:n,selectDistinct:s,selectDistinctOn:i,update:o,insert:a,delete:u}}select(e){return new Fe({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Fe({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new Fe({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new Tn(e,this.session,this.dialect)}insert(e){return new En(e,this.session,this.dialect)}delete(e){return new fn(e,this.session,this.dialect)}refreshMaterializedView(e){return new vs(e,this.session,this.dialect)}authToken;execute(e){let t=typeof e=="string"?I.raw(e):e.getSQL(),n=this.dialect.sqlToQuery(t),s=this.session.prepareQuery(n,void 0,void 0,!1);return new Ts(()=>s.execute(void 0,this.authToken),t,n,i=>s.mapResult(i,!0))}transaction(e,t){return this.session.transaction(e,t)}};var wa=class{constructor(e,t){this.unique=e,this.name=t}static[T]="PgIndexBuilderOn";on(...e){return new Cn(e.map(t=>{if(q(t,K))return t;t=t;let n=new Ar(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=JSON.parse(JSON.stringify(t.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new Cn(e.map(t=>{if(q(t,K))return t;t=t;let n=new Ar(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=t.defaultConfig,n}),this.unique,!0,this.name)}using(e,...t){return new Cn(t.map(n=>{if(q(n,K))return n;n=n;let s=new Ar(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),s}),this.unique,!0,this.name,e)}},Cn=class{static[T]="PgIndexBuilder";config;constructor(e,t,n,s,i="btree"){this.config={name:s,columns:e,unique:t,only:n,method:i}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new va(this.config,e)}},va=class{static[T]="PgIndex";config;constructor(e,t){this.config={...e,table:t}}};function Fl(r){return new wa(!1,r)}var Cs=class{constructor(e){this.query=e}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}static[T]="PgPreparedQuery";joinsNotNullableMap},As=class{constructor(e){this.dialect=e}static[T]="PgSession";execute(e,t){return Le.startActiveSpan("drizzle.operation",()=>Le.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){let n=await this.execute(e,t);return Number(n[0].count)}},Is=class extends Lr{constructor(e,t,n,s=0){super(e,t,n),this.schema=n,this.nestedIndex=s}static[T]="PgTransaction";rollback(){throw new hs}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),typeof e.deferrable=="boolean"&&t.push(e.deferrable?"deferrable":"not deferrable"),I.raw(t.join(" "))}setTransaction(e){return this.session.execute(I`set transaction ${this.getTransactionConfigSQL(e)}`)}};var Sa=class extends Cs{constructor(e,t,n,s,i,o,a,u){super({sql:t,params:n}),this.client=e,this.params=n,this.logger=s,this.fields=i,this._isResponseInArrayMode=a,this.customResultMapper=u,this.rawQueryConfig={name:o,text:t,types:{getTypeParser:(h,l)=>h===dt.builtins.TIMESTAMPTZ?p=>p:h===dt.builtins.TIMESTAMP?p=>p:h===dt.builtins.DATE?p=>p:h===dt.builtins.INTERVAL?p=>p:dt.getTypeParser(h,l)}},this.queryConfig={name:o,text:t,rowMode:"array",types:{getTypeParser:(h,l)=>h===dt.builtins.TIMESTAMPTZ?p=>p:h===dt.builtins.TIMESTAMP?p=>p:h===dt.builtins.DATE?p=>p:h===dt.builtins.INTERVAL?p=>p:dt.getTypeParser(h,l)}}}static[T]="NeonPreparedQuery";rawQueryConfig;queryConfig;async execute(e={}){let t=cs(this.params,e);this.logger.logQuery(this.rawQueryConfig.text,t);let{fields:n,client:s,rawQueryConfig:i,queryConfig:o,joinsNotNullableMap:a,customResultMapper:u}=this;if(!n&&!u)return s.query(i,t);let h=await s.query(o,t);return u?u(h.rows):h.rows.map(l=>Mu(n,l,a))}all(e={}){let t=cs(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,t),this.client.query(this.rawQueryConfig,t).then(n=>n.rows)}values(e={}){let t=cs(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,t),this.client.query(this.queryConfig,t).then(n=>n.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},Ns=class r extends As{constructor(e,t,n,s={}){super(t),this.client=e,this.schema=n,this.options=s,this.logger=s.logger??new rs}static[T]="NeonSession";logger;prepareQuery(e,t,n,s,i){return new Sa(this.client,e.sql,e.params,this.logger,t,n,s,i)}async query(e,t){return this.logger.logQuery(e,t),await this.client.query({rowMode:"array",text:e,values:t})}async queryObjects(e,t){return this.client.query(e,t)}async count(e){let t=await this.execute(e);return Number(t.rows[0].count)}async transaction(e,t={}){let n=this.client instanceof It?new r(await this.client.connect(),this.dialect,this.schema,this.options):this,s=new _a(this.dialect,n,this.schema);await s.execute(I`begin ${s.getTransactionConfigSQL(t)}`);try{let i=await e(s);return await s.execute(I`commit`),i}catch(i){throw await s.execute(I`rollback`),i}finally{this.client instanceof It&&n.client.release()}}},_a=class r extends Is{static[T]="NeonTransaction";async transaction(e){let t=`sp${this.nestedIndex+1}`,n=new r(this.dialect,this.session,this.schema,this.nestedIndex+1);await n.execute(I.raw(`savepoint ${t}`));try{let s=await e(n);return await n.execute(I.raw(`release savepoint ${t}`)),s}catch(s){throw await n.execute(I.raw(`rollback to savepoint ${t}`)),s}}};var Ea=class{constructor(e,t,n={}){this.client=e,this.dialect=t,this.options=n}static[T]="NeonDriver";createSession(e){return new Ns(this.client,this.dialect,e,{logger:this.options.logger})}},Ta=class extends Lr{static[T]="NeonServerlessDatabase"};function An(r,e={}){let t=new Qt({casing:e.casing}),n;e.logger===!0?n=new ts:e.logger!==!1&&(n=e.logger);let s;if(e.schema){let u=Bl(e.schema,Dl);s={fullSchema:e.schema,schema:u.tables,tableNamesMap:u.tableNamesMap}}let o=new Ea(r,t,{logger:n}).createSession(s),a=new Ta(t,o,s);return a.$client=r,a}function Ps(...r){if(typeof r[0]=="string"){let e=new It({connectionString:r[0]});return An(e,r[1])}if(Du(r[0])){let{connection:e,client:t,ws:n,...s}=r[0];if(n&&(Bt.webSocketConstructor=n),t)return An(t,s);let i=typeof e=="string"?new It({connectionString:e}):new It(e);return An(i,s)}return An(r[0],r[1])}(r=>{function e(t){return An({},t)}r.mock=e})(Ps||(Ps={}));var me;(function(r){r.assertEqual=s=>s;function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{let i={};for(let o of s)i[o]=o;return i},r.getValidEnumValues=s=>{let i=r.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(let a of i)o[a]=s[a];return r.objectValues(o)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},r.find=(s,i)=>{for(let o of s)if(i(o))return o},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(me||(me={}));var Aa;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Aa||(Aa={}));var G=me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$t=r=>{switch(typeof r){case"undefined":return G.undefined;case"string":return G.string;case"number":return isNaN(r)?G.nan:G.number;case"boolean":return G.boolean;case"function":return G.function;case"bigint":return G.bigint;case"symbol":return G.symbol;case"object":return Array.isArray(r)?G.array:r===null?G.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?G.promise:typeof Map<"u"&&r instanceof Map?G.map:typeof Set<"u"&&r instanceof Set?G.set:typeof Date<"u"&&r instanceof Date?G.date:G.object;default:return G.unknown}},j=me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),u0=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),tt=class r extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(let o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let a=n,u=0;for(;u<o.path.length;){let h=o.path[u];u===o.path.length-1?(a[h]=a[h]||{_errors:[]},a[h]._errors.push(t(o))):a[h]=a[h]||{_errors:[]},a=a[h],u++}}};return s(this),n}static assert(e){if(!(e instanceof r))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};tt.create=r=>new tt(r);var qr=(r,e)=>{let t;switch(r.code){case j.invalid_type:r.received===G.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case j.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,me.jsonStringifyReplacer)}`;break;case j.unrecognized_keys:t=`Unrecognized key(s) in object: ${me.joinValues(r.keys,", ")}`;break;case j.invalid_union:t="Invalid input";break;case j.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${me.joinValues(r.options)}`;break;case j.invalid_enum_value:t=`Invalid enum value. Expected ${me.joinValues(r.options)}, received '${r.received}'`;break;case j.invalid_arguments:t="Invalid function arguments";break;case j.invalid_return_type:t="Invalid function return type";break;case j.invalid_date:t="Invalid date";break;case j.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:me.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case j.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case j.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case j.custom:t="Invalid input";break;case j.invalid_intersection_types:t="Intersection results could not be merged";break;case j.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case j.not_finite:t="Number must be finite";break;default:t=e.defaultError,me.assertNever(r)}return{message:t}},zl=qr;function l0(r){zl=r}function Rs(){return zl}var Os=r=>{let{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="",u=n.filter(h=>!!h).slice().reverse();for(let h of u)a=h(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},f0=[];function V(r,e){let t=Rs(),n=Os({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===qr?void 0:qr].filter(s=>!!s)});r.common.issues.push(n)}var Qe=class r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let s of t){if(s.status==="aborted")return ie;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let s of t){let i=await s.key,o=await s.value;n.push({key:i,value:o})}return r.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let s of t){let{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return ie;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}},ie=Object.freeze({status:"aborted"}),kr=r=>({status:"dirty",value:r}),ze=r=>({status:"valid",value:r}),Ia=r=>r.status==="aborted",Na=r=>r.status==="dirty",er=r=>r.status==="valid",Pn=r=>typeof Promise<"u"&&r instanceof Promise;function Ls(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function Kl(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t}var Y;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(Y||(Y={}));var In,Nn,at=class{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Ql=(r,e)=>{if(er(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new tt(r.common.issues);return this._error=t,this._error}}};function le(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var u,h;let{message:l}=r;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:(u=l??n)!==null&&u!==void 0?u:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(h=l??t)!==null&&h!==void 0?h:a.defaultError}},description:s}}var fe=class{get description(){return this._def.description}_getType(e){return $t(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:$t(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qe,ctx:{common:e.parent.common,data:e.data,parsedType:$t(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(Pn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let s={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$t(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Ql(s,i)}"~validate"(e){var t,n;let s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$t(e)};if(!this["~standard"].async)try{let i=this._parseSync({data:e,path:[],parent:s});return er(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((n=(t=i?.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>er(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$t(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Pn(s)?s:Promise.resolve(s));return Ql(n,i)}refine(e,t){let n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{let o=e(s),a=()=>i.addIssue({code:j.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new rt({schema:this,typeName:se.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ot.create(this,this._def)}nullable(){return _t.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qt.create(this)}promise(){return zt.create(this,this._def)}or(e){return ar.create([this,e],this._def)}and(e){return cr.create(this,e,this._def)}transform(e){return new rt({...le(this._def),schema:this,typeName:se.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new dr({...le(this._def),innerType:this,defaultValue:t,typeName:se.ZodDefault})}brand(){return new Rn({typeName:se.ZodBranded,type:this,...le(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new pr({...le(this._def),innerType:this,catchValue:t,typeName:se.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return On.create(this,e)}readonly(){return mr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},h0=/^c[^\s-]{8,}$/i,d0=/^[0-9a-z]+$/,p0=/^[0-9A-HJKMNP-TV-Z]{26}$/i,m0=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,g0=/^[a-z0-9_-]{21}$/i,y0=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,b0=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,x0=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,w0="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ca,v0=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,S0=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_0=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,E0=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,T0=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,C0=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Gl="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",A0=new RegExp(`^${Gl}$`);function Wl(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function I0(r){return new RegExp(`^${Wl(r)}$`)}function Hl(r){let e=`${Gl}T${Wl(r)}`,t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function N0(r,e){return!!((e==="v4"||!e)&&v0.test(r)||(e==="v6"||!e)&&_0.test(r))}function P0(r,e){if(!y0.test(r))return!1;try{let[t]=r.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function R0(r,e){return!!((e==="v4"||!e)&&S0.test(r)||(e==="v6"||!e)&&E0.test(r))}var Ut=class r extends fe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==G.string){let i=this._getOrReturnCtx(e);return V(i,{code:j.invalid_type,expected:G.string,received:i.parsedType}),ie}let n=new Qe,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:j.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:j.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?V(s,{code:j.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&V(s,{code:j.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")x0.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"email",code:j.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Ca||(Ca=new RegExp(w0,"u")),Ca.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"emoji",code:j.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")m0.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"uuid",code:j.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")g0.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"nanoid",code:j.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")h0.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cuid",code:j.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")d0.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cuid2",code:j.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")p0.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"ulid",code:j.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),V(s,{validation:"url",code:j.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"regex",code:j.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),V(s,{code:j.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),V(s,{code:j.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),V(s,{code:j.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Hl(i).test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:j.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?A0.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:j.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?I0(i).test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:j.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?b0.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"duration",code:j.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?N0(e.data,i.version)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"ip",code:j.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?P0(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"jwt",code:j.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?R0(e.data,i.version)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cidr",code:j.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?T0.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"base64",code:j.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?C0.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"base64url",code:j.invalid_string,message:i.message}),n.dirty()):me.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:j.invalid_string,...Y.errToObj(n)})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Y.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Y.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Y.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Y.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Y.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Y.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Y.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Y.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...Y.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Y.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Y.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Y.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Y.errToObj(t)})}nonempty(e){return this.min(1,Y.errToObj(e))}trim(){return new r({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Ut.create=r=>{var e;return new Ut({checks:[],typeName:se.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...le(r)})};function O0(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=parseInt(r.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}var tr=class r extends fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==G.number){let i=this._getOrReturnCtx(e);return V(i,{code:j.invalid_type,expected:G.number,received:i.parsedType}),ie}let n,s=new Qe;for(let i of this._def.checks)i.kind==="int"?me.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{code:j.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),V(n,{code:j.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),V(n,{code:j.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?O0(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),V(n,{code:j.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{code:j.not_finite,message:i.message}),s.dirty()):me.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Y.toString(t))}setLimit(e,t,n,s){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Y.toString(s)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Y.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&me.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};tr.create=r=>new tr({checks:[],typeName:se.ZodNumber,coerce:r?.coerce||!1,...le(r)});var rr=class r extends fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==G.bigint)return this._getInvalidInput(e);let n,s=new Qe;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),V(n,{code:j.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),V(n,{code:j.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),V(n,{code:j.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):me.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return V(t,{code:j.invalid_type,expected:G.bigint,received:t.parsedType}),ie}gte(e,t){return this.setLimit("min",e,!0,Y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Y.toString(t))}setLimit(e,t,n,s){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Y.toString(s)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};rr.create=r=>{var e;return new rr({checks:[],typeName:se.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...le(r)})};var nr=class extends fe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==G.boolean){let n=this._getOrReturnCtx(e);return V(n,{code:j.invalid_type,expected:G.boolean,received:n.parsedType}),ie}return ze(e.data)}};nr.create=r=>new nr({typeName:se.ZodBoolean,coerce:r?.coerce||!1,...le(r)});var sr=class r extends fe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==G.date){let i=this._getOrReturnCtx(e);return V(i,{code:j.invalid_type,expected:G.date,received:i.parsedType}),ie}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return V(i,{code:j.invalid_date}),ie}let n=new Qe,s;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:j.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:j.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):me.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Y.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};sr.create=r=>new sr({checks:[],coerce:r?.coerce||!1,typeName:se.ZodDate,...le(r)});var Mr=class extends fe{_parse(e){if(this._getType(e)!==G.symbol){let n=this._getOrReturnCtx(e);return V(n,{code:j.invalid_type,expected:G.symbol,received:n.parsedType}),ie}return ze(e.data)}};Mr.create=r=>new Mr({typeName:se.ZodSymbol,...le(r)});var ir=class extends fe{_parse(e){if(this._getType(e)!==G.undefined){let n=this._getOrReturnCtx(e);return V(n,{code:j.invalid_type,expected:G.undefined,received:n.parsedType}),ie}return ze(e.data)}};ir.create=r=>new ir({typeName:se.ZodUndefined,...le(r)});var or=class extends fe{_parse(e){if(this._getType(e)!==G.null){let n=this._getOrReturnCtx(e);return V(n,{code:j.invalid_type,expected:G.null,received:n.parsedType}),ie}return ze(e.data)}};or.create=r=>new or({typeName:se.ZodNull,...le(r)});var Vt=class extends fe{constructor(){super(...arguments),this._any=!0}_parse(e){return ze(e.data)}};Vt.create=r=>new Vt({typeName:se.ZodAny,...le(r)});var kt=class extends fe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ze(e.data)}};kt.create=r=>new kt({typeName:se.ZodUnknown,...le(r)});var gt=class extends fe{_parse(e){let t=this._getOrReturnCtx(e);return V(t,{code:j.invalid_type,expected:G.never,received:t.parsedType}),ie}};gt.create=r=>new gt({typeName:se.ZodNever,...le(r)});var Br=class extends fe{_parse(e){if(this._getType(e)!==G.undefined){let n=this._getOrReturnCtx(e);return V(n,{code:j.invalid_type,expected:G.void,received:n.parsedType}),ie}return ze(e.data)}};Br.create=r=>new Br({typeName:se.ZodVoid,...le(r)});var qt=class r extends fe{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==G.array)return V(t,{code:j.invalid_type,expected:G.array,received:t.parsedType}),ie;if(s.exactLength!==null){let o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(V(t,{code:o?j.too_big:j.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(V(t,{code:j.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(V(t,{code:j.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new at(t,o,t.path,a)))).then(o=>Qe.mergeArray(n,o));let i=[...t.data].map((o,a)=>s.type._parseSync(new at(t,o,t.path,a)));return Qe.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new r({...this._def,minLength:{value:e,message:Y.toString(t)}})}max(e,t){return new r({...this._def,maxLength:{value:e,message:Y.toString(t)}})}length(e,t){return new r({...this._def,exactLength:{value:e,message:Y.toString(t)}})}nonempty(e){return this.min(1,e)}};qt.create=(r,e)=>new qt({type:r,minLength:null,maxLength:null,exactLength:null,typeName:se.ZodArray,...le(e)});function $r(r){if(r instanceof Ye){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=ot.create($r(n))}return new Ye({...r._def,shape:()=>e})}else return r instanceof qt?new qt({...r._def,type:$r(r.element)}):r instanceof ot?ot.create($r(r.unwrap())):r instanceof _t?_t.create($r(r.unwrap())):r instanceof St?St.create(r.items.map(e=>$r(e))):r}var Ye=class r extends fe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=me.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==G.object){let h=this._getOrReturnCtx(e);return V(h,{code:j.invalid_type,expected:G.object,received:h.parsedType}),ie}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof gt&&this._def.unknownKeys==="strip"))for(let h in s.data)o.includes(h)||a.push(h);let u=[];for(let h of o){let l=i[h],p=s.data[h];u.push({key:{status:"valid",value:h},value:l._parse(new at(s,p,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof gt){let h=this._def.unknownKeys;if(h==="passthrough")for(let l of a)u.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(h==="strict")a.length>0&&(V(s,{code:j.unrecognized_keys,keys:a}),n.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let h=this._def.catchall;for(let l of a){let p=s.data[l];u.push({key:{status:"valid",value:l},value:h._parse(new at(s,p,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let h=[];for(let l of u){let p=await l.key,y=await l.value;h.push({key:p,value:y,alwaysSet:l.alwaysSet})}return h}).then(h=>Qe.mergeObjectSync(n,h)):Qe.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return Y.errToObj,new r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,i,o,a;let u=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,n).message)!==null&&o!==void 0?o:n.defaultError;return t.code==="unrecognized_keys"?{message:(a=Y.errToObj(e).message)!==null&&a!==void 0?a:u}:{message:u}}}:{}})}strip(){return new r({...this._def,unknownKeys:"strip"})}passthrough(){return new r({...this._def,unknownKeys:"passthrough"})}extend(e){return new r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:se.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new r({...this._def,catchall:e})}pick(e){let t={};return me.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new r({...this._def,shape:()=>t})}omit(e){let t={};return me.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new r({...this._def,shape:()=>t})}deepPartial(){return $r(this)}partial(e){let t={};return me.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new r({...this._def,shape:()=>t})}required(e){let t={};return me.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof ot;)i=i._def.innerType;t[n]=i}}),new r({...this._def,shape:()=>t})}keyof(){return Zl(me.objectKeys(this.shape))}};Ye.create=(r,e)=>new Ye({shape:()=>r,unknownKeys:"strip",catchall:gt.create(),typeName:se.ZodObject,...le(e)});Ye.strictCreate=(r,e)=>new Ye({shape:()=>r,unknownKeys:"strict",catchall:gt.create(),typeName:se.ZodObject,...le(e)});Ye.lazycreate=(r,e)=>new Ye({shape:r,unknownKeys:"strip",catchall:gt.create(),typeName:se.ZodObject,...le(e)});var ar=class extends fe{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(a=>new tt(a.ctx.common.issues));return V(t,{code:j.invalid_union,unionErrors:o}),ie}if(t.common.async)return Promise.all(n.map(async i=>{let o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i,o=[];for(let u of n){let h={...t,common:{...t.common,issues:[]},parent:null},l=u._parseSync({data:t.data,path:t.path,parent:h});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;let a=o.map(u=>new tt(u));return V(t,{code:j.invalid_union,unionErrors:a}),ie}}get options(){return this._def.options}};ar.create=(r,e)=>new ar({options:r,typeName:se.ZodUnion,...le(e)});var Lt=r=>r instanceof ur?Lt(r.schema):r instanceof rt?Lt(r.innerType()):r instanceof lr?[r.value]:r instanceof fr?r.options:r instanceof hr?me.objectValues(r.enum):r instanceof dr?Lt(r._def.innerType):r instanceof ir?[void 0]:r instanceof or?[null]:r instanceof ot?[void 0,...Lt(r.unwrap())]:r instanceof _t?[null,...Lt(r.unwrap())]:r instanceof Rn||r instanceof mr?Lt(r.unwrap()):r instanceof pr?Lt(r._def.innerType):[],$s=class r extends fe{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==G.object)return V(t,{code:j.invalid_type,expected:G.object,received:t.parsedType}),ie;let n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(V(t,{code:j.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ie)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let s=new Map;for(let i of t){let o=Lt(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new r({typeName:se.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...le(n)})}};function Pa(r,e){let t=$t(r),n=$t(e);if(r===e)return{valid:!0,data:r};if(t===G.object&&n===G.object){let s=me.objectKeys(e),i=me.objectKeys(r).filter(a=>s.indexOf(a)!==-1),o={...r,...e};for(let a of i){let u=Pa(r[a],e[a]);if(!u.valid)return{valid:!1};o[a]=u.data}return{valid:!0,data:o}}else if(t===G.array&&n===G.array){if(r.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<r.length;i++){let o=r[i],a=e[i],u=Pa(o,a);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return t===G.date&&n===G.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var cr=class extends fe{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(Ia(i)||Ia(o))return ie;let a=Pa(i.value,o.value);return a.valid?((Na(i)||Na(o))&&t.dirty(),{status:t.value,value:a.data}):(V(n,{code:j.invalid_intersection_types}),ie)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};cr.create=(r,e,t)=>new cr({left:r,right:e,typeName:se.ZodIntersection,...le(t)});var St=class r extends fe{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.array)return V(n,{code:j.invalid_type,expected:G.array,received:n.parsedType}),ie;if(n.data.length<this._def.items.length)return V(n,{code:j.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ie;!this._def.rest&&n.data.length>this._def.items.length&&(V(n,{code:j.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...n.data].map((o,a)=>{let u=this._def.items[a]||this._def.rest;return u?u._parse(new at(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Qe.mergeArray(t,o)):Qe.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new r({...this._def,rest:e})}};St.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new St({items:r,typeName:se.ZodTuple,rest:null,...le(e)})};var ks=class r extends fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.object)return V(n,{code:j.invalid_type,expected:G.object,received:n.parsedType}),ie;let s=[],i=this._def.keyType,o=this._def.valueType;for(let a in n.data)s.push({key:i._parse(new at(n,a,n.path,a)),value:o._parse(new at(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Qe.mergeObjectAsync(t,s):Qe.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof fe?new r({keyType:e,valueType:t,typeName:se.ZodRecord,...le(n)}):new r({keyType:Ut.create(),valueType:e,typeName:se.ZodRecord,...le(t)})}},jr=class extends fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.map)return V(n,{code:j.invalid_type,expected:G.map,received:n.parsedType}),ie;let s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,u],h)=>({key:s._parse(new at(n,a,n.path,[h,"key"])),value:i._parse(new at(n,u,n.path,[h,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let u of o){let h=await u.key,l=await u.value;if(h.status==="aborted"||l.status==="aborted")return ie;(h.status==="dirty"||l.status==="dirty")&&t.dirty(),a.set(h.value,l.value)}return{status:t.value,value:a}})}else{let a=new Map;for(let u of o){let h=u.key,l=u.value;if(h.status==="aborted"||l.status==="aborted")return ie;(h.status==="dirty"||l.status==="dirty")&&t.dirty(),a.set(h.value,l.value)}return{status:t.value,value:a}}}};jr.create=(r,e,t)=>new jr({valueType:e,keyType:r,typeName:se.ZodMap,...le(t)});var Dr=class r extends fe{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==G.set)return V(n,{code:j.invalid_type,expected:G.set,received:n.parsedType}),ie;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(V(n,{code:j.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(V(n,{code:j.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());let i=this._def.valueType;function o(u){let h=new Set;for(let l of u){if(l.status==="aborted")return ie;l.status==="dirty"&&t.dirty(),h.add(l.value)}return{status:t.value,value:h}}let a=[...n.data.values()].map((u,h)=>i._parse(new at(n,u,n.path,h)));return n.common.async?Promise.all(a).then(u=>o(u)):o(a)}min(e,t){return new r({...this._def,minSize:{value:e,message:Y.toString(t)}})}max(e,t){return new r({...this._def,maxSize:{value:e,message:Y.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Dr.create=(r,e)=>new Dr({valueType:r,minSize:null,maxSize:null,typeName:se.ZodSet,...le(e)});var qs=class r extends fe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==G.function)return V(t,{code:j.invalid_type,expected:G.function,received:t.parsedType}),ie;function n(a,u){return Os({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Rs(),qr].filter(h=>!!h),issueData:{code:j.invalid_arguments,argumentsError:u}})}function s(a,u){return Os({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Rs(),qr].filter(h=>!!h),issueData:{code:j.invalid_return_type,returnTypeError:u}})}let i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof zt){let a=this;return ze(async function(...u){let h=new tt([]),l=await a._def.args.parseAsync(u,i).catch(x=>{throw h.addIssue(n(u,x)),h}),p=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(p,i).catch(x=>{throw h.addIssue(s(p,x)),h})})}else{let a=this;return ze(function(...u){let h=a._def.args.safeParse(u,i);if(!h.success)throw new tt([n(u,h.error)]);let l=Reflect.apply(o,this,h.data),p=a._def.returns.safeParse(l,i);if(!p.success)throw new tt([s(l,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new r({...this._def,args:St.create(e).rest(kt.create())})}returns(e){return new r({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new r({args:e||St.create([]).rest(kt.create()),returns:t||kt.create(),typeName:se.ZodFunction,...le(n)})}},ur=class extends fe{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};ur.create=(r,e)=>new ur({getter:r,typeName:se.ZodLazy,...le(e)});var lr=class extends fe{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return V(t,{received:t.data,code:j.invalid_literal,expected:this._def.value}),ie}return{status:"valid",value:e.data}}get value(){return this._def.value}};lr.create=(r,e)=>new lr({value:r,typeName:se.ZodLiteral,...le(e)});function Zl(r,e){return new fr({values:r,typeName:se.ZodEnum,...le(e)})}var fr=class r extends fe{constructor(){super(...arguments),In.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return V(t,{expected:me.joinValues(n),received:t.parsedType,code:j.invalid_type}),ie}if(Ls(this,In,"f")||Kl(this,In,new Set(this._def.values),"f"),!Ls(this,In,"f").has(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return V(t,{received:t.data,code:j.invalid_enum_value,options:n}),ie}return ze(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return r.create(e,{...this._def,...t})}exclude(e,t=this._def){return r.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}};In=new WeakMap;fr.create=Zl;var hr=class extends fe{constructor(){super(...arguments),Nn.set(this,void 0)}_parse(e){let t=me.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==G.string&&n.parsedType!==G.number){let s=me.objectValues(t);return V(n,{expected:me.joinValues(s),received:n.parsedType,code:j.invalid_type}),ie}if(Ls(this,Nn,"f")||Kl(this,Nn,new Set(me.getValidEnumValues(this._def.values)),"f"),!Ls(this,Nn,"f").has(e.data)){let s=me.objectValues(t);return V(n,{received:n.data,code:j.invalid_enum_value,options:s}),ie}return ze(e.data)}get enum(){return this._def.values}};Nn=new WeakMap;hr.create=(r,e)=>new hr({values:r,typeName:se.ZodNativeEnum,...le(e)});var zt=class extends fe{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==G.promise&&t.common.async===!1)return V(t,{code:j.invalid_type,expected:G.promise,received:t.parsedType}),ie;let n=t.parsedType===G.promise?t.data:Promise.resolve(t.data);return ze(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}};zt.create=(r,e)=>new zt({type:r,typeName:se.ZodPromise,...le(e)});var rt=class extends fe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===se.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{V(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){let o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return ie;let u=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return u.status==="aborted"?ie:u.status==="dirty"||t.value==="dirty"?kr(u.value):u});{if(t.value==="aborted")return ie;let a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?ie:a.status==="dirty"||t.value==="dirty"?kr(a.value):a}}if(s.type==="refinement"){let o=a=>{let u=s.refinement(a,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?ie:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?ie:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!er(o))return o;let a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>er(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):o);me.assertNever(s)}};rt.create=(r,e,t)=>new rt({schema:r,typeName:se.ZodEffects,effect:e,...le(t)});rt.createWithPreprocess=(r,e,t)=>new rt({schema:e,effect:{type:"preprocess",transform:r},typeName:se.ZodEffects,...le(t)});var ot=class extends fe{_parse(e){return this._getType(e)===G.undefined?ze(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ot.create=(r,e)=>new ot({innerType:r,typeName:se.ZodOptional,...le(e)});var _t=class extends fe{_parse(e){return this._getType(e)===G.null?ze(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};_t.create=(r,e)=>new _t({innerType:r,typeName:se.ZodNullable,...le(e)});var dr=class extends fe{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===G.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};dr.create=(r,e)=>new dr({innerType:r,typeName:se.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...le(e)});var pr=class extends fe{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Pn(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new tt(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new tt(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};pr.create=(r,e)=>new pr({innerType:r,typeName:se.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...le(e)});var Fr=class extends fe{_parse(e){if(this._getType(e)!==G.nan){let n=this._getOrReturnCtx(e);return V(n,{code:j.invalid_type,expected:G.nan,received:n.parsedType}),ie}return{status:"valid",value:e.data}}};Fr.create=r=>new Fr({typeName:se.ZodNaN,...le(r)});var L0=Symbol("zod_brand"),Rn=class extends fe{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},On=class r extends fe{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ie:i.status==="dirty"?(t.dirty(),kr(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?ie:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new r({in:e,out:t,typeName:se.ZodPipeline})}},mr=class extends fe{_parse(e){let t=this._def.innerType._parse(e),n=s=>(er(s)&&(s.value=Object.freeze(s.value)),s);return Pn(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}};mr.create=(r,e)=>new mr({innerType:r,typeName:se.ZodReadonly,...le(e)});function Ul(r,e){let t=typeof r=="function"?r(e):typeof r=="string"?{message:r}:r;return typeof t=="string"?{message:t}:t}function Jl(r,e={},t){return r?Vt.create().superRefine((n,s)=>{var i,o;let a=r(n);if(a instanceof Promise)return a.then(u=>{var h,l;if(!u){let p=Ul(e,n),y=(l=(h=p.fatal)!==null&&h!==void 0?h:t)!==null&&l!==void 0?l:!0;s.addIssue({code:"custom",...p,fatal:y})}});if(!a){let u=Ul(e,n),h=(o=(i=u.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0;s.addIssue({code:"custom",...u,fatal:h})}}):Vt.create()}var $0={object:Ye.lazycreate},se;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(se||(se={}));var k0=(r,e={message:`Input not instance of ${r.name}`})=>Jl(t=>t instanceof r,e),Xl=Ut.create,Yl=tr.create,q0=Fr.create,M0=rr.create,ef=nr.create,B0=sr.create,j0=Mr.create,D0=ir.create,F0=or.create,Q0=Vt.create,U0=kt.create,V0=gt.create,z0=Br.create,K0=qt.create,G0=Ye.create,W0=Ye.strictCreate,H0=ar.create,Z0=$s.create,J0=cr.create,X0=St.create,Y0=ks.create,eg=jr.create,tg=Dr.create,rg=qs.create,ng=ur.create,sg=lr.create,ig=fr.create,og=hr.create,ag=zt.create,Vl=rt.create,cg=ot.create,ug=_t.create,lg=rt.createWithPreprocess,fg=On.create,hg=()=>Xl().optional(),dg=()=>Yl().optional(),pg=()=>ef().optional(),mg={string:r=>Ut.create({...r,coerce:!0}),number:r=>tr.create({...r,coerce:!0}),boolean:r=>nr.create({...r,coerce:!0}),bigint:r=>rr.create({...r,coerce:!0}),date:r=>sr.create({...r,coerce:!0})},gg=ie,xe=Object.freeze({__proto__:null,defaultErrorMap:qr,setErrorMap:l0,getErrorMap:Rs,makeIssue:Os,EMPTY_PATH:f0,addIssueToContext:V,ParseStatus:Qe,INVALID:ie,DIRTY:kr,OK:ze,isAborted:Ia,isDirty:Na,isValid:er,isAsync:Pn,get util(){return me},get objectUtil(){return Aa},ZodParsedType:G,getParsedType:$t,ZodType:fe,datetimeRegex:Hl,ZodString:Ut,ZodNumber:tr,ZodBigInt:rr,ZodBoolean:nr,ZodDate:sr,ZodSymbol:Mr,ZodUndefined:ir,ZodNull:or,ZodAny:Vt,ZodUnknown:kt,ZodNever:gt,ZodVoid:Br,ZodArray:qt,ZodObject:Ye,ZodUnion:ar,ZodDiscriminatedUnion:$s,ZodIntersection:cr,ZodTuple:St,ZodRecord:ks,ZodMap:jr,ZodSet:Dr,ZodFunction:qs,ZodLazy:ur,ZodLiteral:lr,ZodEnum:fr,ZodNativeEnum:hr,ZodPromise:zt,ZodEffects:rt,ZodTransformer:rt,ZodOptional:ot,ZodNullable:_t,ZodDefault:dr,ZodCatch:pr,ZodNaN:Fr,BRAND:L0,ZodBranded:Rn,ZodPipeline:On,ZodReadonly:mr,custom:Jl,Schema:fe,ZodSchema:fe,late:$0,get ZodFirstPartyTypeKind(){return se},coerce:mg,any:Q0,array:K0,bigint:M0,boolean:ef,date:B0,discriminatedUnion:Z0,effect:Vl,enum:ig,function:rg,instanceof:k0,intersection:J0,lazy:ng,literal:sg,map:eg,nan:q0,nativeEnum:og,never:V0,null:F0,nullable:ug,number:Yl,object:G0,oboolean:pg,onumber:dg,optional:cg,ostring:hg,pipeline:fg,preprocess:lg,promise:ag,record:Y0,set:tg,strictObject:W0,string:Xl,symbol:j0,transformer:Vl,tuple:X0,undefined:D0,union:H0,unknown:U0,void:z0,NEVER:gg,ZodIssueCode:j,quotelessJson:u0,ZodError:tt});var Ie={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Pe(r,e){return e.includes(r.columnType)}function yg(r){return"enumValues"in r&&Array.isArray(r.enumValues)&&r.enumValues.length>0}var bg=xe.union([xe.string(),xe.number(),xe.boolean(),xe.null()]),xg=xe.union([bg,xe.record(xe.any()),xe.array(xe.any())]),wg=xe.custom(r=>r instanceof Buffer);function tf(r,e){let t=e?.zodInstance??xe,n=e?.coerce??{},s;return yg(r)&&(s=r.enumValues.length?t.enum(r.enumValues):t.string()),s||(Pe(r,["PgGeometry","PgPointTuple"])?s=t.tuple([t.number(),t.number()]):Pe(r,["PgGeometryObject","PgPointObject"])?s=t.object({x:t.number(),y:t.number()}):Pe(r,["PgHalfVector","PgVector"])?(s=t.array(t.number()),s=r.dimensions?s.length(r.dimensions):s):Pe(r,["PgLine"])?s=t.tuple([t.number(),t.number(),t.number()]):Pe(r,["PgLineABC"])?s=t.object({a:t.number(),b:t.number(),c:t.number()}):Pe(r,["PgArray"])?(s=t.array(tf(r.baseColumn,t)),s=r.size?s.length(r.size):s):r.dataType==="array"?s=t.array(t.any()):r.dataType==="number"?s=vg(r,t,n):r.dataType==="bigint"?s=Sg(r,t,n):r.dataType==="boolean"?s=n===!0||n.boolean?t.coerce.boolean():t.boolean():r.dataType==="date"?s=n===!0||n.date?t.coerce.date():t.date():r.dataType==="string"?s=_g(r,t,n):r.dataType==="json"?s=xg:r.dataType==="custom"?s=t.any():r.dataType==="buffer"&&(s=wg)),s||(s=t.any()),s}function vg(r,e,t){let n=r.getSQLType().includes("unsigned"),s,i,o=!1;Pe(r,["MySqlTinyInt","SingleStoreTinyInt"])?(s=n?0:Ie.INT8_MIN,i=n?Ie.INT8_UNSIGNED_MAX:Ie.INT8_MAX,o=!0):Pe(r,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(s=n?0:Ie.INT16_MIN,i=n?Ie.INT16_UNSIGNED_MAX:Ie.INT16_MAX,o=!0):Pe(r,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(s=n?0:Ie.INT24_MIN,i=n?Ie.INT24_UNSIGNED_MAX:Ie.INT24_MAX,o=Pe(r,["MySqlMediumInt","SingleStoreMediumInt"])):Pe(r,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(s=n?0:Ie.INT32_MIN,i=n?Ie.INT32_UNSIGNED_MAX:Ie.INT32_MAX,o=!0):Pe(r,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(s=n?0:Ie.INT48_MIN,i=n?Ie.INT48_UNSIGNED_MAX:Ie.INT48_MAX):Pe(r,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||Pe(r,["MySqlSerial","SingleStoreSerial"]),s=n?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=!0):Pe(r,["MySqlYear","SingleStoreYear"])?(s=1901,i=2155,o=!0):(s=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let a=t===!0||t?.number?e.coerce.number():e.number();return a=a.min(s).max(i),o?a.int():a}function Sg(r,e,t){let n=r.getSQLType().includes("unsigned"),s=n?0n:Ie.INT64_MIN,i=n?Ie.INT64_UNSIGNED_MAX:Ie.INT64_MAX;return(t===!0||t?.bigint?e.coerce.bigint():e.bigint()).min(s).max(i)}function _g(r,e,t){if(Pe(r,["PgUUID"]))return e.string().uuid();let n,s,i=!1;Pe(r,["PgVarchar","SQLiteText"])?n=r.length:Pe(r,["MySqlVarChar","SingleStoreVarChar"])?n=r.length??Ie.INT16_UNSIGNED_MAX:Pe(r,["MySqlText","SingleStoreText"])&&(r.textType==="longtext"?n=Ie.INT32_UNSIGNED_MAX:r.textType==="mediumtext"?n=Ie.INT24_UNSIGNED_MAX:r.textType==="text"?n=Ie.INT16_UNSIGNED_MAX:n=Ie.INT8_UNSIGNED_MAX),Pe(r,["PgChar","MySqlChar","SingleStoreChar"])&&(n=r.length,i=!0),Pe(r,["PgBinaryVector"])&&(s=/^[01]+$/,n=r.dimensions);let o=t===!0||t?.string?e.coerce.string():e.string();return o=s?o.regex(s):o,n&&i?o.length(n):n?o.max(n):o}function rf(r){return Hi(r)?ls(r):ju(r)}function nf(r,e,t,n){let s={};for(let[i,o]of Object.entries(r)){if(!q(o,ye)&&!q(o,K)&&!q(o,K.Aliased)&&typeof o=="object"){let p=Hi(o)||ku(o)?rf(o):o;s[i]=nf(p,e[i]??{},t,n);continue}let a=e[i];if(a!==void 0&&typeof a!="function"){s[i]=a;continue}let u=q(o,ye)?o:void 0,h=u?tf(u,n):xe.any(),l=typeof a=="function"?a(h):h;t.never(u)||(s[i]=l,u&&(t.nullable(u)&&(s[i]=s[i].nullable()),t.optional(u)&&(s[i]=s[i].optional())))}return xe.object(s)}var Eg={never:r=>r?.generated?.type==="always"||r?.generatedIdentity?.type==="always",optional:r=>!r.notNull||r.notNull&&r.hasDefault,nullable:r=>!r.notNull};var gr=(r,e)=>{let t=rf(r);return nf(t,e??{},Eg)};var Ke=Dt("users",{id:Ot("id").primaryKey(),email:ne("email").notNull().unique(),password:ne("password").notNull(),firstName:ne("first_name"),lastName:ne("last_name"),isActive:jt("is_active").default(!0),createdAt:mt("created_at").defaultNow()}),yr=Dt("password_reset_tokens",{id:Ot("id").primaryKey(),email:ne("email").notNull(),token:ne("token").notNull().unique(),expiresAt:mt("expires_at").notNull(),used:jt("used").default(!1),createdAt:mt("created_at").defaultNow()}),Tg=Dt("franchises",{id:Ot("id").primaryKey(),name:ne("name").notNull(),description:ne("description"),category:ne("category").notNull(),country:ne("country").notNull(),state:ne("state"),investmentRange:ne("investment_range"),imageUrl:ne("image_url"),contactEmail:ne("contact_email"),investmentMin:vt("investment_min"),investmentMax:vt("investment_max"),isActive:jt("is_active").default(!0),createdAt:mt("created_at").defaultNow()}),Cg=Dt("businesses",{id:Ot("id").primaryKey(),userId:vt("user_id").references(()=>Ke.id),name:ne("name").notNull(),description:ne("description"),category:ne("category").notNull(),country:ne("country").notNull(),state:ne("state"),price:vt("price"),imageUrl:ne("image_url"),contactEmail:ne("contact_email"),package:ne("package"),yearEstablished:ne("year_established"),employees:ne("employees"),revenue:ne("revenue"),reason:ne("reason"),assets:ne("assets"),status:ne("status").default("pending"),paymentStatus:ne("payment_status").default("unpaid"),isActive:jt("is_active").default(!1),createdAt:mt("created_at").defaultNow()}),Ag=Dt("advertisements",{id:Ot("id").primaryKey(),userId:vt("user_id").references(()=>Ke.id),title:ne("title").notNull(),description:ne("description"),imageUrl:ne("image_url").notNull(),targetUrl:ne("target_url"),package:ne("package"),company:ne("company"),contactEmail:ne("contact_email"),contactPhone:ne("contact_phone"),budget:ne("budget"),status:ne("status").default("pending"),paymentStatus:ne("payment_status").default("unpaid"),isActive:jt("is_active").default(!1),createdAt:mt("created_at").defaultNow()}),Ig=Dt("inquiries",{id:Ot("id").primaryKey(),name:ne("name").notNull(),email:ne("email").notNull(),phone:ne("phone"),subject:ne("subject").notNull(),message:ne("message").notNull(),franchiseId:vt("franchise_id"),businessId:vt("business_id"),status:ne("status").default("pending"),createdAt:mt("created_at").defaultNow()}),M3=Dt("sessions",{sid:ps("sid").primaryKey(),sess:ds("sess").notNull(),expire:mt("expire").notNull()},r=>[Fl("IDX_session_expire").on(r.expire)]),B3=gr(Ke).pick({email:!0,password:!0,firstName:!0,lastName:!0}),j3=xe.object({email:xe.string().email(),password:xe.string().min(6)}),D3=xe.object({email:xe.string().email(),password:xe.string().min(6),firstName:xe.string().min(1),lastName:xe.string().min(1)}),F3=xe.object({email:xe.string().email()}),Q3=xe.object({token:xe.string(),password:xe.string().min(6)}),U3=gr(yr).pick({email:!0,token:!0,expiresAt:!0}),V3=gr(Tg).omit({id:!0,createdAt:!0}),z3=gr(Cg).omit({id:!0,createdAt:!0}),K3=gr(Ag).omit({id:!0,createdAt:!0}),G3=gr(Ig).omit({id:!0,createdAt:!0});var uf=Nc(require("crypto"),1),Ra=null;function Ng(r){try{return crypto.getRandomValues(new Uint8Array(r))}catch{}try{return uf.default.randomBytes(r)}catch{}if(!Ra)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Ra(r)}function Pg(r){Ra=r}function La(r,e){if(r=r||$a,typeof r!="number")throw Error("Illegal arguments: "+typeof r+", "+typeof e);r<4?r=4:r>31&&(r=31);var t=[];return t.push("$2b$"),r<10&&t.push("0"),t.push(r.toString()),t.push("$"),t.push(Ms(Ng(Ln),Ln)),t.join("")}function lf(r,e,t){if(typeof e=="function"&&(t=e,e=void 0),typeof r=="function"&&(t=r,r=void 0),typeof r>"u")r=$a;else if(typeof r!="number")throw Error("illegal arguments: "+typeof r);function n(s){yt(function(){try{s(null,La(r))}catch(i){s(i)}})}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);n(t)}else return new Promise(function(s,i){n(function(o,a){if(o){i(o);return}s(a)})})}function ff(r,e){if(typeof e>"u"&&(e=$a),typeof e=="number"&&(e=La(e)),typeof r!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof r+", "+typeof e);return Oa(r,e)}function hf(r,e,t,n){function s(i){typeof r=="string"&&typeof e=="number"?lf(e,function(o,a){Oa(r,a,i,n)}):typeof r=="string"&&typeof e=="string"?Oa(r,e,i,n):yt(i.bind(this,Error("Illegal arguments: "+typeof r+", "+typeof e)))}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);s(t)}else return new Promise(function(i,o){s(function(a,u){if(a){o(a);return}i(u)})})}function df(r,e){for(var t=r.length^e.length,n=0;n<r.length;++n)t|=r.charCodeAt(n)^e.charCodeAt(n);return t===0}function Rg(r,e){if(typeof r!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof r+", "+typeof e);return e.length!==60?!1:df(ff(r,e.substring(0,e.length-31)),e)}function Og(r,e,t,n){function s(i){if(typeof r!="string"||typeof e!="string"){yt(i.bind(this,Error("Illegal arguments: "+typeof r+", "+typeof e)));return}if(e.length!==60){yt(i.bind(this,null,!1));return}hf(r,e.substring(0,29),function(o,a){o?i(o):i(null,df(a,e))},n)}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);s(t)}else return new Promise(function(i,o){s(function(a,u){if(a){o(a);return}i(u)})})}function Lg(r){if(typeof r!="string")throw Error("Illegal arguments: "+typeof r);return parseInt(r.split("$")[2],10)}function $g(r){if(typeof r!="string")throw Error("Illegal arguments: "+typeof r);if(r.length!==60)throw Error("Illegal hash length: "+r.length+" != 60");return r.substring(0,29)}function kg(r){if(typeof r!="string")throw Error("Illegal arguments: "+typeof r);return pf(r)>72}var yt=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function pf(r){for(var e=0,t=0,n=0;n<r.length;++n)t=r.charCodeAt(n),t<128?e+=1:t<2048?e+=2:(t&64512)===55296&&(r.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function qg(r){for(var e=0,t,n,s=new Array(pf(r)),i=0,o=r.length;i<o;++i)t=r.charCodeAt(i),t<128?s[e++]=t:t<2048?(s[e++]=t>>6|192,s[e++]=t&63|128):(t&64512)===55296&&((n=r.charCodeAt(i+1))&64512)===56320?(t=65536+((t&1023)<<10)+(n&1023),++i,s[e++]=t>>18|240,s[e++]=t>>12&63|128,s[e++]=t>>6&63|128,s[e++]=t&63|128):(s[e++]=t>>12|224,s[e++]=t>>6&63|128,s[e++]=t&63|128);return s}var Qr="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Kt=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Ms(r,e){var t=0,n=[],s,i;if(e<=0||e>r.length)throw Error("Illegal len: "+e);for(;t<e;){if(s=r[t++]&255,n.push(Qr[s>>2&63]),s=(s&3)<<4,t>=e){n.push(Qr[s&63]);break}if(i=r[t++]&255,s|=i>>4&15,n.push(Qr[s&63]),s=(i&15)<<2,t>=e){n.push(Qr[s&63]);break}i=r[t++]&255,s|=i>>6&3,n.push(Qr[s&63]),n.push(Qr[i&63])}return n.join("")}function mf(r,e){var t=0,n=r.length,s=0,i=[],o,a,u,h,l,p;if(e<=0)throw Error("Illegal len: "+e);for(;t<n-1&&s<e&&(p=r.charCodeAt(t++),o=p<Kt.length?Kt[p]:-1,p=r.charCodeAt(t++),a=p<Kt.length?Kt[p]:-1,!(o==-1||a==-1||(l=o<<2>>>0,l|=(a&48)>>4,i.push(String.fromCharCode(l)),++s>=e||t>=n)||(p=r.charCodeAt(t++),u=p<Kt.length?Kt[p]:-1,u==-1)||(l=(a&15)<<4>>>0,l|=(u&60)>>2,i.push(String.fromCharCode(l)),++s>=e||t>=n)));)p=r.charCodeAt(t++),h=p<Kt.length?Kt[p]:-1,l=(u&3)<<6>>>0,l|=h,i.push(String.fromCharCode(l)),++s;var y=[];for(t=0;t<s;t++)y.push(i[t].charCodeAt(0));return y}var Ln=16,$a=10,Mg=16,Bg=100,sf=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],of=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],gf=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function $n(r,e,t,n){var s,i=r[e],o=r[e+1];return i^=t[0],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],o^=s^t[1],s=n[o>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s+=n[768|o&255],i^=s^t[2],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],o^=s^t[3],s=n[o>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s+=n[768|o&255],i^=s^t[4],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],o^=s^t[5],s=n[o>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s+=n[768|o&255],i^=s^t[6],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],o^=s^t[7],s=n[o>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s+=n[768|o&255],i^=s^t[8],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],o^=s^t[9],s=n[o>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s+=n[768|o&255],i^=s^t[10],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],o^=s^t[11],s=n[o>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s+=n[768|o&255],i^=s^t[12],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],o^=s^t[13],s=n[o>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s+=n[768|o&255],i^=s^t[14],s=n[i>>>24],s+=n[256|i>>16&255],s^=n[512|i>>8&255],s+=n[768|i&255],o^=s^t[15],s=n[o>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s+=n[768|o&255],i^=s^t[16],r[e]=o^t[Mg+1],r[e+1]=i,r}function Ur(r,e){for(var t=0,n=0;t<4;++t)n=n<<8|r[e]&255,e=(e+1)%r.length;return{key:n,offp:e}}function af(r,e,t){for(var n=0,s=[0,0],i=e.length,o=t.length,a,u=0;u<i;u++)a=Ur(r,n),n=a.offp,e[u]=e[u]^a.key;for(u=0;u<i;u+=2)s=$n(s,0,e,t),e[u]=s[0],e[u+1]=s[1];for(u=0;u<o;u+=2)s=$n(s,0,e,t),t[u]=s[0],t[u+1]=s[1]}function jg(r,e,t,n){for(var s=0,i=[0,0],o=t.length,a=n.length,u,h=0;h<o;h++)u=Ur(e,s),s=u.offp,t[h]=t[h]^u.key;for(s=0,h=0;h<o;h+=2)u=Ur(r,s),s=u.offp,i[0]^=u.key,u=Ur(r,s),s=u.offp,i[1]^=u.key,i=$n(i,0,t,n),t[h]=i[0],t[h+1]=i[1];for(h=0;h<a;h+=2)u=Ur(r,s),s=u.offp,i[0]^=u.key,u=Ur(r,s),s=u.offp,i[1]^=u.key,i=$n(i,0,t,n),n[h]=i[0],n[h+1]=i[1]}function cf(r,e,t,n,s){var i=gf.slice(),o=i.length,a;if(t<4||t>31)if(a=Error("Illegal number of rounds (4-31): "+t),n){yt(n.bind(this,a));return}else throw a;if(e.length!==Ln)if(a=Error("Illegal salt length: "+e.length+" != "+Ln),n){yt(n.bind(this,a));return}else throw a;t=1<<t>>>0;var u,h,l=0,p;typeof Int32Array=="function"?(u=new Int32Array(sf),h=new Int32Array(of)):(u=sf.slice(),h=of.slice()),jg(e,r,u,h);function y(){if(s&&s(l/t),l<t)for(var g=Date.now();l<t&&(l=l+1,af(r,u,h),af(e,u,h),!(Date.now()-g>Bg)););else{for(l=0;l<64;l++)for(p=0;p<o>>1;p++)$n(i,p<<1,u,h);var f=[];for(l=0;l<o;l++)f.push((i[l]>>24&255)>>>0),f.push((i[l]>>16&255)>>>0),f.push((i[l]>>8&255)>>>0),f.push((i[l]&255)>>>0);if(n){n(null,f);return}else return f}n&&yt(y)}if(typeof n<"u")y();else for(var x;;)if(typeof(x=y())<"u")return x||[]}function Oa(r,e,t,n){var s;if(typeof r!="string"||typeof e!="string")if(s=Error("Invalid string / salt: Not a string"),t){yt(t.bind(this,s));return}else throw s;var i,o;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(s=Error("Invalid salt version: "+e.substring(0,2)),t){yt(t.bind(this,s));return}else throw s;if(e.charAt(2)==="$")i="\0",o=3;else{if(i=e.charAt(2),i!=="a"&&i!=="b"&&i!=="y"||e.charAt(3)!=="$")if(s=Error("Invalid salt revision: "+e.substring(2,4)),t){yt(t.bind(this,s));return}else throw s;o=4}if(e.charAt(o+2)>"$")if(s=Error("Missing salt rounds"),t){yt(t.bind(this,s));return}else throw s;var a=parseInt(e.substring(o,o+1),10)*10,u=parseInt(e.substring(o+1,o+2),10),h=a+u,l=e.substring(o+3,o+25);r+=i>="a"?"\0":"";var p=qg(r),y=mf(l,Ln);function x(g){var f=[];return f.push("$2"),i>="a"&&f.push(i),f.push("$"),h<10&&f.push("0"),f.push(h.toString()),f.push("$"),f.push(Ms(y,y.length)),f.push(Ms(g,gf.length*4-1)),f.join("")}if(typeof t>"u")return x(cf(p,y,h));cf(p,y,h,function(g,f){g?t(g,null):t(null,x(f))},n)}function Dg(r,e){return Ms(r,e)}function Fg(r,e){return mf(r,e)}var Bs={setRandomFallback:Pg,genSaltSync:La,genSalt:lf,hashSync:ff,hash:hf,compareSync:Rg,compare:Og,getRounds:Lg,getSalt:$g,truncates:kg,encodeBase64:Dg,decodeBase64:Fg};var mi=Nc(Kp(),1),Gp=require("crypto");Bt.fetchConnectionCache=!0;var Kv=new It({connectionString:process.env.DATABASE_URL,max:1}),Mt=Ps(Kv),Sc=process.env.JWT_SECRET||"your-default-secret-key",Gv=async r=>{let e={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Content-Type":"application/json"};if(r.httpMethod==="OPTIONS")return{statusCode:200,headers:e};let t=r.path.replace("/.netlify/functions/auth","");try{if(r.httpMethod==="POST"){let n=JSON.parse(r.body||"{}");if(t==="/login"){let{email:s,password:i}=n,[o]=await Mt.select().from(Ke).where(it(Ke.email,s));if(!o||!await Bs.compare(i,o.password))return{statusCode:401,headers:e,body:JSON.stringify({error:"Invalid credentials"})};let a=mi.default.sign({userId:o.id},Sc,{expiresIn:"7d"});return{statusCode:200,headers:e,body:JSON.stringify({token:a,user:{id:o.id,email:o.email,firstName:o.firstName,lastName:o.lastName}})}}if(t==="/register"){let{email:s,password:i,firstName:o,lastName:a}=n,[u]=await Mt.select().from(Ke).where(it(Ke.email,s));if(u)return{statusCode:409,headers:e,body:JSON.stringify({error:"User already exists"})};let h=await Bs.hash(i,10),[l]=await Mt.insert(Ke).values({email:s,password:h,firstName:o,lastName:a}).returning(),p=mi.default.sign({userId:l.id},Sc,{expiresIn:"7d"});return{statusCode:201,headers:e,body:JSON.stringify({token:p,user:{id:l.id,email:l.email,firstName:l.firstName,lastName:l.lastName}})}}if(t==="/forgot-password"){let{email:s}=n,[i]=await Mt.select().from(Ke).where(it(Ke.email,s));if(!i)return{statusCode:404,headers:e,body:JSON.stringify({error:"User not found"})};let o=(0,Gp.randomBytes)(32).toString("hex"),a=new Date(Date.now()+36e5);return await Mt.insert(yr).values({email:s,token:o,expiresAt:a}),{statusCode:200,headers:e,body:JSON.stringify({message:"Reset token generated",token:o})}}if(t==="/reset-password"){let{token:s,password:i}=n,[o]=await Mt.select().from(yr).where(it(yr.token,s));if(!o||o.used||o.expiresAt<new Date)return{statusCode:400,headers:e,body:JSON.stringify({error:"Invalid or expired token"})};let a=await Bs.hash(i,10);return await Mt.update(Ke).set({password:a}).where(it(Ke.email,o.email)),await Mt.update(yr).set({used:!0}).where(it(yr.token,s)),{statusCode:200,headers:e,body:JSON.stringify({message:"Password reset successful"})}}}if(r.httpMethod==="GET"&&t==="/verify"){let n=r.headers.authorization;if(!n||!n.startsWith("Bearer "))return{statusCode:401,headers:e,body:JSON.stringify({error:"No token provided"})};let s=n.substring(7);try{let i=mi.default.verify(s,Sc),[o]=await Mt.select().from(Ke).where(it(Ke.id,i.userId));return o?{statusCode:200,headers:e,body:JSON.stringify({user:{id:o.id,email:o.email,firstName:o.firstName,lastName:o.lastName}})}:{statusCode:401,headers:e,body:JSON.stringify({error:"Invalid token"})}}catch{return{statusCode:401,headers:e,body:JSON.stringify({error:"Invalid token"})}}}return{statusCode:404,headers:e,body:JSON.stringify({error:"Not found"})}}catch(n){return console.error("Error:",n),{statusCode:500,headers:e,body:JSON.stringify({error:"Internal server error"})}}};0&&(module.exports={handler});
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@neondatabase/serverless/index.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
